(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[63],{618:function(e,t,a){"use strict";var n=a(51),l=a(126),r=a(1),c=a.n(r),o=a(127),s=a(626),i=a(627),m=a(305);function u(){var e=Object(l.a)(["\n  padding: 1rem;\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .table_responsive_eddit{\n    overflow-x: auto;\n  }\n"]);return u=function(){return e},e}var d=o.a.div(u());function E(e){var t=e.column,a=t.filterValue,n=t.preFilteredRows,l=t.setFilter,r=n.length;return c.a.createElement("input",{value:a||"",onChange:function(e){l(e.target.value||void 0)},placeholder:"Buscar en ".concat(r," registros..."),className:"inputPageFilter"})}function b(e,t,a){return Object(i.a)(e,a,{keys:[function(e){return e.values[t]}]})}function g(e){var t=e.columns,a=e.data,l=e.menuTop,r=e.headerColor,o=e.headerFontColor,i=e.pageSizeHandler,u=c.a.useMemo((function(){return{fuzzyText:b,text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]),d=c.a.useMemo((function(){return{Filter:E}}),[]),g=Object(s.useTable)({columns:t,data:a,defaultColumn:d,filterTypes:u,initialState:{pageIndex:0,pageSize:i[0]}},s.useFilters,s.useSortBy,s.usePagination),p=g.getTableProps,f=g.getTableBodyProps,h=g.headerGroups,y=g.page,v=g.prepareRow,N=g.canPreviousPage,_=g.canNextPage,C=g.pageOptions,k=g.pageCount,x=g.gotoPage,z=g.nextPage,O=g.previousPage,j=g.setPageSize,S=g.state,w=S.pageIndex,P=S.pageSize;return c.a.createElement("div",{className:"table_responsive_eddit"},l?c.a.createElement("div",{className:"pagination"},c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return x(0)},disabled:!N},"<<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O()},disabled:!N},"<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return z()},disabled:!_},">")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return x(k-1)},disabled:!_},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,w+1," de ",C.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:w+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;x(t)},className:"inputPage"},"onChange",(function(e){e.target.value>C.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:P,onChange:function(e){j(Number(e.target.value))},className:"inputPage"},i.map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",c.a.createElement("table",Object.assign({},p(),{className:"table table-bordered"}),c.a.createElement("thead",null,h.map((function(e){return c.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center"}),e.headers.map((function(e){return c.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{style:{backgroundColor:r||"rgb(218, 236, 242)",color:o||"black"}}),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),c.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),c.a.createElement("tbody",Object.assign({},f(),{className:"text-center"}),y.map((function(e,t){return v(e)||c.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return c.a.createElement("td",Object.assign({style:{position:"relative"}},e.getCellProps()),e.render("Cell"))})))})))),c.a.createElement("div",{className:"pagination"},c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return x(0)},disabled:!N},"<<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O()},disabled:!N},"<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return z()},disabled:!_},">")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return x(k-1)},disabled:!_},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,w+1," de ",C.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:w+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;x(t)},className:"inputPage"},"onChange",(function(e){e.target.value>C.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:P,onChange:function(e){j(Number(e.target.value))},className:"inputPage"},i.map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}b.autoRemove=function(e){return!e};t.a=function(e){var t=e.data,a=e.columns,n=e.menuTop,l=e.headerColor,r=e.headerFontColor,o=e.pageSizeHandler;return o=o||[10,20,30,40,50],c.a.createElement(d,null,c.a.createElement(g,{pageSizeHandler:o,data:t,columns:a,menuTop:n,headerFontColor:r,headerColor:l}))}},673:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=(a(311),a(616)),c=a(604),o=a(205),s=a(305),i=a(32),m=a(83);t.a=function(e){var t=e.cotization.is_order?"Orden de compra":"Cotizaci\xf3n";return l.a.createElement(r.a,{show:e.isShow,onHide:e.onHide,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},l.a.createElement(r.a.Header,{closeButton:!0,className:"header_dark"},l.a.createElement(r.a.Title,{id:"contained-modal-title-vcenter"},"Acciones Disponibles")),e.displayLoadingModal?l.a.createElement(r.a.Body,null,l.a.createElement(m.a,null)):l.a.createElement(r.a.Body,null,1===e.cotization.status?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"title_principal"},"Acciones generales"),l.a.createElement("hr",null),l.a.createElement(c.a,{className:"justify-content-center"},l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.updateCotizacion(e.cotization.id)},block:!0},"Modificar ",t," ",l.a.createElement(i.j,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",l.a.createElement(i.k,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacion(e.cotization.id)},block:!0},"Imprimir ",l.a.createElement(i.q,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacionNew(e.cotization.id)},block:!0},"Imprimir nuevo pdf ",l.a.createElement(i.q,null)))),l.a.createElement("br",null),l.a.createElement("h5",{className:"title_principal"},"Status de la ",t),l.a.createElement("hr",null),l.a.createElement(c.a,{className:"justify-content-center"},l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.changeStatus(e.cotization.id,2)},block:!0},"Aprobar ",t," ",l.a.createElement(i.L,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.anulateCotization(e.cotization.id,e.cotization.status)},block:!0},"Anular ",t," ",l.a.createElement(i.a,null))))):2===e.cotization.status?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"title_principal"},"Acciones generales"),l.a.createElement("hr",null),l.a.createElement(c.a,{className:"justify-content-center"},l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.updateCotizacion(e.cotization.id)},block:!0},"Modificar ",t," ",l.a.createElement(i.j,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",l.a.createElement(i.k,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacion(e.cotization.id)},block:!0},"Imprimir ",l.a.createElement(i.q,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacionNew(e.cotization.id)},block:!0},"Imprimir nuevo pdf ",l.a.createElement(i.q,null)))),l.a.createElement("br",null),l.a.createElement("h5",{className:"title_principal"},"Documentos de la Cotizaci\xf3n"),l.a.createElement("hr",null),l.a.createElement(c.a,{className:"justify-content-center"},l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToFacturation(e.cotization.id)},block:!0},"Facturar ",l.a.createElement(i.p,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToNoteSale(e.cotization.id)},block:!0},"Nota de venta ",l.a.createElement(i.p,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToBillOfSale(e.cotization.id)},block:!0},"Boleta ",l.a.createElement(i.p,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToGuideDispatch(e.cotization.id)},block:!0},"Gu\xeda de Despacho ",l.a.createElement(i.p,null)))),l.a.createElement("br",null),l.a.createElement("h5",{className:"title_principal"},"Status de la ",t),l.a.createElement("hr",null),l.a.createElement(c.a,{className:"justify-content-center"},l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.changeStatus(e.cotization.id,1)},block:!0},"Pasar a Pendiente ",l.a.createElement(i.L,null))),l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.anulateCotization(e.cotization.id,e.cotization.status)},block:!0},"Anular ",t," ",l.a.createElement(i.a,null))))):e.cotization.status>=3&&e.cotization.status<7?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,null,l.a.createElement(o.a,{sm:4,md:4,lg:4},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",l.a.createElement(i.k,null))),l.a.createElement(o.a,{sm:4,md:4,lg:4},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacion(e.cotization.id)},block:!0},"Imprimir ",l.a.createElement(i.q,null))),l.a.createElement(o.a,{sm:4,md:4,lg:4},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacionNew(e.cotization.id)},block:!0},"Imprimir nuevo pdf ",l.a.createElement(i.q,null))))):l.a.createElement(c.a,{className:"justify-content-center"},l.a.createElement(o.a,{sm:3,md:3,lg:3},l.a.createElement(s.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",l.a.createElement(i.k,null))))),l.a.createElement(r.a.Footer,null,l.a.createElement(s.a,{variant:"danger",size:"md",onClick:e.onHide},"Cerrar")))}},831:function(e,t,a){"use strict";a.r(t);var n=a(51),l=a(20),r=a(16),c=a(1),o=a.n(c),s=a(305),i=a(615),m=a(614),u=a(604),d=a(205),E=a(650),b=a(648),g=a(613),p=a(616),f=a(82),h=a(621),y=a(618),v=a(9),N=a.n(v),_=a(10),C=a(8),k=a(18),x=a(32),z=a(620),O=a(619),j=a(55),S=a(165),w=(a(311),a(29)),P=a(645),F=a(673),T=a(83),B={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0},D={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},G={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},H={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},A={labels:[],datasets:[{label:"Monto acumulado de documentos hechos por mes",backgroundColor:"rgb(15, 13, 74)",borderColor:"rgb(27, 13, 74)",borderWidth:1,hoverBackgroundColor:"rgb(15, 13, 74)",hoverBorderColor:"rgb(27, 13, 74)",data:[]}]},M={labels:[],datasets:[{label:"Cantidad facturada de documentos por a\xf1os",data:[],fill:!1,backgroundColor:"rgb(125, 81, 52)",borderColor:"rgb(99, 56, 21)"}]},q=null,R=function(e){var t=Object(c.useState)(!0),v=Object(r.a)(t,2),w=v[0],R=v[1],I=Object(c.useState)([]),Y=Object(r.a)(I,2),V=Y[0],L=Y[1],J=Object(c.useState)({}),K=Object(r.a)(J,2),W=K[0],U=K[1],Z=Object(c.useState)(!1),Q=Object(r.a)(Z,2),X=Q[0],$=Q[1],ee=Object(c.useState)(!1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],le=Object(c.useState)({}),re=Object(r.a)(le,2),ce=re[0],oe=re[1],se=Object(c.useState)(1),ie=Object(r.a)(se,2),me=ie[0],ue=ie[1],de=Object(c.useState)({date_desde:"",date_hasta:""}),Ee=Object(r.a)(de,2),be=Ee[0],ge=Ee[1],pe=Object(c.useState)({}),fe=Object(r.a)(pe,2),he=fe[0],ye=fe[1],ve=Object(c.useState)(!1),Ne=Object(r.a)(ve,2),_e=Ne[0],Ce=Ne[1];Object(c.useMemo)((function(){q=[{Header:"Referencia",accessor:"ref",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(z.a,{placement:"bottom",overlay:o.a.createElement(O.a,{id:"tooltip-disabled2"},"Hacer click para ver las acciones")},o.a.createElement(s.a,{variant:"link",block:!0,type:"button",size:"sm",onClick:function(){return Te(t)}},t.ref))}},{Header:"Rut Cliente",accessor:"rut_client"},{Header:"Raz\xf3n Social",accessor:"business_name_client",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(z.a,{placement:"right",overlay:o.a.createElement(O.a,{id:"tooltip-disabled2"},o.a.createElement("ul",{className:"list-group"},o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Vendedor: ")," ",t.name_seller),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Fono del Vendedor: ")," ",t.phone_seller?t.phone_seller:"No posee"),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Contacto")," ",t.name_contact?t.name_contact:"No posee"),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Fono del Contacto: ")," ",t.phone_contact),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Comentario: ")," ",t.comment)))},o.a.createElement(s.a,{variant:"link",size:"sm",block:!0,type:"button"},t.business_name_client))}},{Header:"Tipo",accessor:function(e){return 1==e.type_effect?["Afecta"]:["Excento"]}},{Header:"Fecha-Emisi\xf3n",accessor:function(e){return[S(e.date_issue).format("DD-MM-YYYY")]}},{Header:"Fecha Vencimiento",accessor:function(e){return[S(e.date_expiration).format("DD-MM-YYYY")]}},{Header:"Status",accessor:function(e){return[ke(e.status)]},Cell:function(e){var t=e.cell.row.original;return 1===t.status?o.a.createElement(z.a,{placement:"bottom",overlay:o.a.createElement(O.a,{id:"tooltip-disabled2"},"Hacer click para cambiar el Status")},o.a.createElement(s.a,{variant:"secondary",block:!0,size:"sm",onClick:function(){return we(t.id,2)}},"Pendiente")):2===t.status?o.a.createElement(z.a,{placement:"bottom",overlay:o.a.createElement(O.a,{id:"tooltip-disabled2"},"Hacer click para cambiar el Status")},o.a.createElement(s.a,{variant:"danger",block:!0,size:"sm",onClick:function(){return we(t.id,1)}},"Aprobada")):t.status>=3&&t.status<7?o.a.createElement(z.a,{placement:"bottom",overlay:o.a.createElement(O.a,{id:"tooltip-disabled2"},"Hacer click para ver el documento")},o.a.createElement(i.a,{variant:"primary",className:"font-badge",onClick:function(){return xe(t)}},ke(t.status))):7==t.status?o.a.createElement(i.a,{variant:"danger",className:"font-badge"},"Anulada"):o.a.createElement(i.a,{variant:"danger",className:"font-badge"},"vencida")}},{Header:"Total Productos",accessor:"total_product",Cell:function(t){var a=t.cell.row.original;return o.a.createElement(z.a,{placement:"left",overlay:o.a.createElement(O.a,{id:"tooltip-total_pagar"+a.id},o.a.createElement("ul",{className:"list-group"},a.products.map((function(t,n){return o.a.createElement("li",{className:"list-group-item",key:n},o.a.createElement("b",null,"Producto"),": ",t.name_product,o.a.createElement("br",null),o.a.createElement("b",null,"Precio")," : ",e.configGeneral.simbolo_moneda+Object(k.l)(e.configGeneral,a.total_with_iva?t.price:t.total),o.a.createElement("br",null),o.a.createElement("b",null,"Cantidad"),": ",t.quantity,o.a.createElement("br",null),o.a.createElement("b",null,"Status"),": ",1==t.status?"Pendiente":2==t.status?"Pagado":"Anulado")}))))},o.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda+Object(k.l)(e.configGeneral,a.total_product)))}},{Header:"Total gastos",accessor:"total_gastos",Cell:function(t){return o.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda,Object(k.l)(e.configGeneral,t.cell.row.original.total_gastos))}},{Header:"Total Iva",accessor:"total_iva",Cell:function(t){return o.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda,Object(k.l)(e.configGeneral,t.cell.row.original.total_iva))}},{Header:"Descuento Global",accessor:"discount_global_total",Cell:function(t){return o.a.createElement(z.a,{placement:"left",overlay:o.a.createElement(O.a,{id:"tooltip-total_pagar"+t.cell.row.original.id},t.cell.row.original.discount_global?t.cell.row.original.discount_global:0,"%")},o.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda+Object(k.l)(e.configGeneral,t.cell.row.original.discount_global_amount)))}},{Header:"Total Balance",accessor:"total_balance",Cell:function(t){return o.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda,Object(k.l)(e.configGeneral,t.cell.row.original.total_balance))}},{Header:"Productos Pagados",Cell:function(e){var t=e.cell.row.original;return t.status<6?t.is_products_paid?o.a.createElement(i.a,{variant:"success",className:"font-badge"},t.total_quantity_products_paid,"/",t.total_quantity_products):o.a.createElement(i.a,{variant:"danger",className:"font-badge"},t.total_quantity_products_paid,"/",t.total_quantity_products):""}},{Header:"Acciones",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(s.a,{variant:"primary",block:!0,type:"button",size:"sm",onClick:function(){return Te(t)}},"Acciones")}}]}),[]),Object(c.useEffect)((function(){return j.a.toggleCollapsed(),function(){q=null,j.a.toggleCollapsed()}}),[]),Object(c.useEffect)((function(){Se()}),[e.id_branch_office]),Object(c.useEffect)((function(){ae&&(G={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},A={labels:[],datasets:[{label:"Monto acumulado de documentos hechos por mes",backgroundColor:"rgb(15, 13, 74)",borderColor:"rgb(27, 13, 74)",borderWidth:1,hoverBackgroundColor:"rgb(15, 13, 74)",hoverBorderColor:"rgb(27, 13, 74)",data:[]}]},M={labels:[],datasets:[{label:"Cantidad facturada de documentos por a\xf1os",data:[],fill:!1,backgroundColor:"rgb(125, 81, 52)",borderColor:"rgb(99, 56, 21)"}]},H={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},Oe())}),[ae]);var ke=function(e){return 1===e?"Pendiente":2===e?"Aprobado":3===e?"Facturado":4===e?"Nota de Venta":5===e?"Boleta":6===e?"Gu\xeda Despacho":"Anulada"},xe=function(t){3===t.status?e.history.push("/invoice/invoice_search_by_ref/"+t.ref):4===t.status?e.history.push("/sale_note/sale_note_search_by_ref/"+t.ref):5===t.status?e.history.push("/bill/bill_search_by_ref/"+t.ref):6===t.status&&e.history.push("/guide/guide_search_by_ref/"+t.ref)},ze=function(e){ge(Object(l.a)(Object(l.a)({},be),{},Object(n.a)({},e.target.name,e.target.value)))},Oe=function(){ce.statuses.forEach((function(e,t){G.labels.push(e.status),G.datasets[0].data.push(parseFloat(e.total)),G.datasets[0].backgroundColor.push(_.c[t]),G.datasets[0].hoverBackgroundColor.push(_.c[t])})),ce.invoice.forEach((function(e,t){A.labels.push(e.mes),A.datasets[0].data.push(e.total)})),ce.invoiceByYear.forEach((function(e,t){M.labels.push(e.year),M.datasets[0].data.push(e.total)})),ce.totalByStatus.forEach((function(e,t){H.labels.push(e.name),H.datasets[0].data.push(parseFloat(e.total)),H.datasets[0].backgroundColor.push(_.c[t]),H.datasets[0].hoverBackgroundColor.push(_.c[t])})),setTimeout((function(){ne(!1)}),1500)},je=function(e){3==e&&ge({date_desde:"",date_hasta:""}),ue(e)},Se=function(){var t=Object.assign({},be),a=[N.a.get(_.b+"cotizacion/1"),N.a.post(_.b+"cotizacion_stadistics",t)];Promise.all(a).then((function(e){L(e[0].data),oe(Object(l.a)(Object(l.a)({},ce),{},{statuses:e[1].data.statuses,invoice:e[1].data.invoice,invoiceByYear:e[1].data.invoiceByYear,totalByStatus:e[1].data.totalByStatus})),setTimeout((function(){ne(!0)}),1e3),R(!1)})).catch((function(t){R(!1),e.tokenExpired(t)}))},we=function(t,a){var n={status:a};C.b.info("Cambiando estado, espere por favor..."),R(!0),setTimeout((function(){N.a.put(_.b+"cotizacion_status/"+t,n).then((function(e){C.b.success("Status Cambiado"),Object.keys(he).length&&ye(Object(l.a)(Object(l.a)({},he),{},{status:a})),Se()})).catch((function(t){R(!1),e.tokenExpired(t)}))}),3e3)},Pe=function(t,a){R(!0),N.a.delete(_.b+"cotizacion/"+t).then((function(e){if(a>=1&&a<=2)C.b.success("Orden de compra anulada con \xe9xito"),Object.keys(he).length&&ye(Object(l.a)(Object(l.a)({},he),{},{status:7}));else if(a>=3&&a<=6){if(3===a){var t=!0;e.data.forEach((function(e,a){e.status?window.open(e.pdf_public_url,"_blank"):(t=!1,C.b.error("Factura ".concat(e.folio," no ha podido ser anulada")))})),t?Object.keys(he).length&&ye(Object(l.a)(Object(l.a)({},he),{},{status:2})):C.b.error("La orden de compra no ha podido ser anulada debido a que 1 o m\xe1s facturas no fueron anuladas")}else Object.keys(he).length&&ye(Object(l.a)(Object(l.a)({},he),{},{status:2}));C.b.success("Documento anulado con \xe9xito"),R(!1)}Se()})).catch((function(t){R(!1),e.tokenExpired(t)}))},Fe=function(){$(!X)},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!_e&&e&&ye(e),Ce(!_e)};return o.a.createElement(m.a,{fluid:!0},o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,md:6,lg:6,className:"text-center"},o.a.createElement("h4",{className:"title_principal"},"Tabla de Ordenes de Compra"),o.a.createElement(s.a,{block:!0,variant:"success",onClick:function(){e.history.replace("/buyOrder/create")},size:"sm"},"Nueva orden  ",o.a.createElement(x.z,null))),o.a.createElement(d.a,{sm:6,md:6,lg:6,className:"text-center title_principal"},o.a.createElement("h4",null,"Total Ordenes Realizadas"),o.a.createElement(i.a,{variant:"danger"},V.length))),o.a.createElement("hr",null),w?o.a.createElement(T.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,xs:12},o.a.createElement(E.a,null,o.a.createElement(b.a,null,o.a.createElement(E.a.Toggle,{as:b.a.Header,eventKey:"0",className:"header_card"},o.a.createElement("b",null,"Estad\xedsticas")," ",o.a.createElement(x.e,null)),o.a.createElement(E.a.Collapse,{eventKey:"0"},o.a.createElement(b.a.Body,null,o.a.createElement(u.a,{className:"justify-content-center"},1==me?o.a.createElement(d.a,{sm:2,md:2,lg:2},o.a.createElement(s.a,{variant:"secondary",type:"button",size:"sm",block:!0,onClick:function(){return je(2)}},"Activar Filtros")):2==me?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{type:"date",label:"Fecha desde",name:"date_desde",required:!0,messageErrors:["Requerido*"],cols:"col-md-3 col-lg-3 col-sm-3",value:be.date_desde,handleChange:ze}),o.a.createElement(f.a,{type:"date",label:"Fecha Hasta",name:"date_hasta",required:!0,messageErrors:["Requerido*"],cols:"col-md-3 col-lg-3 col-sm-3",value:be.date_hasta,handleChange:ze}),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement("br",null),o.a.createElement(s.a,{variant:"danger",type:"button",size:"sm",block:!0,onClick:function(){var t=Object.assign({},be);ue(3),C.b.info("Filtrando datos..."),N.a.post(_.b+"cotizacion_stadistics",t).then((function(e){oe(Object(l.a)(Object(l.a)({},ce),{},{statuses:e.data.statuses,invoice:e.data.invoice,invoiceByYear:e.data.invoiceByYear,totalByStatus:e.data.totalByStatus})),setTimeout((function(){ne(!0),ue(1)}),1e3)})).catch((function(t){ue(1),e.tokenExpired(t)}))}},"Buscar")),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement("br",null),o.a.createElement(s.a,{variant:"secondary",type:"button",size:"sm",block:!0,onClick:function(){return je(1)}},"Ocultar Filtros"))):o.a.createElement(d.a,{sm:12,md:12,lg:12,className:"text-center"},o.a.createElement("br",null),o.a.createElement(g.a,{src:a(315),width:"30"}),o.a.createElement("br",null),"Cargando datos...")),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,md:6,lg:6,style:{height:"200px"}},o.a.createElement(P.b,{data:G,redraw:ae,options:B})),o.a.createElement(d.a,{sm:6,md:6,lg:6},o.a.createElement("table",{className:"table table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",colSpan:"2",style:{backgroundColor:"rgb(147, 52, 12)",color:"white"}},"Monto acumulado por estados")),o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Estado"),o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Total"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(ce).length>0?o.a.createElement(o.a.Fragment,null,ce.statuses.map((function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,t.status),o.a.createElement("td",null,e.configGeneral.simbolo_moneda,Object(k.l)(e.configGeneral,t.total)))}))):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"3",className:"text-center"},"Sin registros...")))))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,style:{height:"200px"}},o.a.createElement(P.a,{data:A,options:B,redraw:ae}))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,md:6,lg:6,style:{height:"230px"}},o.a.createElement("table",{className:"table table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",colSpan:"2",style:{backgroundColor:"rgb(147, 52, 12)",color:"white"}},"Total cotizaciones realizadas")),o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Estado"),o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Total"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(ce).length>0?o.a.createElement(o.a.Fragment,null,ce.totalByStatus.map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.total))}))):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"3",className:"text-center"},"Sin registros..."))))),o.a.createElement(d.a,{sm:6,md:6,lg:6,style:{height:"200px"},className:"text-center"},o.a.createElement(P.b,{data:H,redraw:ae,options:B}))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,style:{height:"200px"}},o.a.createElement(P.d,{data:M,options:D}))))))))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,xs:12},o.a.createElement(y.a,{columns:q,data:V})))),o.a.createElement(p.a,{onHide:Fe,show:X,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(p.a.Header,{closeButton:!0,className:"header_dark"},o.a.createElement(p.a.Title,{id:"contained-modal-title-vcenter"},"Detalles de la Cotizaci\xf3n N\xb0 ",Object.keys(W).length>0?W.ref:"")),o.a.createElement(p.a.Body,null,o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Registrador"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Rut"),o.a.createElement("th",{className:"text-center"},"Direcci\xf3n"),o.a.createElement("th",{className:"text-center"},"Email"),o.a.createElement("th",{className:"text-center"},"Fono"),o.a.createElement("th",{className:"text-center"},"Pa\xeds"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,W.business_name_transmitter),o.a.createElement("td",null,W.rut_transmitter),o.a.createElement("td",null,W.address_transmitter),o.a.createElement("td",null,W.email_transmitter),o.a.createElement("td",null,W.phone_transmitter),o.a.createElement("td",null,W.country_transmitter)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Cliente"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Razon Social / Nombre"),o.a.createElement("th",{className:"text-center"},"Rut"),o.a.createElement("th",{className:"text-center"},"Direcci\xf3n"),o.a.createElement("th",{className:"text-center"},"Ciudad"),o.a.createElement("th",{className:"text-center"},"Comuna"),o.a.createElement("th",{className:"text-center"},"Giro"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,W.business_name_client),o.a.createElement("td",null,W.rut_client),o.a.createElement("td",null,W.address_client),o.a.createElement("td",null,W.city_client),o.a.createElement("td",null,W.comuna_client),o.a.createElement("td",null,W.spin_client)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Contacto"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Fono"),o.a.createElement("th",{className:"text-center"},"Email"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,W.name_contact),o.a.createElement("td",null,W.phone_contact),o.a.createElement("td",null,W.email_contact)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Vendedor"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Fono"),o.a.createElement("th",{className:"text-center"},"Email"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,W.name_seller),o.a.createElement("td",null,W.phone_seller),o.a.createElement("td",null,W.email_seller)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:"table-responsive"},o.a.createElement("h4",{className:"title_principal text-center"},"Productos de la Cotizaci\xf3n"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Categoria"),o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Descripci\xf3n"),o.a.createElement("th",{className:"text-center"},"Cantidad"),o.a.createElement("th",{className:"text-center"},"Precio"),o.a.createElement("th",{className:"text-center"},"Descuento"),o.a.createElement("th",{className:"text-center"},"M\xe9todo de Venta"),o.a.createElement("th",{className:"text-center"},"Neto"),o.a.createElement("th",{className:"text-center"},"Total"),o.a.createElement("th",{className:"text-center"},"Status"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement(o.a.Fragment,null,W.products.map((function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,t.category),o.a.createElement("td",null,t.name_product),o.a.createElement("td",null,t.description),o.a.createElement("td",null,t.quantity),o.a.createElement("td",null,e.configGeneral.simbolo_moneda,Object(k.f)(W.total_with_iva?t.price:t.total,2,",",".")),o.a.createElement("td",null,t.discount?t.discount+"%":""),o.a.createElement("td",null,(n=t.method_sale,1===(n=parseInt(n))?"Unidad":2===n?"Mayorista":"(Litros, Kg, Etc..)")),o.a.createElement("td",null,t.is_neto?"Neto":"Iva"),o.a.createElement("td",null,o.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(k.f)(t.total,2,",","."))),o.a.createElement("td",null,1==t.status?"Pendiente":2==t.status?"Pagado":"Anulado"));var n}))):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:""},o.a.createElement("h4",{className:"title_principal text-center"},"Gastos de la Cotizaci\xf3n"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Descripci\xf3n"),o.a.createElement("th",{className:"text-center"},"Monto"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement(o.a.Fragment,null,W.gastos.map((function(t,a){return o.a.createElement("tr",null,o.a.createElement("td",null,t.description),o.a.createElement("td",null,o.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(k.f)(t.amount,2,",","."))))}))):"")))),o.a.createElement("br",null),Object.keys(W).length>0&&W.referencias&&W.referencias.length>0?o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:""},o.a.createElement("h4",{className:"title_principal text-center"},"Referencias de la Cotizaci\xf3n"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Tipo de Documento"),o.a.createElement("th",{className:"text-center"},"Referencia Cotiz."),o.a.createElement("th",{className:"text-center"},"Ind"),o.a.createElement("th",{className:"text-center"},"Fecha Ref."),o.a.createElement("th",{className:"text-center"},"Raz\xf3n de Referencia"),o.a.createElement("th",{className:"text-center"},"Tipo de C\xf3digo"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement(o.a.Fragment,null,W.referencias.map((function(e,t){return o.a.createElement("tr",null,o.a.createElement("td",null,e.type_document),o.a.createElement("td",null,e.ref_cotizacion),o.a.createElement("td",null,e.ind),o.a.createElement("td",null,e.date_ref?S(e.date_ref).tz("America/Santiago").format("DD-MM-YYYY"):""),o.a.createElement("td",null,e.reason_ref),o.a.createElement("td",null,e.type_code))}))):"")))):"",o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:""},o.a.createElement("h4",{className:"title_principal text-center"},"Totales"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Neto"),o.a.createElement("th",{className:"text-center"},"Iva"),o.a.createElement("th",{className:"text-center"},"Gastos"),o.a.createElement("th",{className:"text-center"},"Descuento Global"),o.a.createElement("th",{className:"text-center"},"Total Balance"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(W).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(k.f)(W.total_product,2,",","."))),o.a.createElement("td",null,o.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(k.f)(W.total_iva,2,",","."))),o.a.createElement("td",null,o.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(k.f)(W.total_gastos,2,",","."))),o.a.createElement("td",null,o.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(k.f)(W.discount_global_amount,2,",","."))),o.a.createElement("td",null,o.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(k.f)(W.total_balance,2,",",".")))):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},Object.keys(W).length>0?o.a.createElement("h5",null,"Mostrar solo los Totales: ",o.a.createElement(i.a,{variant:"primary",className:"font-badge"},W.total_with_iva?"No":"Si")):""))),o.a.createElement(p.a.Footer,null,o.a.createElement(s.a,{size:"md",variant:"info",onClick:Fe},"cerrar"))),o.a.createElement(F.a,{isShow:_e,onHide:Te,cotization:he,updateCotizacion:function(t){e.history.replace("/buyOrder/create/"+t)},seeDetailCotization:function(e){U(e),Fe()},printCotizacion:function(t){C.b.info("Buscando documento, espere por favor..."),R(!0),N.a.get(_.b+"cotizacion_print/"+t+"/0").then((function(e){window.open(_.b+"documents/cotizacion/files_pdf/"+e.data.name),R(!1)})).catch((function(t){R(!1),e.tokenExpired(t)}))},printCotizacionNew:function(t){C.b.info("Generando documento, espere por favor..."),R(!0),N.a.get(_.b+"cotizacion_print/"+t+"/0/1").then((function(e){window.open(_.b+"documents/cotizacion/files_pdf/"+e.data.name),R(!1)})).catch((function(t){R(!1),e.tokenExpired(t)}))},changeStatus:we,anulateCotization:function(e,t){Object(h.confirmAlert)({customUI:function(a){var n=a.onClose;return o.a.createElement("div",{className:"custom-ui-edit"},o.a.createElement("h1",null,"\xbfEsta seguro?"),o.a.createElement("p",{className:"font-alert"},"\xbfDesea realmente realizar esta acci\xf3n?"),o.a.createElement("button",{className:"button-alert",onClick:function(){Pe(e,t),n()}},"Si, Aceptar"),o.a.createElement("button",{className:"button-alert",onClick:n},"No"))}})},goToFacturation:function(t){e.history.push("/quotitation/invoicing/"+t)},goToNoteSale:function(t){e.history.replace("/quotitation/sale_note_create/"+t)},goToBillOfSale:function(t){e.history.replace("/quotitation/bill_create/"+t)},goToGuideDispatch:function(t){e.history.push("/quotitation/guide/"+t)},displayLoadingModal:w}))};R.defaultProps={configGeneral:JSON.parse(localStorage.getItem("configGeneral"))},t.default=Object(w.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise}}),{})(R)}}]);