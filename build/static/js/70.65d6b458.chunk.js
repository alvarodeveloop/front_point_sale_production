(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[70],{801:function(e,a,t){"use strict";t.r(a);var n=t(16),r=t.n(n),c=t(47),o=t(34),l=t(18),i=t(15),s=t(1),u=t.n(s),d=t(9),m=t.n(d),p=t(31),b=t(88),g=t(8),y=t(10),f=t(17),h=t(28),v=t(608),E=t(46),_=t(598),j=t(197),O=t(301),x=t(77),C=function(e){var a=Object(s.useState)({name_fantasy:"",rut_provider:"",id_country:"",comuna:"",city:"",phone:"",spin:"",social_razon:"",address:"",type_id:""}),t=Object(i.a)(a,2),n=t[0],d=t[1],h=Object(s.useState)([]),C=Object(i.a)(h,2),q=C[0],S=C[1],k=Object(s.useState)(!1),R=Object(i.a)(k,2),z=R[0],I=R[1],P=Object(s.useState)(!1),w=Object(i.a)(P,2),F=w[0],N=w[1],T=Object(s.useState)(!1),A=Object(i.a)(T,2),D=A[0],V=A[1],G=Object(s.useState)(!0),J=Object(i.a)(G,2),M=J[0],Z=J[1];Object(s.useEffect)((function(){L(),H()}),[]),Object(s.useEffect)((function(){d(Object(l.a)(Object(l.a)({},n),{},{id_country:e.configStore&&Object.keys(e.configStore).length>0?e.configStore.country:""}))}),[e.id_branch_office]);var B=function(){var e=Object(o.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"type_id"===a.target.name?d(Object(l.a)(Object(l.a)({},n),{},(t={},Object(c.a)(t,a.target.name,a.target.value),Object(c.a)(t,"rut_provider",""),t))):"rut_provider"===a.target.name?d(Object(l.a)(Object(l.a)({},n),{},Object(c.a)({},a.target.name,1==n.type_id?Object(f.b)(a.target.value):a.target.value))):d(Object(l.a)(Object(l.a)({},n),{},Object(c.a)({},a.target.name,a.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),H=function(){var a=[m.a.get(y.b+"country")];e.match.params.id&&a.push(m.a.get(y.b+"provider/"+atob(e.match.params.id))),Promise.all(a).then((function(e){S(e[0].data),e.length>1&&(d({name_fantasy:e[1].data.name_fantasy,rut_provider:e[1].data.rut_provider,id_country:e[1].data.id_country,comuna:e[1].data.comuna,city:e[1].data.city,phone:e[1].data.phone,spin:e[1].data.spin,social_razon:e[1].data.social_razon,address:e[1].data.address,type_id:e[1].data.type_id}),V(!0)),Z(!1)})).catch((function(a){Z(!1),e.tokenExpired(a)}))},K=function(){I(!0),d({name_fantasy:"",rut_provider:"",id_country:"",comuna:"",city:"",phone:"",spin:"",social_razon:"",address:"",type_id:""}),N(!1)},L=function(){};return u.a.createElement(v.a,null,u.a.createElement(E.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void N(!0);var r=Object.assign({},n);Z(!0),D?m.a.put(y.b+"provider/"+atob(e.match.params.id),r).then((function(a){g.b.success("Configuraci\xf3n Modificada"),setTimeout((function(){e.history.push("/provider/list")}),1500),Z(!1)})).catch((function(a){Z(!1),e.tokenExpired(a)})):m.a.post(y.b+"provider",r).then((function(e){g.b.success("Proveedor Creado"),K(),Z(!1)})).catch((function(a){Z(!1),e.tokenExpired(a)}))},noValidate:!0,validated:F},u.a.createElement(u.a.Fragment,null,M?u.a.createElement(x.a,null):u.a.createElement(u.a.Fragment,null,u.a.createElement(_.a,{className:"justify-content-center align-items-center"},u.a.createElement(j.a,{sm:12,md:12,lg:12,xs:12,className:"containerDivSeparated"},u.a.createElement("h4",{className:"title_principal"},"Formulario de Proveedores"),u.a.createElement("br",null),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputSocialRazon,{handleChange:B,value:n.social_razon})),u.a.createElement(b.a,Object.assign({},e.inputTypeId,{handleChange:B,value:n.type_id}),u.a.createElement("option",{value:""},"--Seleccione--"),u.a.createElement("option",{value:1},"Rut"),u.a.createElement("option",{value:2},"Identificaci\xf3n Fiscal")),n.type_id&&1==n.type_id?u.a.createElement(b.a,Object.assign({onChange:B,value:n.rut_provider},e.inputRut)):n.type_id&&2==n.type_id?u.a.createElement(b.a,Object.assign({},e.inputId,{handleChange:B,value:n.rut_provider})):"",u.a.createElement(b.a,Object.assign({},e.inputNameFantasy,{handleChange:B,value:n.name_fantasy}))),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputCountry,{handleChange:B,value:n.id_country}),u.a.createElement("option",{value:""},"--Seleccione--"),q.map((function(e,a){return u.a.createElement("option",{value:e.id,key:a},e.nombre)}))),u.a.createElement(b.a,Object.assign({},e.inputComuna,{handleChange:B,value:n.comuna})),u.a.createElement(b.a,Object.assign({},e.inputCity,{handleChange:B,value:n.city}))),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputPhone,{handleChange:B,value:n.phone})),u.a.createElement(b.a,Object.assign({},e.inputSpin,{handleChange:B,value:n.spin})),u.a.createElement(b.a,Object.assign({},e.inputAddress,{handleChange:B,value:n.address}))))),u.a.createElement("br",null),u.a.createElement(_.a,{className:"justify-content-center"},u.a.createElement(j.a,{sm:4,md:4,lg:4,xs:6},z?u.a.createElement(O.a,{size:"sm",type:"button",onClick:function(){I(!1)},variant:"primary",block:!0},"Crear otro ",u.a.createElement(p.z,null)):u.a.createElement(O.a,{size:"sm",type:"submit",variant:"danger",block:!0},"Guardar ",u.a.createElement(p.z,null))),u.a.createElement(j.a,{sm:4,md:4,lg:4,xs:6},u.a.createElement(O.a,{size:"sm",type:"button",onClick:function(){e.history.replace("/provider/list")},variant:"secondary",block:!0},"Volver a los Proveedores")))))))};C.defaultProps={inputNameFantasy:{type:"text",required:!1,name:"name_fantasy",label:"Nombre Fantasia",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6",messageErrors:["Requerido*"]},inputRut:{type:"text",required:!0,name:"rut_provider",placeholder:"Introduzca su informaci\xf3n",label:"Rut",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputCountry:{type:"select",required:!1,name:"id_country",label:"Pa\xeds",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputComuna:{type:"text",required:!1,name:"comuna",label:"Comuna",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputCity:{type:"text",required:!1,name:"city",label:"Ciudad",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputSpin:{type:"textarea",required:!1,name:"spin",label:"Giro",rows:1,messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputPhone:{type:"number",required:!1,name:"phone",label:"Tel\xe9fono",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputSocialRazon:{type:"text",required:!0,name:"social_razon",label:"Raz\xf3n Social",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputAddress:{type:"textarea",required:!1,name:"address",label:"Direcci\xf3n",rows:1,messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputTypeId:{type:"select",required:!0,name:"type_id",label:"Tipo de Id",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},inputId:{type:"number",required:!0,name:"rut_provider",label:"Identificaci\xf3n Fiscal",placeholder:"Ingrese su informaci\xf3n personal",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-6"},maskInput:{formatChars:{"*":"[A-Za-z0-9]"},mask:"**.***.***-*"}},a.default=Object(h.b)((function(e){return{configStore:e.configs.configStore,id_branch_office:e.enterpriseSucursal.id_branch_office}}),{})(C)}}]);
//# sourceMappingURL=70.65d6b458.chunk.js.map