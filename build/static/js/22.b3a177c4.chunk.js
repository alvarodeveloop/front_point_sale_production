(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[22],{654:function(e,t,a){"use strict";var n=a(45),r=a(659),l=a(1),c=a.n(l),o=a(661),s=a(660),i=a(664),u=a(319);function m(){var e=Object(r.a)(["\n  padding: 1rem;\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .tr_cabecera{\n    background-color: rgb(218, 236, 242);\n    color: black;\n  }\n"]);return m=function(){return e},e}var d=o.a.div(m());function p(e){var t=e.column,a=t.filterValue,n=t.preFilteredRows,r=t.setFilter,l=n.length;return c.a.createElement("input",{value:a||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(l," registros..."),className:"inputPageFilter"})}function g(e,t,a){return Object(i.a)(e,a,{keys:[function(e){return e.values[t]}]})}function E(e){var t=e.columns,a=e.data,r=c.a.useMemo((function(){return{fuzzyText:g,text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]),l=c.a.useMemo((function(){return{Filter:p}}),[]),o=Object(s.useTable)({columns:t,data:a,defaultColumn:l,filterTypes:r,initialState:{pageIndex:0}},s.useFilters,s.useSortBy,s.usePagination),i=o.getTableProps,m=o.getTableBodyProps,d=o.headerGroups,E=o.page,b=o.prepareRow,h=o.canPreviousPage,f=o.canNextPage,v=o.pageOptions,y=o.pageCount,_=o.gotoPage,x=o.nextPage,j=o.previousPage,O=o.setPageSize,N=o.state,k=N.pageIndex,C=N.pageSize;return c.a.createElement("div",{className:"table-responsive"},c.a.createElement("table",Object.assign({},i(),{className:"table table-bordered"}),c.a.createElement("thead",null,d.map((function(e){return c.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center"}),e.headers.map((function(e){return c.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"tr_cabecera"}),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),c.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),c.a.createElement("tbody",Object.assign({},m(),{className:"text-center"}),E.map((function(e,t){return b(e)||c.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return c.a.createElement("td",e.getCellProps(),e.render("Cell"))})))})))),c.a.createElement("div",{className:"pagination"},c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return _(0)},disabled:!h},"<<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j()},disabled:!h},"<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return x()},disabled:!f},">")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return _(y-1)},disabled:!f},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,k+1," de ",v.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:k+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;_(t)},className:"inputPage"},"onChange",(function(e){e.target.value>v.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:C,onChange:function(e){O(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}g.autoRemove=function(e){return!e};t.a=function(e){var t=e.data,a=e.columns;return c.a.createElement(d,null,c.a.createElement(E,{data:t,columns:a}))}},657:function(e,t,a){},691:function(e,t,a){"use strict";var n=a(45),r=a(23),l=a(61),c=a(16),o=a(1),s=a.n(o),i=a(836),u=a(318),m=a(627),d=a(674),p=a(50),g=a(319),E=a(29),b=a(15),h=a(31),f=a(170),v=a(21),y=a.n(v),_=function(e){var t=e.dataToPay,a=Object(c.a)(e,["dataToPay"]),v=Object(o.useState)({payment:"",turned:"",type:1,multiple_payment:{efectivo:0,tarjeta:0,sumup:0,cheque:0,otros:0,status:!1},voucher:!1}),_=Object(l.a)(v,2),x=_[0],j=_[1],O=Object(o.useState)(!1),N=Object(l.a)(O,2),k=N[0],C=N[1],S=Object(o.useState)(!1),P=Object(l.a)(S,2),T=P[0],z=P[1],D=function(){a.onHide()},w=function(e){var a=Object.assign({},x).turned,n=Object.assign({},x).payment;6===e?(C(!0),z(!0)):([2,3,4].includes(e)&&(a=0,n=t.total),z(!1)),j(Object(r.a)(Object(r.a)({},x),{},{turned:a,payment:n,type:e,multiple_payment:{efectivo:0,tarjeta:0,sumup:0,cheque:0,otros:0,status:!1}}))},F=function(e){var t=Object.assign({},x.multiple_payment);t[e.target.name]=e.target.value,j(Object(r.a)(Object(r.a)({},x),{},{multiple_payment:t}))},H=function(e){if("voucherCheckbox"===e.target.id)j(Object(r.a)(Object(r.a)({},x),{},{voucher:e.target.checked}));else if("type_delivery"===e.target.name){var t="true"===e.target.value;j(Object(r.a)(Object(r.a)({},x),{},Object(n.a)({},e.target.name,t)))}else j(Object(r.a)(Object(r.a)({},x),{},Object(n.a)({},e.target.name,e.target.value)))};return s.a.createElement(i.a,{show:a.isShow,onHide:D,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},s.a.createElement(i.a.Header,{closeButton:!0,className:"header_dark"},s.a.createElement(i.a.Title,{id:"contained-modal-title-vcenter"},"Cancelar Factura")),s.a.createElement(i.a.Body,null,k?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"containerDiv"},s.a.createElement(u.a,{sm:12,md:12,lg:12,xs:12},s.a.createElement(m.a,null,s.a.createElement(f.a,Object.assign({},a.inputEfectivo,{value:x.multiple_payment.efectivo,handleChange:F})),s.a.createElement(f.a,Object.assign({},a.inputTarjeta,{value:x.multiple_payment.tarjeta,handleChange:F}))),s.a.createElement(m.a,null,s.a.createElement(f.a,Object.assign({},a.inputSumup,{value:x.multiple_payment.sumup,handleChange:F})),s.a.createElement(f.a,Object.assign({},a.inputCheque,{value:x.multiple_payment.cheque,handleChange:F}))),s.a.createElement(m.a,null,s.a.createElement(f.a,Object.assign({},a.inputOtros,{value:x.multiple_payment.otros,handleChange:F}))),s.a.createElement(m.a,{className:"justify-content-center"},s.a.createElement(u.a,{sm:4,md:4,lg:4},s.a.createElement(g.a,{size:"sm",variant:"secondary",block:!0,onClick:function(){var e=parseFloat(x.multiple_payment.efectivo)+parseFloat(x.multiple_payment.tarjeta)+parseFloat(x.multiple_payment.sumup)+parseFloat(x.multiple_payment.cheque)+parseFloat(x.multiple_payment.otros),a=e-t.total;a<0&&(a=0),j(Object(r.a)(Object(r.a)({},x),{},{turned:a,payment:e})),C(!1)}},"Procesar")),s.a.createElement(u.a,{sm:4,md:4,lg:4},s.a.createElement(g.a,{size:"sm",variant:"danger",block:!0,onClick:function(){return C(!1)}},"Mostrar Secci\xf3n de Pagos")))))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"containerDiv",style:{marginLeft:"-8px"}},s.a.createElement(u.a,{sm:12,md:12,lg:12,xs:12},s.a.createElement("h3",{className:"text-center font-title"},"Factura N\xb0 ",t.ref),s.a.createElement(m.a,null,s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12,className:"text-center"},s.a.createElement("h4",null,"Sub Total: ",s.a.createElement(d.a,{variant:"primary",style:{fontSize:"18px"}},Object(E.f)(a.config,t.sub_total)," "))),s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12,className:"text-center"},s.a.createElement("h4",null,"Tax: ",s.a.createElement(d.a,{variant:"primary",style:{fontSize:"18px"}},Object(E.f)(a.config,t.tax)))),s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12,className:"text-center"},s.a.createElement("h4",null,"Total: ",s.a.createElement(d.a,{variant:"primary",style:{fontSize:"18px"}},Object(E.f)(a.config,t.total))))))),s.a.createElement("div",{className:"containerDiv",style:{marginLeft:"-8px"}},s.a.createElement(m.a,{className:"justify-content-center"},s.a.createElement(f.a,Object.assign({},a.inputPayment,{handleChange:H,value:x.payment,handleKeyUp:function(e){var a=parseFloat(e.target.value)-parseFloat(t.total);j(a>0?Object(r.a)(Object(r.a)({},x),{},{turned:[2,3,4].includes(x.type)?0:a}):Object(r.a)(Object(r.a)({},x),{},{turned:0}))},readonly:T}))),s.a.createElement(m.a,{className:"justify-content-center"},s.a.createElement(f.a,Object.assign({},a.inputTurned,{handleChange:H,value:x.turned})))),s.a.createElement(m.a,null,s.a.createElement(u.a,{sm:4,md:4,lg:4},s.a.createElement(p.a.Group,null,s.a.createElement(p.a.Check,{type:"checkbox",custom:!0,id:"voucherCheckbox",label:"Venta sin Boleta",value:x.voucher,checked:x.voucher,onChange:H})))),s.a.createElement(m.a,{className:"containerDiv justify-content-center",style:{marginLeft:"-8px"}},s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12},s.a.createElement(g.a,{size:"sm",onClick:function(){return w(1)},variant:"dark",block:"true"},"Efectivo")),s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12},s.a.createElement(g.a,{size:"sm",onClick:function(){return w(2)},variant:"dark",block:"true"},"Tarjeta")),s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12},s.a.createElement(g.a,{size:"sm",onClick:function(){return w(3)},variant:"dark",block:"true"},"Sumup")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12},s.a.createElement(g.a,{size:"sm",onClick:function(){return w(4)},variant:"dark",block:"true"},"Cheque")),s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12},s.a.createElement(g.a,{size:"sm",onClick:function(){return w(5)},variant:"dark",block:"true"},"Otros")),s.a.createElement(u.a,{sm:4,md:4,lg:4,xs:12},s.a.createElement(g.a,{size:"sm",onClick:function(){return w(6)},variant:"dark",block:"true"},"Pago multiple")),s.a.createElement("div",{className:"clearfix"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(u.a,{sm:6,md:6,lg:6,xs:12},s.a.createElement(g.a,{size:"sm",variant:"secondary",block:"true",onClick:function(){if(x.type)if(x.payment){var e=parseFloat(t.total);if(parseFloat(x.payment)<e)b.b.error("El monto pagado es inferior al total por pagar");else{var n=Object.assign({},t,{payment:x}),r=a.isDispatch?"sale_dispatch_payment":"sale_fiao";y.a.post(h.a+r,n).then((function(e){b.b.success("Proceso Completado"),a.onHide()})).catch((function(e){e.response?b.b.error(e.response.data.message):(console.log(e),b.b.error("Error, contacte con soporte"))}))}}else b.b.error("Debe ingresar un monto a pagar");else b.b.error("Debe escoger un m\xe9todo de pago")}},"Finalizar"))))),s.a.createElement(i.a.Footer,null,s.a.createElement(g.a,{size:"sm",onClick:D},"Cerrar")))};_.defaultProps={inputPayment:{type:"number",required:!0,name:"payment",label:"",placeholder:"Cantidad Recibida",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",step:"any",messageErrors:["Requerido*"]},inputTurned:{type:"number",required:!0,name:"turned",label:"",placeholder:"Vuelto",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",step:"any",readonly:!0,messageErrors:["Requerido*"]},inputEfectivo:{type:"number",required:!1,name:"efectivo",label:"Efectivo",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",messageErrors:[]},inputTarjeta:{type:"number",required:!1,name:"tarjeta",label:"Tarjeta",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",messageErrors:[]},inputSumup:{type:"number",required:!1,name:"sumup",label:"Sumup",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",messageErrors:[]},inputCheque:{type:"number",required:!1,name:"cheque",label:"Cheque",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",messageErrors:[]},inputOtros:{type:"number",required:!1,name:"otros",label:"Otros",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",messageErrors:[]}},t.a=_},693:function(e,t,a){"use strict";var n=a(16),r=a(1),l=a.n(r),c=a(836),o=a(319),s=(a(31),a(658),a(29));a(21);t.a=function(e){var t=e.dataSale,a=Object(n.a)(e,["dataSale"]);return l.a.createElement(c.a,{show:a.isShow,onHide:a.onHide,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},l.a.createElement(c.a.Header,{closeButton:!0,style:{backgroundColor:"black",color:"white"}},l.a.createElement(c.a.Title,{id:"contained-modal-title-vcenter"},"Detalle de la Compra ",t.ref)),l.a.createElement(c.a.Body,null,l.a.createElement("h3",{className:"text-center"},"Cliente"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",{style:{backgroundColor:"lightblue",color:"black"}},l.a.createElement("th",{className:"text-center"},"Nombre"),l.a.createElement("th",{className:"text-center"},"Fono"),l.a.createElement("th",{className:"text-center"},"Direcci\xf3n"),l.a.createElement("th",{className:"text-center"},"Documento"))),l.a.createElement("tbody",{className:"text-center"},l.a.createElement("tr",null,l.a.createElement("td",null,t.client?t.client.name_client:""),l.a.createElement("td",null,t.client?t.client.phone:""),l.a.createElement("td",null,t.client?t.client.address:""),l.a.createElement("td",null,t.client?t.client.type_document:""," ",l.a.createElement("br",null)," ",t.data_document)))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h3",{className:"text-center"},"Productos"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",{style:{backgroundColor:"lightblue",color:"black"}},l.a.createElement("th",{className:"text-center"},"Nombre"),l.a.createElement("th",{className:"text-center"},"Precio"),l.a.createElement("th",{className:"text-center"},"Cantidad"),l.a.createElement("th",{className:"text-center"},"Descripci\xf3n"),l.a.createElement("th",{className:"text-center"},"M\xe9todo de Venta"),l.a.createElement("th",{className:"text-center"},"Descuento o Recargo"),l.a.createElement("th",{className:"text-center"},"Monto"))),l.a.createElement("tbody",{className:"text-center"},t.products?t.products.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.product.name_product),l.a.createElement("td",null,a.config.simbolo_moneda+" "+Object(s.f)(a.config,e.price)),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.description),l.a.createElement("td",null,function(e){switch(parseInt(e,10)){case 1:return l.a.createElement("span",null,"Unidad");case 2:return l.a.createElement("span",null,"Mayorista");case 3:return l.a.createElement("span",null,"Kilos,Litros u Otros")}}(e.method_sale)),l.a.createElement("td",null,e.discount_recharge.length>0?e.discount_recharge[0].discount_or_recharge?"Descuento":"Recargo":"No posee"),l.a.createElement("td",null,e.discount_recharge.length>0?e.discount_recharge[0].amount:"No posee"))})):"",t.products_not_registered?t.products_not_registered.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.product.name_product,l.a.createElement("br",null)," ( Producto no Registrado )"),l.a.createElement("td",null,a.config.simbolo_moneda+" "+Object(s.f)(a.config,e.price)),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.descriptionSale),l.a.createElement("td",null),l.a.createElement("td",null,e.discount_recharge.length>0?e.discount_recharge[0].discount_or_recharge?"Descuento":"Recargo":""),l.a.createElement("td",null,e.discount_recharge.length>0?e.discount_recharge[0].amount:""))})):"")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h3",{className:"text-center"},"Descuento o Recargo del Monto Total"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",{style:{backgroundColor:"lightblue",color:"black"}},l.a.createElement("th",{className:"text-center"},"Monto"),l.a.createElement("th",{className:"text-center"},"Descuento o Recargo"),l.a.createElement("th",{className:"text-center"},"Tipo de Operaci\xf3n"))),l.a.createElement("tbody",{className:"text-center"},l.a.createElement("tr",null,l.a.createElement("td",null,a.config.simbolo_moneda+" "+Object(s.f)(a.config,t.total_discount_recharge)),l.a.createElement("td",null,t.type_discount_recharge?t.type_discount_recharge:"Ninguno"),l.a.createElement("td",null,t.type_percentaje_fixed_discount_recharge?t.type_percentaje_fixed_discount_recharge:"Ninguno")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h3",{className:"text-center"},"Totales"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",{style:{backgroundColor:"lightblue",color:"black"}},l.a.createElement("th",{className:"text-center"},"Total"),l.a.createElement("th",{className:"text-center"},"Tax"),l.a.createElement("th",{className:"text-center"},"Subtotal"),l.a.createElement("th",{className:"text-center"},"Monto Pagado"),l.a.createElement("th",{className:"text-center"},"Vuelto"))),l.a.createElement("tbody",{className:"text-center"},l.a.createElement("tr",null,l.a.createElement("td",null,a.config.simbolo_moneda+" "+Object(s.f)(a.config,t.total)),l.a.createElement("td",null,a.config.simbolo_moneda+" "+t.tax),l.a.createElement("td",null,a.config.simbolo_moneda+" "+t.sub_total),l.a.createElement("td",null,a.config.simbolo_moneda+" "+Object(s.f)(a.config,t.payment)),l.a.createElement("td",null,a.config.simbolo_moneda+" "+Object(s.f)(a.config,t.turned))))),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",{style:{backgroundColor:"lightblue",color:"black"}},l.a.createElement("th",{className:"text-center"},"Tax Configurado Al:"),l.a.createElement("th",{className:"text-center"},"M\xe9todo de Pago:"),l.a.createElement("th",{className:"text-center"},"Status"),l.a.createElement("th",{className:"text-center"},"Vendedor"))),l.a.createElement("tbody",{className:"text-center"},l.a.createElement("tr",null,l.a.createElement("td",null,t.tax_configuration),l.a.createElement("td",null,Object(s.c)(t.type_sale)),l.a.createElement("td",null,function(e){switch(parseInt(e,10)){case 1:return l.a.createElement("span",null,"Pagado");case 2:return l.a.createElement("span",null,"En espera");case 3:return l.a.createElement("span",null,"Anulado")}}(t.status)),l.a.createElement("td",null,t.user?t.user.email:""," - ",t.user?t.user.name:""))))),l.a.createElement(c.a.Footer,null,l.a.createElement(o.a,{size:"sm",variant:"secondary",onClick:a.onHide},"Cerrar")))}},834:function(e,t,a){"use strict";a.r(t);var n=a(45),r=a(23),l=a(61),c=a(1),o=a.n(c),s=a(21),i=a.n(s),u=a(319),m=a(674),d=a(671),p=a(618),g=a(626),E=a(627),b=a(318),h=a(836),f=a(50),v=a(15),y=a(31),_=a(654),x=(a(655),a(656),a(29)),j=a(691),O=a(693),N=a(658),k=a(170),C=(a(657),a(714)),S=[],P={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0},T={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},z=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=a[0],z=a[1],D=Object(c.useState)(!1),w=Object(l.a)(D,2),F=w[0],H=w[1],q=Object(c.useState)({}),R=Object(l.a)(q,2),M=R[0],I=R[1],B=Object(c.useState)(!1),A=Object(l.a)(B,2),G=A[0],L=A[1],V=Object(c.useState)(!1),J=Object(l.a)(V,2),Y=J[0],K=J[1],U=Object(c.useState)({status_dispatch:"",description_dispatch:"",dispatch:{}}),W=Object(l.a)(U,2),Q=W[0],X=W[1],Z=Object(c.useState)(!1),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)(!1),ne=Object(l.a)(ae,2),re=ne[0],le=ne[1],ce=Object(c.useState)([]),oe=Object(l.a)(ce,2),se=oe[0],ie=oe[1];Object(c.useEffect)((function(){return e.config&&e.configStore?be():e.config?e.configStore||(v.b.error("Error, debe hacer su configuraci\xf3n de la tienda primero"),setTimeout((function(){e.history.replace("/config/config_store")}),2e3)):(v.b.error("Error, debe hacer su configuraci\xf3n general"),setTimeout((function(){e.history.replace("/config/config_general")}),2e3)),function(){S=[],ve()}}),[]),Object(c.useEffect)((function(){ue(),setTimeout((function(){le(!1)}),3e3)}),[se]),Object(c.useMemo)((function(){S=[{Header:"Referencia",accessor:"ref",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(u.a,{variant:"link",size:"sm",onClick:function(){return de(t)}},t.ref)}},{Header:"Cliente",accessor:function(t){return e.client?[t.client.name_client+" "+t.client.data_document]:[]}},{Header:"Total",accessor:"total",Cell:function(e){return Object(x.f)(e.config,e.cell.row.original.total)}},{Header:"Status de Entrega",accessor:function(e){return 1==e.status_dispatch?["Sin entregar"]:2==e.status_dispatch?["Entregado"]:3==e.status_dispatch?["Se llevo sin recepci\xf3n"]:4==e.status_dispatch?["Retiro en Local"]:5==e.status_dispatch?["Anulado"]:["Otro"]},Cell:function(e){var t=e.cell.row.original,a="";return a=1==t.status_dispatch?"Sin entregar":2==t.status_dispatch?"Entregado":3==t.status_dispatch?"Se llevo sin recepci\xf3n":4==t.status_dispatch?"Retiro en Local":5==t.status_dispatch?"Anulado":"Otro",t.status_dispatch>=5?o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{variant:"danger",className:"font_badge"},a),o.a.createElement("br",null),o.a.createElement("b",null,"Motivo:")," ",t.description_dispatch):o.a.createElement(m.a,{variant:"danger",className:"font_badge"},a)}},{Header:"Status de Pago",accessor:function(e){return 1==e.status_payment_dispatch?["En espera"]:2==e.status_payment_dispatch?["Pedido Guardado"]:3==e.status_payment_dispatch?["Pagado"]:4==e.status_payment_dispatch?["Anulado"]:void 0},Cell:function(e){var t=e.cell.row.original,a="";return 1==t.status_payment_dispatch?a="En espera":2==t.status_payment_dispatch?a="Pedido Guardado":3==t.status_payment_dispatch?a="Pagado":4==t.status_payment_dispatch&&(a="Anulado"),o.a.createElement(m.a,{variant:"secondary",className:"font_badge"},a)}},{Header:"Fecha",accessor:function(t){return[e.createdAt]},Cell:function(e){return N(e.cell.row.original.createdAt).format("DD-MM-YYYY HH:II:SS")}},{Header:"Acciones",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(d.a,{size:"sm",id:"drop"+t.id,title:"Seleccione",block:"true"},o.a.createElement(p.a.Item,{onClick:function(){return de(t)}},"Cambiar Status de Entrega"),5!=t.status_dispatch&&3!=t.status_payment_dispatch?o.a.createElement(p.a.Item,{onClick:function(){return Ee(t)}},"Pagar Despacho"):"",5!=t.status_dispatch&&1==t.status_payment_dispatch?o.a.createElement(p.a.Item,{onClick:function(){return me(t)}},"Guardar Despacho"):"",3==t.status_payment_dispatch?o.a.createElement(p.a.Item,{onClick:function(){return ge(t)}},"Imprimir Factura"):"")}}]}));var ue=function(){se.forEach((function(e,t){T.labels.push(e.name),T.datasets[0].data.push(parseFloat(e.total)),T.datasets[0].backgroundColor.push(y.b[t]),T.datasets[0].hoverBackgroundColor.push(y.b[t])})),setTimeout((function(){le(!0)}),1500)},me=function(e){i.a.put(y.a+"sale_storage_dispatch/"+e.id).then((function(e){v.b.success("Despacho Guardado"),ve(),be()})).catch((function(e){e.response?v.b.error(e.response.data.message):(console.log(e),v.b.error("Error, contacte con soporte"))}))},de=function(e){he(),X(Object(r.a)(Object(r.a)({},Q),{},{dispatch:e}))},pe=function(e){var t;parseInt(e.target.value,10)<5?X(Object(r.a)(Object(r.a)({},Q),{},(t={},Object(n.a)(t,e.target.name,e.target.value),Object(n.a)(t,"description_dispatch",""),t))):X(Object(r.a)(Object(r.a)({},Q),{},Object(n.a)({},e.target.name,e.target.value)))},ge=function(e){window.open("/invoicePrintPage/"+e.id,"_blank")},Ee=function(e){I(e),H(!0)},be=function(){var e=[i.a.get(y.a+"sale_by_dispatch"),i.a.get(y.a+"sale_dispatch_stadistics")];Promise.all(e).then((function(e){z(e[0].data),ie(e[1].data.delivery)})).catch((function(e){e.response?v.b.error(e.response.data.message):(console.log(e),v.b.error("Error, contacte con soporte"))}))},he=function(){K(!Y)},fe=function(){X({status_dispatch:"",description_dispatch:"",dispatch:{}})},ve=function(){T={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]}};return o.a.createElement(g.a,null,o.a.createElement(E.a,null,o.a.createElement(b.a,{sm:6,md:6,lg:6}),o.a.createElement(b.a,{sm:6,md:6,lg:6},o.a.createElement("h5",null,"Totales por Status de Entrega"))),o.a.createElement(E.a,null,o.a.createElement(b.a,{sm:4,md:4,lg:4},o.a.createElement("h4",{className:"title_principal"},"Tabla de Despachos")),o.a.createElement(b.a,{sm:8,md:8,lg:8},o.a.createElement(C.a,{data:T,redraw:re,options:P}))),o.a.createElement("hr",null),o.a.createElement(E.a,null,o.a.createElement(b.a,{sm:12,md:12,lg:12,xs:12,className:"containerDiv"},o.a.createElement(_.a,{columns:S,data:s}))),o.a.createElement(j.a,{isShow:F,onHide:function(){H(!1),be()},config:e.config,configStore:e.configStore,dataToPay:M,isDispatch:!0}),e.config&&e.configStore?o.a.createElement(O.a,{isShow:G,onHide:function(){return L(!1)},config:e.config,configStore:e.configStore,dataSale:M}):"",o.a.createElement(h.a,{show:Y,onHide:he,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(h.a.Header,{closeButton:!0,className:"header_dark"},o.a.createElement(h.a.Title,{id:"contained-modal-title-vcenter"},"Cambiar Status del Despacho ",Object.keys(Q.dispatch).length>0?Q.dispatch.ref:"")),o.a.createElement(f.a,{onSubmit:function(e){var t=e.currentTarget;if(e.preventDefault(),!1===t.checkValidity())return e.stopPropagation(),void te(!0);var a=Object.assign({},Q);i.a.put(y.a+"sale_dispatch_status_delivery/"+a.dispatch.id,a).then((function(e){v.b.success("Status Modificado"),fe(),he(),ve(),be()})).catch((function(e){var t=e.response;t?v.b.error(t.data.message):v.b.error("Error, contacte con soporte")}))},noValidate:!0,validated:ee},o.a.createElement(h.a.Body,null,o.a.createElement(E.a,{className:"justify-content-center"},o.a.createElement(k.a,{type:"select",name:"status_dispatch",required:!0,label:"Status del Despacho",cols:"col-md-6 col-sm-6 col-lg-6",value:Q.status_dispatch,handleChange:pe,messageErrors:["Requerido*"]},o.a.createElement("option",{value:""},"--Seleccione--"),o.a.createElement("option",{value:"1"},"Sin Entregar"),o.a.createElement("option",{value:"2"},"Entregado"),o.a.createElement("option",{value:"3"},"Se llevo sin Recepci\xf3n"),o.a.createElement("option",{value:"4"},"Retiro  en el Local"),o.a.createElement("option",{value:"5"},"Anulado"),o.a.createElement("option",{value:"6"},"Otro"))),6==Q.status_dispatch||5==Q.status_dispatch?o.a.createElement(E.a,{className:"justify-content-center"},o.a.createElement(k.a,{type:"textarea",name:"description_dispatch",required:!0,label:"Ingrese una Descripci\xf3n o Motivo",cols:"col-md-6 col-sm-6 col-lg-6",value:Q.description_dispatch,handleChange:pe,messageErrors:[]})):""),o.a.createElement(h.a.Footer,null,o.a.createElement(u.a,{size:"sm",variant:"primary",type:"submit"},"Guardar"),o.a.createElement(u.a,{size:"sm",variant:"danger",onClick:he},"Cerrar")))))};z.defaultProps={config:JSON.parse(localStorage.getItem("configGeneral")),configStore:JSON.parse(localStorage.getItem("configStore"))},t.default=z}}]);
//# sourceMappingURL=22.b3a177c4.chunk.js.map