(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[69],{801:function(e,a,t){"use strict";t.r(a);var n=t(16),r=t.n(n),c=t(32),o=t(35),l=t(18),i=t(15),s=t(1),u=t.n(s),d=t(9),m=t.n(d),p=t(31),b=t(88),g=t(8),y=t(10),f=t(17),h=t(28),v=t(608),E=t(47),_=t(598),j=t(197),O=t(301),C=t(77),x=function(e){var a=Object(s.useState)({name_fantasy:"",rut_provider:"",id_country:"",comuna:"",city:"",phone:"",spin:"",social_razon:"",address:"",type_id:""}),t=Object(i.a)(a,2),n=t[0],d=t[1],h=Object(s.useState)([]),x=Object(i.a)(h,2),q=x[0],S=x[1],k=Object(s.useState)(!1),R=Object(i.a)(k,2),z=R[0],N=R[1],I=Object(s.useState)(!1),P=Object(i.a)(I,2),w=P[0],F=P[1],T=Object(s.useState)(!1),D=Object(i.a)(T,2),A=D[0],G=D[1],V=Object(s.useState)(!0),J=Object(i.a)(V,2),B=J[0],L=J[1];Object(s.useEffect)((function(){K(),Z()}),[]),Object(s.useEffect)((function(){d(Object(l.a)(Object(l.a)({},n),{},{id_country:e.configStore&&Object.keys(e.configStore).length>0?e.configStore.country:""}))}),[e.id_branch_office]);var M=function(){var e=Object(o.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"type_id"===a.target.name?d(Object(l.a)(Object(l.a)({},n),{},(t={},Object(c.a)(t,a.target.name,a.target.value),Object(c.a)(t,"rut_provider",""),t))):"rut_provider"===a.target.name?d(Object(l.a)(Object(l.a)({},n),{},Object(c.a)({},a.target.name,1==n.type_id?Object(f.b)(a.target.value):a.target.value))):d(Object(l.a)(Object(l.a)({},n),{},Object(c.a)({},a.target.name,a.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Z=function(){var a=[m.a.get(y.b+"country")];e.match.params.id&&a.push(m.a.get(y.b+"provider/"+atob(e.match.params.id))),Promise.all(a).then((function(e){S(e[0].data),e.length>1&&(d({name_fantasy:e[1].data.name_fantasy,rut_provider:e[1].data.rut_provider,id_country:e[1].data.id_country,comuna:e[1].data.comuna,city:e[1].data.city,phone:e[1].data.phone,spin:e[1].data.spin,social_razon:e[1].data.social_razon,address:e[1].data.address,type_id:e[1].data.type_id}),G(!0)),L(!1)})).catch((function(a){L(!1),e.tokenExpired(a)}))},H=function(){N(!0),d({name_fantasy:"",rut_provider:"",id_country:"",comuna:"",city:"",phone:"",spin:"",social_razon:"",address:"",type_id:""}),F(!1)},K=function(){};return u.a.createElement(v.a,null,u.a.createElement(E.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void F(!0);var r=Object.assign({},n);L(!0),A?m.a.put(y.b+"provider/"+atob(e.match.params.id),r).then((function(a){g.b.success("Configuraci\xf3n Modificada"),setTimeout((function(){e.history.push("/provider/list")}),1500),L(!1)})).catch((function(a){L(!1),e.tokenExpired(a)})):m.a.post(y.b+"provider",r).then((function(e){g.b.success("Proveedor Creado"),H(),L(!1)})).catch((function(a){L(!1),e.tokenExpired(a)}))},noValidate:!0,validated:w},u.a.createElement(u.a.Fragment,null,B?u.a.createElement(C.a,null):u.a.createElement(_.a,{className:"justify-content-center align-items-center"},u.a.createElement(j.a,{sm:7,md:7,lg:7,xs:12,className:"containerDivSeparated"},u.a.createElement("h3",{className:"text-center title_principal"},"Formulario de Proveedores"),u.a.createElement("br",null),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputSocialRazon,{handleChange:M,value:n.social_razon})),u.a.createElement(b.a,Object.assign({},e.inputTypeId,{handleChange:M,value:n.type_id}),u.a.createElement("option",{value:""},"--Seleccione--"),u.a.createElement("option",{value:1},"Rut"),u.a.createElement("option",{value:2},"Identificaci\xf3n Fiscal"))),u.a.createElement(_.a,null,n.type_id&&1==n.type_id?u.a.createElement(E.a.Group,{className:"col-md-6 col-sm-6 col-lg-6 col-12"},u.a.createElement(E.a.Label,{className:"fontBold"},"Rut"),u.a.createElement(E.a.Control,Object.assign({onChange:M,value:n.rut_provider},e.inputRut)),u.a.createElement(E.a.Control.Feedback,{type:"invalid"},u.a.createElement("span",{className:"error-input"},"Requerido*"))):n.type_id&&2==n.type_id?u.a.createElement(b.a,Object.assign({},e.inputId,{handleChange:M,value:n.rut_provider})):"",u.a.createElement(b.a,Object.assign({},e.inputNameFantasy,{handleChange:M,value:n.name_fantasy}))),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputCountry,{handleChange:M,value:n.id_country}),u.a.createElement("option",{value:""},"--Seleccione--"),q.map((function(e,a){return u.a.createElement("option",{value:e.id,key:a},e.nombre)}))),u.a.createElement(b.a,Object.assign({},e.inputComuna,{handleChange:M,value:n.comuna}))),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputCity,{handleChange:M,value:n.city})),u.a.createElement(b.a,Object.assign({},e.inputPhone,{handleChange:M,value:n.phone}))),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputSpin,{handleChange:M,value:n.spin}))),u.a.createElement(_.a,null,u.a.createElement(b.a,Object.assign({},e.inputAddress,{handleChange:M,value:n.address})))),u.a.createElement(j.a,{sm:3,md:3,lg:3,xs:6,className:"containerDivSeparated justify-content-center align-items-center"},z?u.a.createElement(O.a,{size:"sm",type:"button",onClick:function(){N(!1)},variant:"secondary",block:!0},"Crear otro ",u.a.createElement(p.y,null)):u.a.createElement(O.a,{size:"sm",type:"submit",variant:"primary",block:!0},"Guardar ",u.a.createElement(p.y,null)),u.a.createElement("br",null),u.a.createElement("p",{className:"text-center"},"O"),u.a.createElement(O.a,{size:"sm",type:"button",onClick:function(){e.history.replace("/provider/list")},variant:"danger",block:!0},"Volver a los Proveedores"))))))};x.defaultProps={inputNameFantasy:{type:"text",required:!1,name:"name_fantasy",label:"Nombre Fantasia",cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6",messageErrors:["Requerido*"]},inputRut:{type:"text",required:!0,name:"rut_provider",placeholder:"Introduzca su informaci\xf3n"},inputCountry:{type:"select",required:!1,name:"id_country",label:"Pa\xeds",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputComuna:{type:"text",required:!1,name:"comuna",label:"Comuna",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputCity:{type:"text",required:!1,name:"city",label:"Ciudad",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputSpin:{type:"textarea",required:!1,name:"spin",label:"Giro",rows:2,messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputPhone:{type:"number",required:!1,name:"phone",label:"Tel\xe9fono",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputSocialRazon:{type:"text",required:!0,name:"social_razon",label:"Raz\xf3n Social",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputAddress:{type:"textarea",required:!1,name:"address",label:"Direcci\xf3n",rows:2,messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputTypeId:{type:"select",required:!0,name:"type_id",label:"Tipo de Id",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputId:{type:"number",required:!0,name:"rut_provider",label:"Identificaci\xf3n Fiscal",placeholder:"Ingrese su informaci\xf3n personal",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},maskInput:{formatChars:{"*":"[A-Za-z0-9]"},mask:"**.***.***-*"}},a.default=Object(h.b)((function(e){return{configStore:e.configs.configStore,id_branch_office:e.enterpriseSucursal.id_branch_office}}),{})(x)}}]);
//# sourceMappingURL=69.e07e456b.chunk.js.map