(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[32],{622:function(e,t,a){"use strict";var n=a(1),r=a.n(n),l=a(70),c=a(208),o=a(30);t.a=function(e){var t=Object(l.a)(e,{activeKey:"onSelect"}),a=t.id,i=t.generateChildId,s=t.onSelect,u=t.activeKey,m=t.transition,d=t.mountOnEnter,b=t.unmountOnExit,E=t.children,f=Object(n.useMemo)((function(){return i||function(e,t){return a?a+"-"+t+"-"+e:null}}),[a,i]),g=Object(n.useMemo)((function(){return{onSelect:s,activeKey:u,transition:m,mountOnEnter:d||!1,unmountOnExit:b||!1,getControlledId:function(e){return f(e,"tabpane")},getControllerId:function(e){return f(e,"tab")}}}),[s,u,m,d,b,f]);return r.a.createElement(c.a.Provider,{value:g},r.a.createElement(o.a.Provider,{value:s||null},E))}},623:function(e,t,a){"use strict";var n=a(2),r=a(4),l=a(5),c=a.n(l),o=a(1),i=a.n(o),s=a(7),u=i.a.forwardRef((function(e,t){var a=e.bsPrefix,l=e.as,o=void 0===l?"div":l,u=e.className,m=Object(r.a)(e,["bsPrefix","as","className"]),d=Object(s.a)(a,"tab-content");return i.a.createElement(o,Object(n.a)({ref:t},m,{className:c()(u,d)}))}));t.a=u},624:function(e,t,a){"use strict";var n=a(2),r=a(4),l=a(5),c=a.n(l),o=a(1),i=a.n(o),s=a(7),u=a(208),m=a(30),d=a(166);var b=i.a.forwardRef((function(e,t){var a=function(e){var t=Object(o.useContext)(u.a);if(!t)return e;var a=t.activeKey,l=t.getControlledId,c=t.getControllerId,i=Object(r.a)(t,["activeKey","getControlledId","getControllerId"]),s=!1!==e.transition&&!1!==i.transition,b=Object(m.b)(e.eventKey);return Object(n.a)({},e,{active:null==e.active&&null!=b?Object(m.b)(a)===b:e.active,id:l(e.eventKey),"aria-labelledby":c(e.eventKey),transition:s&&(e.transition||i.transition||d.a),mountOnEnter:null!=e.mountOnEnter?e.mountOnEnter:i.mountOnEnter,unmountOnExit:null!=e.unmountOnExit?e.unmountOnExit:i.unmountOnExit})}(e),l=a.bsPrefix,b=a.className,E=a.active,f=a.onEnter,g=a.onEntering,p=a.onEntered,v=a.onExit,y=a.onExiting,_=a.onExited,O=a.mountOnEnter,h=a.unmountOnExit,j=a.transition,N=a.as,C=void 0===N?"div":N,k=(a.eventKey,Object(r.a)(a,["bsPrefix","className","active","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit","transition","as","eventKey"])),x=Object(s.a)(l,"tab-pane");if(!E&&!j&&h)return null;var S=i.a.createElement(C,Object(n.a)({},k,{ref:t,role:"tabpanel","aria-hidden":!E,className:c()(b,x,{active:E})}));return j&&(S=i.a.createElement(j,{in:E,onEnter:f,onEntering:g,onEntered:p,onExit:v,onExiting:y,onExited:_,mountOnEnter:O,unmountOnExit:h},S)),i.a.createElement(u.a.Provider,{value:null},i.a.createElement(m.a.Provider,{value:null},S))}));b.displayName="TabPane",t.a=b},641:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a(1),r=a.n(n);function l(e,t){var a=0;return r.a.Children.map(e,(function(e){return r.a.isValidElement(e)?t(e,a++):e}))}function c(e,t){var a=0;r.a.Children.forEach(e,(function(e){r.a.isValidElement(e)&&t(e,a++)}))}},649:function(e,t,a){"use strict";var n=a(2),r=a(4),l=a(1),c=a.n(l),o=(a(312),a(70)),i=a(606),s=a(213),u=a(210),m=a(622),d=a(623),b=a(624),E=a(641);function f(e){var t=e.props,a=t.title,n=t.eventKey,r=t.disabled,l=t.tabClassName,o=t.id;return null==a?null:c.a.createElement(u.a,{as:s.a,eventKey:n,disabled:r,id:o,className:l},a)}var g=function(e){var t=Object(o.a)(e,{activeKey:"onSelect"}),a=t.id,l=t.onSelect,s=t.transition,u=t.mountOnEnter,g=t.unmountOnExit,p=t.children,v=t.activeKey,y=void 0===v?function(e){var t;return Object(E.a)(e,(function(e){null==t&&(t=e.props.eventKey)})),t}(p):v,_=Object(r.a)(t,["id","onSelect","transition","mountOnEnter","unmountOnExit","children","activeKey"]);return c.a.createElement(m.a,{id:a,activeKey:y,onSelect:l,transition:s,mountOnEnter:u,unmountOnExit:g},c.a.createElement(i.a,Object(n.a)({},_,{role:"tablist",as:"nav"}),Object(E.b)(p,f)),c.a.createElement(d.a,null,Object(E.b)(p,(function(e){var t=Object(n.a)({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,c.a.createElement(b.a,t)}))))};g.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},g.displayName="Tabs",t.a=g},650:function(e,t,a){"use strict";var n=a(19),r=a(1),l=a.n(r),c=a(622),o=a(623),i=a(624),s=function(e){function t(){return e.apply(this,arguments)||this}return Object(n.a)(t,e),t.prototype.render=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")},t}(l.a.Component);s.Container=c.a,s.Content=o.a,s.Pane=i.a,t.a=s},689:function(e,t,a){"use strict";var n=a(51),r=a(20),l=a(94),c=a(16),o=a(1),i=a.n(o),s=a(616),u=a(50),m=a(604),d=a(205),b=a(305),E=a(615),f=a(32),g=a(82),p=a(620),v=a(619),y=a(9),_=a.n(y),O=a(10),h=a(8),j=a(18),N=a(83);t.a=function(e){var t=Object(o.useState)(!1),a=Object(c.a)(t,2),y=a[0],C=a[1],k=Object(o.useState)({type_operation:null,type_note:null,products:[],sectionDisplay:1,cotization:{},reason_ref:""}),x=Object(c.a)(k,2),S=x[0],G=x[1],w=Object(o.useState)(!1),z=Object(c.a)(w,2),H=z[0],D=z[1],P=Object(o.useState)([]),T=Object(c.a)(P,2),F=T[0],B=T[1],R=Object(o.useRef)(null);Object(o.useEffect)((function(){if(e.isShow){var t=Object.assign({},e.invoiceObject),a=Object(l.a)(t.products);G(Object(r.a)(Object(r.a)({},S),{},{products:a,cotization:t})),B(a)}else e.invoiceObject.products=F,G({type_operation:null,type_note:null,products:[],sectionDisplay:1,cotization:{},reason_ref:""})}),[e.isShow]);var I=function(){e.onHide()},K=function(t){if(!1!==R.current.checkValidity()){var a=Object.assign({},S,{typeSubmit:t});C(!0),_.a.post(O.b+"invoice_note_credit",a).then((function(t){h.b.success("Nota de ".concat(a.type_operation?"Cr\xe9dito":"D\xe9bito"," realizada con \xe9xito")),C(!1),e.fetchData(),t.data.forEach((function(e,t){window.open(e.pdf_public_url,"_blank")})),setTimeout((function(){e.onHide()}),1e3)})).catch((function(e){C(!1),e.response?h.b.error(e.response.data.message):(console.log(e),h.b.error("Error, contacte con soporte"))}))}else D(!0)},A=function(e){if(e.persist(),"reason_ref"===e.target.name)G(Object(r.a)(Object(r.a)({},S),{},Object(n.a)({},e.target.name,e.target.value)));else if("type_note"===e.target.name){var t,a="true"===e.target.value;G(Object(r.a)(Object(r.a)({},S),{},(t={},Object(n.a)(t,e.target.name,a),Object(n.a)(t,"sectionDisplay",2),t)))}else if("type_operation"===e.target.name){var l,c="true"===e.target.value;G(Object(r.a)(Object(r.a)({},S),{},(l={},Object(n.a)(l,e.target.name,c),Object(n.a)(l,"sectionDisplay",c?4:3),l)))}},q=function(){G(Object(r.a)(Object(r.a)({},S),{},{sectionDisplay:S.sectionDisplay-1>0?S.sectionDisplay-1:S.sectionDisplay}))},M=function(e,t){var a=Object(l.a)(S.products);a[t][e.target.name]=e.target.value,G(Object(r.a)(Object(r.a)({},S),{},{products:a}))},V=function(e){return 1==e?"Unidad":2==e?"Mayorista":"Litros, Kg, Etc..."};return i.a.createElement(s.a,{show:e.isShow,onHide:I,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},i.a.createElement(s.a.Header,{closeButton:!0,className:"header_dark"},i.a.createElement(s.a.Title,{id:"contained-modal-title-vcenter"},"Nota para la factura ",Object.keys(S.cotization).length>0&&S.cotization.ref?S.cotization.ref:""," ",i.a.createElement(f.n,null))),i.a.createElement(u.a,{onSubmit:function(){},noValidate:!0,validated:H,ref:R},y?i.a.createElement(s.a.Body,null,i.a.createElement(N.a,null)):i.a.createElement(s.a.Body,null,1==S.sectionDisplay?i.a.createElement(m.a,{className:"justify-content-center"},i.a.createElement(d.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:12,md:12,lg:12,className:"text-center"},i.a.createElement("b",null,"Tipo de Nota"))),i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:6,md:6,lg:6},i.a.createElement(u.a.Group,null,i.a.createElement(u.a.Check,{name:"type_note",type:"radio",id:"radio-5",label:"Cr\xe9dito",value:!0,checked:!0===S.type_note,required:!0,onChange:A}))),i.a.createElement(d.a,{sm:6,md:6,lg:6,className:"text-right"},i.a.createElement(u.a.Group,null,i.a.createElement(u.a.Check,{name:"type_note",type:"radio",id:"radio-6",label:"Debito",value:!1,required:!0,checked:!1===S.type_note,onChange:A})))))):2==S.sectionDisplay?i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,{className:"justify-content-center"},i.a.createElement(d.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:12,md:12,lg:12,className:"text-center"},i.a.createElement("b",null,"Tipo de Operaci\xf3n"))),i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:6,md:6,lg:6},i.a.createElement(u.a.Group,null,i.a.createElement(u.a.Check,{name:"type_operation",type:"radio",id:"radio-5",label:"Anulaci\xf3n",value:!0,checked:!0===S.type_operation,required:!0,onChange:A}))),i.a.createElement(d.a,{sm:6,md:6,lg:6,className:"text-right"},i.a.createElement(u.a.Group,null,i.a.createElement(u.a.Check,{name:"type_operation",type:"radio",id:"radio-6",label:"Parcial",value:!1,required:!0,checked:!1===S.type_operation,onChange:A})))))),i.a.createElement(m.a,{className:"justify-content-center"},i.a.createElement(d.a,{sm:4,md:4,lg:4,xl:4},i.a.createElement(b.a,{variant:"danger",block:!0,size:"sm",type:"button",onClick:q},"Ir atras")))):3===S.sectionDisplay?i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:12,md:12,lg:12},i.a.createElement("h4",{className:"title_principal text-center"},"Modificar Productos para la nota"))),i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:12,md:12,lg:12,className:"table-responsive"},i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",{style:{backgroundColor:"rgb(218,236,242)",fontWeight:"bold"}},i.a.createElement("th",{className:"text-center"},"Categoria"),i.a.createElement("th",{className:"text-center"},"Producto"),i.a.createElement("th",{className:"text-center"},"Precio"),i.a.createElement("th",{className:"text-center"},"M\xe9todo de Venta"),i.a.createElement("th",{className:"text-center"},"Inventariable"),i.a.createElement("th",{className:"text-center"},"Stock Inventario"),i.a.createElement("th",{className:"text-center"},"Cantidad"),i.a.createElement("th",{className:"text-center"}))),i.a.createElement("tbody",{className:"text-center"},S.products.map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,i.a.createElement("br",null),e.category),i.a.createElement("td",null,i.a.createElement("br",null),e.name_product),i.a.createElement("td",null,i.a.createElement(g.a,{type:"text",id:"price-"+t,name:"price",required:!0,messageErrors:["Requerido*"],cols:"col-md-12 col-lg-12 col-sm-12",value:S.products[t].price,handleChange:function(e){return M(e,t)}})),i.a.createElement("td",null,i.a.createElement("br",null),V(e.method_sale)),i.a.createElement("td",null,i.a.createElement("br",null),e.id_product?i.a.createElement(E.a,{variant:"primary",className:"font-badge"},"Si"):i.a.createElement(E.a,{variant:"secondary",className:"font-badge"},"No")),i.a.createElement("td",null,i.a.createElement("br",null),e.id_product?e.products?Array.isArray(e.products.inventary)?e.products.inventary[0].stock:e.products.inventary.stock:e.inventary?e.inventary[0].stock:"Sin Stock":"Sin Stock"),i.a.createElement("td",null,i.a.createElement(g.a,{type:"text",id:"quantity-"+t,name:"quantity",required:!0,messageErrors:["Requerido*"],cols:"col-md-12 col-lg-12 col-sm-12",value:S.products[t].quantity,handleChange:function(e){return M(e,t)}})),i.a.createElement("td",null,i.a.createElement("br",null),i.a.createElement(p.a,{placement:"bottom",overlay:i.a.createElement(v.a,{id:"tooltip-modal-credit-"+t},"Remover producto de la nota")},i.a.createElement(b.a,{variant:"danger",block:!0,size:"sm",onClick:function(){return function(e){var t=Object(l.a)(S.products);t.splice(e,1),G(Object(r.a)(Object(r.a)({},S),{},{products:t}))}(t)}},i.a.createElement(f.O,null)))))})))))),i.a.createElement(m.a,{className:"justify-content-center"},i.a.createElement(g.a,{type:"text",label:"Raz\xf3n de Referencia",name:"reason_ref",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:S.reason_ref,handleChange:A})),i.a.createElement(m.a,{className:"justify-content-center"},i.a.createElement(d.a,{sm:4,md:4,lg:4},i.a.createElement(b.a,{variant:"primary",onClick:function(){return K(1)},block:!0,size:"sm",type:"button"},"Guardar y afectar inventario")),i.a.createElement(d.a,{sm:4,md:4,lg:4},i.a.createElement(b.a,{variant:"primary",onClick:function(){return K(2)},block:!0,size:"sm",type:"button"},"Guardar")),i.a.createElement(d.a,{sm:4,md:4,lg:4,xl:4},i.a.createElement(b.a,{variant:"danger",block:!0,size:"sm",type:"button",onClick:q},"Ir atras")))):i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:12,md:12,lg:12},i.a.createElement("h4",{className:"title_principal text-center"},"Modificar Productos para la nota"))),i.a.createElement(m.a,null,i.a.createElement(d.a,{sm:12,md:12,lg:12,className:"table-responsive"},i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",{style:{backgroundColor:"rgb(218,236,242)",fontWeight:"bold"}},i.a.createElement("th",{className:"text-center"},"Categoria"),i.a.createElement("th",{className:"text-center"},"Producto"),i.a.createElement("th",{className:"text-center"},"Precio"),i.a.createElement("th",{className:"text-center"},"M\xe9todo de Venta"),i.a.createElement("th",{className:"text-center"},"Inventariable"),i.a.createElement("th",{className:"text-center"},"Stock Inventario"),i.a.createElement("th",{className:"text-center"},"Cantidad"))),i.a.createElement("tbody",{className:"text-center"},S.products.map((function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,t.category),i.a.createElement("td",null,t.name_product),i.a.createElement("td",null,Object(j.g)(e.configGeneral,t.price)),i.a.createElement("td",null,V(t.method_sale)),i.a.createElement("td",null,t.id_product?i.a.createElement(E.a,{variant:"primary",className:"font-badge"},"Si"):i.a.createElement(E.a,{variant:"secondary",className:"font-badge"},"No")),i.a.createElement("td",null,t.id_product?t.products?Array.isArray(t.products.inventary)?t.products.inventary[0].stock:t.products.inventary.stock:t.inventary?t.inventary[0].stock:"Sin Stock":"Sin Stock"),i.a.createElement("td",null,t.quantity))})))))),i.a.createElement(m.a,{className:"justify-content-center"},i.a.createElement(g.a,{type:"text",label:"Raz\xf3n de Referencia",name:"reason_ref",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:S.reason_ref,handleChange:A})),i.a.createElement(m.a,{className:"justify-content-center"},i.a.createElement(d.a,{sm:4,md:4,lg:4},i.a.createElement(b.a,{variant:"primary",onClick:function(){return K(1)},block:!0,size:"sm",type:"button"},"Guardar y afectar inventario")),i.a.createElement(d.a,{sm:4,md:4,lg:4},i.a.createElement(b.a,{variant:"primary",onClick:function(){return K(2)},block:!0,size:"sm",type:"button"},"Guardar")),i.a.createElement(d.a,{sm:4,md:4,lg:4,xl:4},i.a.createElement(b.a,{variant:"danger",block:!0,size:"sm",type:"button",onClick:q},"Ir atras"))))),i.a.createElement(s.a.Footer,null,i.a.createElement(b.a,{size:"md",variant:"secondary",onClick:I},"Cerrar"))))}},818:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(16),l=a(1),c=a.n(l),o=a(305),i=a(615),s=a(614),u=a(604),m=a(205),d=a(649),b=a(650),E=a(618),f=a(9),g=a.n(f),p=a(10),v=a(8),y=a(18),_=a(32),O=a(620),h=a(619),j=a(55),N=a(165),C=(a(311),a(29)),k=a(655),x=a(621),S=a(656),G=a(689),w=a(83),z=a(678),H=null,D=null;t.default=Object(C.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise,configGeneral:e.configs.config,configStore:e.configs.configStore}}),{})((function(e){var t=Object(l.useState)([]),a=Object(r.a)(t,2),f=a[0],C=a[1],P=Object(l.useState)([]),T=Object(r.a)(P,2),F=T[0],B=T[1],R=Object(l.useState)({}),I=Object(r.a)(R,2),K=I[0],A=I[1],q=Object(l.useState)(!1),M=Object(r.a)(q,2),V=M[0],Y=M[1],J=Object(l.useState)(!1),L=Object(r.a)(J,2),U=L[0],W=L[1],Q=Object(l.useState)({}),X=Object(r.a)(Q,2),Z=X[0],$=X[1],ee=Object(l.useState)(1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],re=Object(l.useState)({date_desde:"",date_hasta:"",type:1}),le=Object(r.a)(re,2),ce=le[0],oe=le[1],ie=Object(l.useState)(!1),se=Object(r.a)(ie,2),ue=se[0],me=se[1],de=Object(l.useState)({}),be=Object(r.a)(de,2),Ee=be[0],fe=be[1],ge=Object(l.useState)({}),pe=Object(r.a)(ge,2),ve=pe[0],ye=pe[1],_e=Object(l.useState)(!1),Oe=Object(r.a)(_e,2),he=Oe[0],je=Oe[1],Ne=Object(l.useState)(!0),Ce=Object(r.a)(Ne,2),ke=Ce[0],xe=Ce[1];Object(l.useMemo)((function(){H=[{Header:"Referencia",accessor:"folio_bill",Cell:function(e){var t=e.cell.row.original;return c.a.createElement(O.a,{placement:"bottom",overlay:c.a.createElement(h.a,{id:"tooltip-disabled2"},"Hacer click para acceder a las acciones de la factura")},c.a.createElement(o.a,{variant:"link",block:!0,type:"button",size:"sm",onClick:function(){return Se(t)}},t.folio_bill))}},{Header:"Ref Cotizaci\xf3n",accessor:"ref_cotizacion"},{Header:"Ref Gu\xeda",accessor:"ref_guide"},{Header:"Rut Cliente",accessor:"rut_client"},{Header:"Raz\xf3n Social",accessor:"business_name_client",Cell:function(e){var t=e.cell.row.original;return c.a.createElement(O.a,{placement:"right",overlay:c.a.createElement(h.a,{id:"tooltip-disabled2"},c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Vendedor: ")," ",t.name_seller),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Fono del Vendedor: ")," ",t.phone_seller?t.phone_seller:"No posee"),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Contacto")," ",t.name_contact?t.name_contact:"No posee"),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Fono del Contacto: ")," ",t.phone_contact),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Comentario: ")," ",t.comment)))},c.a.createElement(o.a,{variant:"link",size:"sm",block:!0,type:"button"},t.business_name_client))}},{Header:"Tipo",accessor:function(e){return 1==e.type_invoicing?["Afecta"]:["Excento"]}},{Header:"Fecha-Emisi\xf3n",accessor:function(e){return[N(e.date_issue_invoice).format("DD-MM-YYYY")]}},{Header:"D\xedas de Vencimiento",accessor:"days_expiration"},{Header:"Status",accessor:function(e){return 1==e.status?["Pendiente"]:2==e.status?["Pagada"]:3==e.status?["Vencida"]:["Anulada"]},Cell:function(e){var t=e.cell.row.original;return 1==t.status?c.a.createElement(i.a,{variant:"secondary",className:"font-badge"},"Pendiente"):2==t.status?c.a.createElement(i.a,{variant:"secondary",className:"font-badge"},"Pagada"):3==t.status?c.a.createElement(i.a,{variant:"secondary",className:"font-badge"},"Vencida"):c.a.createElement(i.a,{variant:"secondary",className:"font-badge"},"Anulada")}},{Header:"Total Productos",accessor:"total_product",Cell:function(t){return c.a.createElement(O.a,{placement:"left",overlay:c.a.createElement(h.a,{id:"tooltip-total_pagar"+t.cell.row.original.id},c.a.createElement("ul",{className:"list-group"},t.cell.row.original.products.map((function(t,a){return c.a.createElement("li",{className:"list-group-item",key:a},c.a.createElement("b",null,"Producto"),": ",t.name_product,c.a.createElement("br",null),c.a.createElement("b",null,"Precio")," : ",e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.price),c.a.createElement("br",null),c.a.createElement("b",null,"Cantidad"),": ",t.quantity)}))))},c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.total_product)))}},{Header:"Total gastos",accessor:"total_gastos",Cell:function(t){return c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.total_gastos))}},{Header:"Total Iva",accessor:"total_iva",Cell:function(t){return c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.total_iva))}},{Header:"Descuento Global",accessor:"discount_global_amount",Cell:function(t){return c.a.createElement(O.a,{placement:"left",overlay:c.a.createElement(h.a,{id:"tooltip-total_pagar"+t.cell.row.original.id},t.cell.row.original.discount_global,"%")},c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.discount_global_amount)))}},{Header:"Total Balance",accessor:"total_balance",Cell:function(t){return c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.total_balance))}},{Header:"Abonado",accessor:"total_bond",Cell:function(t){return c.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.total_bond))}},{Header:"Saldo Deudor",accessor:"debit_balance",Cell:function(t){return c.a.createElement(i.a,{variant:"danger",className:"font-badge"},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.debit_balance))}},{Header:"Acciones",Cell:function(e){var t=Object.assign({},e.cell.row.original);return c.a.createElement(o.a,{variant:"primary",block:!0,type:"button",size:"sm",onClick:function(){return Se(t)}},"Acciones")}}],D=[{Header:"Referencia",accessor:"folio_bill"},{Header:"Ref Factura",accessor:"ref_invoice"},{Header:"Rut Cliente",accessor:"rut_client"},{Header:"Raz\xf3n Social",accessor:"business_name_client",Cell:function(e){var t=e.cell.row.original;return c.a.createElement(O.a,{placement:"right",overlay:c.a.createElement(h.a,{id:"tooltip-disabled2"},c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Vendedor: ")," ",t.name_seller),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Fono del Vendedor: ")," ",t.phone_seller?t.phone_seller:"No posee"),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Contacto")," ",t.name_contact?t.name_contact:"No posee"),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Fono del Contacto: ")," ",t.phone_contact),c.a.createElement("li",{className:"list-group-item"},c.a.createElement("b",null,"Comentario: ")," ",t.comment)))},c.a.createElement(o.a,{variant:"link",size:"sm",block:!0,type:"button"},t.business_name_client))}},{Header:"Tipo",accessor:function(e){return 4==e.type?["Cr\xe9dito"]:["Debito"]}},{Header:"Fecha-Emisi\xf3n",accessor:function(e){return[N(e.date_issue_invoice).tz("America/Santiago").format("DD-MM-YYYY")]}},{Header:"D\xedas de Vencimiento",accessor:"days_expiration"},{Header:"Status",accessor:function(e){return["Facturada"]},Cell:function(e){if(1==e.cell.row.original.status)return c.a.createElement(i.a,{variant:"secondary",className:"font-badge"},"Generada")}},{Header:"Total Productos",accessor:"total_product",Cell:function(t){var a=t.cell.row.original;return c.a.createElement(O.a,{placement:"left",overlay:c.a.createElement(h.a,{id:"tooltip-total_pagar"+a.id},c.a.createElement("ul",{className:"list-group"},a.products.map((function(t,n){return c.a.createElement("li",{className:"list-group-item",key:n},c.a.createElement("b",null,"Producto"),": ",t.name_product,c.a.createElement("br",null),c.a.createElement("b",null,"Precio")," : ",e.configGeneral.simbolo_moneda+Object(y.g)(e.configGeneral,a.total_with_iva?t.price:t.total),c.a.createElement("br",null),c.a.createElement("b",null,"Cantidad"),": ",t.quantity)}))))},c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,a.total_product)))}},{Header:"Total Iva",accessor:"total_iva",Cell:function(t){return c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.total_iva))}},{Header:"Descuento Global",accessor:"discount_global_amount",Cell:function(t){return c.a.createElement(O.a,{placement:"left",overlay:c.a.createElement(h.a,{id:"tooltip-total_pagar"+t.cell.row.original.id},t.cell.row.original.discount_global,"%")},c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.discount_global_amount)))}},{Header:"Total Balance",accessor:"total_balance",Cell:function(t){return c.a.createElement(i.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral?e.configGeneral.simbolo_moneda:"",Object(y.g)(e.configGeneral,t.cell.row.original.total_balance))}},{Header:"Documento",Cell:function(e){var t=e.cell.row.original;return c.a.createElement(o.a,{variant:"primary",block:!0,size:"sm",onClick:function(){window.open(t.name_pdf,"_blank")}},"Visualizar")}}]}),[]),Object(l.useEffect)((function(){return j.a.toggleCollapsed(),function(){H=null,D=null,j.a.toggleCollapsed()}}),[]),Object(l.useEffect)((function(){ze(),He()}),[e.id_branch_office]),Object(l.useEffect)((function(){U&&Ge()}),[U]);var Se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!he&&e&&ye(e),je(!he)},Ge=function(){setTimeout((function(){W(!1)}),2e3)},we=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var t=Object.assign({},e);fe(t),Se(),setTimeout((function(){me(!ue)}),1e3)}else me(!ue)},ze=function(){var t=Object.assign({},ce),a=[g.a.get(p.b+"invoice/0/1"),g.a.post(p.b+"invoice_stadistics",t)];Promise.all(a).then((function(e){C(e[0].data),$(Object(n.a)(Object(n.a)({},Z),{},{statusesBonds:e[1].data.statusesBonds,statuses:e[1].data.statuses,bondsByMonth:e[1].data.bondsByMonth,invoiceByYear:e[1].data.invoiceByYear,totalByStatus:e[1].data.totalByStatus})),setTimeout((function(){W(!0)}),1e3),xe(!1)})).catch((function(t){xe(!1),e.tokenExpired(t)}))},He=function(){var t=[g.a.get(p.b+"invoice/0/4")];Promise.all(t).then((function(e){B(e[0].data)})).catch((function(t){e.tokenExpired(t)}))},De=function(){Y(!V)},Pe=function(t){v.b.info("Anulando factura, esto podr\xeda tardar unos segundos... espere por favor"),xe(!0),g.a.put(p.b+"invoice_status/"+t).then((function(e){v.b.success("Factura anulada con \xe9xito"),window.open(e.data.pdf_public_url,"_blank"),ye(Object(n.a)(Object(n.a)({},ve),{},{status:4})),ze(),He()})).catch((function(t){xe(!1),e.tokenExpired(t)}))};return c.a.createElement(s.a,{fluid:!0},c.a.createElement(u.a,null,c.a.createElement(m.a,{sm:4,md:4,lg:4,className:"text-center"},c.a.createElement("h4",{className:"title_principal"},"Tabla de Facturas"),c.a.createElement(o.a,{block:!0,variant:"success",onClick:function(){e.history.replace("/invoice/create_invoice")},size:"sm"},"Nueva Factura ",c.a.createElement(_.A,null)),c.a.createElement("br",null),c.a.createElement(o.a,{block:!0,variant:"secondary",onClick:function(){g.a.get(p.b+"get_invoice_emitet").then((function(e){v.b.success("All its done")})).catch((function(e){e.response?v.b.error(e.response.data.message):(console.log(e),v.b.error("Error, contacte con soporte"))}))},size:"sm"},"Importar Facturas ",c.a.createElement(_.A,null))),c.a.createElement(m.a,{sm:4,md:4,lg:4,className:"text-center title_principal"},c.a.createElement("h4",null,"Total Facturas Realizadas"),c.a.createElement(i.a,{variant:"danger"},f.length)),c.a.createElement(m.a,{sm:4,md:4,lg:4,className:"text-center title_principal"},c.a.createElement("h4",null,"Total Notas Cr\xe9dito"),c.a.createElement(i.a,{variant:"danger"},F.length))),c.a.createElement("hr",null),ke?c.a.createElement(w.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,{setDataForm:oe,dataForm:ce,redraw:U,statusCotization:Z,handleDisplayFilter:function(e){3==e&&oe({date_desde:"",date_hasta:""}),ne(e)},handleStadistics:function(){var t=Object.assign({},ce);ne(3),g.a.post(p.b+"invoice_stadistics",t).then((function(e){$(Object(n.a)(Object(n.a)({},Z),{},{statusesBonds:e.data.statusesBonds,statuses:e.data.statuses,bondsByMonth:e.data.bondsByMonth,invoiceByYear:e.data.invoiceByYear,totalByStatus:e.data.totalByStatus})),setTimeout((function(){W(!0),ne(1)}),1e3)})).catch((function(t){ne(1),e.tokenExpired(t)}))},displayFilter:ae,configGeneral:e.configGeneral}),c.a.createElement("br",null),c.a.createElement(d.a,{defaultActiveKey:"invoice",id:"uncontrolled-tab-example"},c.a.createElement(b.a,{eventKey:"invoice",title:"Facturas"},c.a.createElement(u.a,null,c.a.createElement(m.a,{sm:12,md:12,lg:12,xs:12},c.a.createElement(E.a,{columns:H,data:f})))),c.a.createElement(b.a,{eventKey:"product",title:"Notas"},c.a.createElement(u.a,null,c.a.createElement(m.a,{sm:12,md:12,lg:12,xs:12},c.a.createElement(E.a,{columns:D,data:F})))))),c.a.createElement(z.a,{isOpenModalDetail:V,handleModalDetail:De,cotizationDetail:K,configGeneral:e.configGeneral}),c.a.createElement(G.a,{isShow:ue,onHide:we,invoiceObject:Ee,fetchData:He,configGeneral:e.configGeneral}),c.a.createElement(k.a,{isShow:he,onHide:Se,cotization:ve,printInvoice:function(e){v.b.info("Cargando documento, espere por favor"),window.open(e.name_pdf,"_target")},goToBond:function(t){e.history.replace("/invoice/invoice_bond/"+t.id)},noteCredit:we,anulateInvoice:function(e){Object(x.confirmAlert)({customUI:function(t){var a=t.onClose;return c.a.createElement("div",{className:"custom-ui-edit"},c.a.createElement("h1",null,"\xbfEsta seguro?"),c.a.createElement("p",{className:"font-alert"},"\xbfDesea realmente anular este registro?"),c.a.createElement("button",{className:"button-alert",onClick:function(){Pe(e.id),a()}},"Si, Aceptar"),c.a.createElement("button",{className:"button-alert",onClick:a},"No"))}})},seeDetailCotization:function(e){A(e),De()},isInvoice:!0,isLoading:ke}))}))}}]);