{"version":3,"sources":["pages/UserCreatePage.jsx"],"names":["UserCreatePage","props","useState","displayLoading","setDisplayLoading","name","email","rut","password","id_rol","password_repeat","userData","setUserData","address","is_open","id","modulesUser","setModulesUser","roles","setRoles","modules","setModules","validated","setValidated","isUpdate","setIsUpdate","typeDisplayModule","setTypeDisplayModule","messageDisplay","setMessageDisplay","useEffect","promises","axios","get","API_URL","match","params","push","Promise","all","then","result","data","user","map","v","id_menu","message","catch","err","tokenExpired","fetchModules","id_enterprise","onChange","e","target","value","formatRut","handleAccess","a","persist","checked","filter","goToListUser","history","replace","renderMenuNew","type","menu","setMenu","setTimeout","onSubmit","form","currentTarget","preventDefault","checkValidity","stopPropagation","length","toast","error","Object","assign","id_sucursal","localStorage","getItem","route","put","success","post","noValidate","sm","md","lg","xs","style","borderRight","className","inputName","handleChange","inputEmail","inputRut","inputPassword","label","required","messageErrors","cols","inputSelect","i","key","name_role","size","variant","block","onClick","height","Group","Check","custom","name_item","find","f","arreglo","defaultProps","connect","state","enterpriseSucursal"],"mappings":"sXAsBMA,EAAkB,SAAAC,GAAU,IAAD,EACaC,oBAAS,GADtB,mBACxBC,EADwB,KACRC,EADQ,OAEAF,mBAAS,CACtCG,KAAM,GACNC,MAAO,GACPC,IAAK,GACLC,SAAU,GACVC,OAAQ,GACRC,gBAAiB,KARY,mBAExBC,EAFwB,KAEfC,EAFe,OAWYV,mBAAS,CAClDG,KAAM,GACNQ,QAAS,GACTC,SAAS,EACTC,GAAI,KAfyB,gCAkBMb,mBAAS,KAlBf,mBAkBxBc,EAlBwB,KAkBZC,EAlBY,OAmBNf,mBAAS,IAnBH,mBAmBxBgB,EAnBwB,KAmBlBC,EAnBkB,OAoBFjB,mBAAS,IApBP,mBAoBxBkB,EApBwB,KAoBhBC,EApBgB,OAqBGnB,oBAAS,GArBZ,mBAqBxBoB,EArBwB,KAqBbC,EArBa,OAsBOrB,oBAAS,GAtBhB,gCAuBCA,oBAAS,IAvBV,mBAuBxBsB,EAvBwB,KAuBdC,EAvBc,OAwBmBvB,mBAAS,GAxB5B,oBAwBxBwB,GAxBwB,MAwBLC,GAxBK,SAyBczB,mBAAS,IAzBvB,qCA0BcA,mBAAS,KA1BvB,qBA0BxB0B,GA1BwB,MA0BPC,GA1BO,MAqE/BC,qBAAU,YAzCW,WAEnB,IAAIC,EAAW,CACbC,IAAMC,IAAIC,IAAQ,WAClBF,IAAMC,IAAIC,IAAQ,UAGjBjC,EAAMkC,MAAMC,OAAOrB,GAAK,GACzBgB,EAASM,KACPL,IAAMC,IAAIC,IAAQ,QAAQjC,EAAMkC,MAAMC,OAAOrB,KAIjDuB,QAAQC,IAAIR,GAAUS,MAAK,SAAAC,GACzBpB,EAAWoB,EAAO,GAAGC,MACrBvB,EAASsB,EAAO,GAAGC,MAEhBzC,EAAMkC,MAAMC,OAAOrB,KACpBH,EAAY,CACVP,KAAMoC,EAAO,GAAGC,KAAKC,KAAKtC,KAC1BC,MAAOmC,EAAO,GAAGC,KAAKC,KAAKrC,MAC3BC,IAAKkC,EAAO,GAAGC,KAAKC,KAAKpC,IACzBC,SAAU,GACVC,OAAQgC,EAAO,GAAGC,KAAKC,KAAKlC,OAC5BC,gBAAiB,KAEc,GAA9B+B,EAAO,GAAGC,KAAKC,KAAKlC,QAA6C,GAA9BgC,EAAO,GAAGC,KAAKC,KAAKlC,OACxDQ,EAAewB,EAAO,GAAGC,KAAKtB,QAAQwB,KAAI,SAAAC,GAAC,OAAIA,EAAEC,aAC1CL,EAAO,GAAGC,KAAKC,KAAKlC,OAAS,GAAKgC,EAAO,GAAGC,KAAKC,KAAKlC,QAAU,IACvEkB,GAAqB,GAEpBc,EAAO,GAAGC,KAAKK,SAASlB,GAAkBY,EAAO,GAAGC,KAAKK,SAC5DtB,GAAY,IAEdrB,GAAkB,MACjB4C,OAAM,SAAAC,GACP7C,GAAkB,GAClBH,EAAMiD,aAAaD,MAKrBE,KACA,CAAClD,EAAMmD,gBAET,IAAMC,GAAW,SAAAC,GACM,WAAlBA,EAAEC,OAAOlD,MACY,GAAlBiD,EAAEC,OAAOC,OAAgC,GAAlBF,EAAEC,OAAOC,OAAiC,GAAlBF,EAAEC,OAAOC,MAC1D7B,GAAqB,GAErBA,GAAqB,GAEvBf,EAAY,2BAAKD,GAAN,kBAAiB2C,EAAEC,OAAOlD,KAAQiD,EAAEC,OAAOC,UAC7B,QAAlBF,EAAEC,OAAOlD,KAChBO,EAAY,2BAAKD,GAAN,kBAAiB2C,EAAEC,OAAOlD,KAAQoD,YAAUH,EAAEC,OAAOC,UAEhE5C,EAAY,2BAAKD,GAAN,kBAAiB2C,EAAEC,OAAOlD,KAAQiD,EAAEC,OAAOC,UAIpDE,GAAY,uCAAG,WAAOJ,EAAEvC,GAAT,SAAA4C,EAAA,yDACnBL,EAAEM,WACCN,EAAEC,OAAOM,QAFO,gCAGX5C,EAAe,GAAD,mBAAKD,GAAL,CAAiBD,KAHpB,6BAKjBE,EAAeD,EAAY8C,QAAO,SAAAjB,GAAC,OAAIA,GAAKS,EAAEC,OAAOC,UALpC,2CAAH,wDA0GZO,GAAe,WACnB9D,EAAM+D,QAAQC,QAAQ,eAGlBC,GAAa,uCAAG,WAAMC,GAAN,eAAAR,EAAA,sEACD3B,IAAMC,IAAIC,IAAQ,aADjB,OACdkC,EADc,OAEpBnE,EAAMoE,QAAQD,EAAK1B,MAChByB,EACDG,YAAW,WACTrE,EAAM+D,QAAQ3B,KAAK,gBACnB,KAEFpC,EAAM+D,QAAQ3B,KAAK,cARD,2CAAH,sDA6BnB,OACE,kBAAC,IAAD,KACGlC,EACC,kBAAC,IAAD,MAEA,kBAAC,IAAD,CAAMoE,SA9HK,SAAAjB,GAEf,IAAMkB,EAAOlB,EAAEmB,cAEf,GADAnB,EAAEoB,kBAC2B,IAAzBF,EAAKG,gBAGP,OAFArB,EAAEsB,uBACFrD,GAAa,GAGf,GAA0B,IAAvBP,EAAY6D,SAAoC,GAAnBlE,EAASF,QAAkC,GAAnBE,EAASF,QAI/D,OAHA6C,EAAEsB,kBACFrD,GAAa,QACbuD,IAAMC,MAAM,sDAId,IAAIpC,EAAOqC,OAAOC,OAAO,GAAGtE,EAAS,CACnCS,QAASJ,IAGX,GADAZ,GAAkB,GACdoB,GAWF,GAAGmB,EAAKnC,WAAamC,EAAKjC,gBAExB,OADAoE,IAAMC,MAAM,oCACL,MAbE,CACX,IAAIpC,EAAKnC,SAEP,OADAsE,IAAMC,MAAM,oCACL,EAGT,GAAGpC,EAAKnC,WAAamC,EAAKjC,gBAExB,OADAoE,IAAMC,MAAM,oCACL,EASRpC,EAAKlC,QAAU,GAAKkC,EAAKlC,QAAU,IACpCkC,EAAKuC,YAAcC,aAAaC,QAAQ,gBAG1C,IAAIC,EAAQ,GACZjF,GAAkB,GACfoB,GACD6D,EAAQ1C,EAAKlC,QAAU,GAAKkC,EAAKlC,QAAU,EAAIyB,IAAQ,yBAAyBjC,EAAMkC,MAAMC,OAAOrB,GAAKmB,IAAQ,QAAQjC,EAAMkC,MAAMC,OAAOrB,GAE3IiB,IAAMsD,IAAID,EAAM1C,GAAMH,MAAK,SAAAC,GACzBqC,IAAMS,QAAQ,sBACdrB,IAAc,GACd9D,GAAkB,MACjB4C,OAAM,SAAAC,GACP7C,GAAkB,GAClBH,EAAMiD,aAAaD,QAGrBoC,EAAQ1C,EAAKlC,QAAU,GAAKkC,EAAKlC,QAAU,EAAIyB,IAAQ,uBAAyBA,IAAQ,OACxFF,IAAMwD,KAAKH,EAAM1C,GAAMH,MAAK,SAAAC,GAC1BqC,IAAMS,QAAQ,sBACdrB,IAAc,GACd9D,GAAkB,MACjB4C,OAAM,SAAAC,GACP7C,GAAkB,GAClBH,EAAMiD,aAAaD,QAgEOwC,YAAU,EAACnE,UAAWA,GAC9C,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKoE,GAAKhE,GAAoB,EAAI,GAAK,EAAIiE,GAAIjE,GAAoB,EAAI,GAAK,EAAGkE,GAAIlE,GAAoB,EAAI,GAAK,EAAGmE,GAAI,GAAIC,MAAO,CAACC,YAAa,iCAE9I,wBAAIC,UAAU,+BAAd,0BACA,6BACA,kBAAC,IAAD,KACE,kBAAC,IAAD,iBACO/F,EAAMgG,UADb,CAEEC,aAAc7C,GACdG,MAAO7C,EAASN,QAElB,kBAAC,IAAD,iBACOJ,EAAMkG,WADb,CAEED,aAAc7C,GACdG,MAAO7C,EAASL,UAGpB,kBAAC,IAAD,KACE,kBAAC,IAAD,iBACOL,EAAMmG,SADb,CAEEF,aAAc7C,GACdG,MAAO7C,EAASJ,OAElB,kBAAC,IAAD,iBACON,EAAMoG,cADb,CAEEH,aAAc7C,GACdG,MAAO7C,EAASH,aAGpB,kBAAC,IAAD,KACE,kBAAC,IAAD,CACA2D,KAAK,WACLmC,MAAM,yBACNjG,KAAK,kBACLkG,UAAU,EACVC,cAAe,GAGfC,KAAK,6BACLjD,MAAO7C,EAASD,gBAChBwF,aAAc7C,KAEd,kBAAC,IAAD,iBACOpD,EAAMyG,YADb,CAEED,KAAM,6BACNP,aAAc7C,GACdG,MAAO7C,EAASF,SAEhB,4BAAQ+C,MAAM,IAAd,kBAtEXhC,EACqB,GAAnBb,EAASF,QAAkC,GAAnBE,EAASF,OAC3BS,EAAM0B,KAAI,SAACC,EAAE8D,GAAH,OACf,4BAAQC,IAAKD,EAAGnD,MAAOX,EAAE9B,IAAK8B,EAAEgE,cAG3B3F,EAAM4C,QAAO,SAAAjB,GAAC,OAAa,IAATA,EAAE9B,IAAqB,IAAT8B,EAAE9B,MAAU6B,KAAI,SAACC,EAAE8D,GAAH,OACrD,4BAAQC,IAAKD,EAAGnD,MAAOX,EAAE9B,IAAK8B,EAAEgE,cAI7B3F,EAAM4C,QAAO,SAAAjB,GAAC,OAAa,IAATA,EAAE9B,MAAU6B,KAAI,SAACC,EAAE8D,GAAH,OACvC,4BAAQC,IAAKD,EAAGnD,MAAOX,EAAE9B,IAAK8B,EAAEgE,gBA8D1B,kBAAC,IAAD,CAAKb,UAAU,0BACU,IAAtBtE,GACC,kBAAC,IAAD,CAAKgE,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIG,UAAU,eAC7C,kBAAC,IAAD,CAAQc,KAAK,KAAK3C,KAAK,SAAS4C,QAAQ,SAASC,OAAK,GAAtD,UAA8D,kBAAC,IAAD,OADhE,IAGE,kBAAC,IAAD,CAAQF,KAAK,KAAKG,QAASlD,GAAcI,KAAK,SAAS4C,QAAQ,OAAOC,OAAK,GAA3E,kBAGF,kBAAC,IAAD,CAAKtB,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAAIG,UAAU,eAC1C,kBAAC,IAAD,CAAQc,KAAK,KAAK3C,KAAK,SAAS4C,QAAQ,SAASC,OAAK,GAAtD,UAA8D,kBAAC,IAAD,OADhE,IAGE,kBAAC,IAAD,CAAQF,KAAK,KAAKG,QAASlD,GAAcI,KAAK,SAAS4C,QAAQ,OAAOC,OAAK,GAA3E,mBAIN,6BACCpF,GACC,uBAAGoE,UAAU,gCAAgCpE,IAC3C,IAGiB,GAArBF,GACE,kBAAC,IAAD,CAAKgE,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAAIG,UAAU,wBAAwBF,MAAO,CAACoB,OAAQ,UAClF,wBAAIlB,UAAU,+BAAd,cACA,kBAAC,IAAD,KACG5E,EAAQwB,KAAI,SAACC,EAAE8D,GAAH,OACX,kBAAC,IAAD,CAAKjB,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGe,IAAKD,GACpC,kBAAC,IAAKQ,MAAN,KACE,kBAAC,IAAKC,MAAN,CAAYjD,KAAK,WACfkD,QAAM,EACNtG,GAAI8B,EAAEyE,UAAUzE,EAAE9B,GAClBuF,MAAOzD,EAAEyE,UACT9D,MAAOX,EAAE9B,GACT8C,UAAW7C,EAAYuG,MAAK,SAAAC,GAAC,OAAIA,GAAK3E,EAAE9B,MACxCsC,SAAU,SAACC,GAAD,OAAOI,GAAaJ,EAAET,EAAE9B,aAK5C,kBAAC,IAAD,CAAKiF,UAAU,eACb,kBAAC,IAAD,CAAKN,GAAI,GAAIC,GAAI,GAAIC,GAAI,IACvB,uBAAGI,UAAU,eAAb,+DAEF,kBAAC,IAAD,CAAKN,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC5B,kBAAC,IAAD,CAAQiB,KAAK,KAAKC,QAAQ,YAAYC,OAAO,EAAMC,QAxOjD,WACpB,IAAIQ,EAAUrG,EAAQwB,KAAI,SAAAC,GAAC,OAAIA,EAAE9B,MACjCE,EAAewG,KAsOG,qBAA6F,kBAAC,IAAD,QAE/F,kBAAC,IAAD,CAAK/B,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC5B,kBAAC,IAAD,CAAQiB,KAAK,KAAKC,QAAQ,YAAYC,OAAO,EAAMC,QAtO9C,WACvBhG,EAAe,MAqOG,uBAAkG,kBAAC,IAAD,UAItG,OAQlBjB,EAAe0H,aAAe,CAC5BzB,UAAW,CACT9B,KAAM,OACNoC,UAAU,EACVlG,KAAM,OACNiG,MAAQ,kBACRE,cAAe,CACb,cAEFC,KAAK,uCAEPN,WAAY,CACVhC,KAAM,QACNoC,UAAU,EACVlG,KAAM,QACNiG,MAAQ,QACRE,cAAe,CACb,eAAe,uBAEjBC,KAAK,uCAEPL,SAAU,CACRjC,KAAM,OACNoC,UAAU,EACVlG,KAAM,MACNiG,MAAQ,sBACRE,cAAe,CACb,cAEFC,KAAK,uCAEPJ,cAAe,CACblC,KAAM,WACNoC,UAAU,EACVlG,KAAM,WACNiG,MAAQ,gBACRE,cAAe,CACb,cAEFC,KAAK,uCAEPC,YAAa,CACXvC,KAAM,SACNoC,UAAU,EACVlG,KAAM,SACNiG,MAAQ,MACRE,cAAe,CACb,gBAuBSmB,uBANf,SAAyBC,GACvB,MAAO,CACLxE,cAAewE,EAAMC,mBAAmBzE,iBAPjC,CACLiB,aAUSsD,CAA8C3H","file":"static/js/57.f02108f4.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { FaCheckCircle, FaTrashAlt, FaPlusCircle,FaUsers,FaArrowAltCircleUp } from \"react-icons/fa\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Form,\r\n  Button,\r\n  Container,\r\n  Image,\r\n} from 'react-bootstrap'\r\nimport { connect } from 'react-redux'\r\nimport { setMenu } from 'actions/menu'\r\nimport InputField from 'components/input/InputComponent'\r\nimport axios from 'axios'\r\nimport { toast } from 'react-toastify'\r\nimport { API_URL } from 'utils/constants'\r\nimport 'styles/pages/users.css'\r\nimport {formatRut} from 'utils/functions'\r\nimport LoadingComponent from 'components/LoadingComponent'\r\nlet count = 0\r\n\r\nconst UserCreatePage  = props => {\r\n  const [displayLoading, setDisplayLoading] = useState(false)\r\n  const [userData,setUserData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    rut: \"\",\r\n    password: \"\",\r\n    id_rol: \"\",\r\n    password_repeat: \"\"\r\n  })\r\n\r\n  const [enterpriseForm,setEnterpriseForm] = useState({\r\n    name: \"\",\r\n    address: \"\",\r\n    is_open: true,\r\n    id: ''\r\n  })\r\n\r\n  const [modulesUser,setModulesUser] = useState([])\r\n  const [roles,setRoles] = useState([])\r\n  const [modules,setModules] = useState([])\r\n  const [validated, setValidated] = useState(false);\r\n  const [isFormClean, setIsFormClean] = useState(false);\r\n  const [isUpdate, setIsUpdate] = useState(false);\r\n  const [typeDisplayModule, setTypeDisplayModule] = useState(1)\r\n  const [enterpriseArray, setEntepriseArray] = useState([])\r\n  const [messageDisplay , setMessageDisplay] = useState('')\r\n\r\n  const fetchModules = () => {\r\n\r\n    let promises = [\r\n      axios.get(API_URL+'modules'),\r\n      axios.get(API_URL+'roles'),\r\n    ]\r\n\r\n    if(props.match.params.id > 0){\r\n      promises.push(\r\n        axios.get(API_URL+'user/'+props.match.params.id),\r\n      )\r\n    }\r\n\r\n    Promise.all(promises).then(result => {\r\n      setModules(result[0].data)\r\n      setRoles(result[1].data)\r\n\r\n      if(props.match.params.id){\r\n        setUserData({\r\n          name: result[2].data.user.name,\r\n          email: result[2].data.user.email,\r\n          rut: result[2].data.user.rut,\r\n          password: \"\",\r\n          id_rol: result[2].data.user.id_rol,\r\n          password_repeat: \"\"\r\n        })\r\n        if(result[2].data.user.id_rol == 3 || result[2].data.user.id_rol == 4){\r\n          setModulesUser(result[2].data.modules.map(v => v.id_menu))\r\n        }else if(result[2].data.user.id_rol > 4 || result[2].data.user.id_rol <= 2){\r\n          setTypeDisplayModule(2)\r\n        }\r\n        if(result[2].data.message) setMessageDisplay(result[2].data.message)\r\n        setIsUpdate(true)\r\n      }\r\n      setDisplayLoading(false)\r\n    }).catch(err => {\r\n      setDisplayLoading(false)\r\n      props.tokenExpired(err)\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchModules()\r\n  },[props.id_enterprise])\r\n\r\n  const onChange = e => {\r\n    if(e.target.name === \"id_rol\"){\r\n      if( e.target.value == 3 || e.target.value == 4  || e.target.value == 1){\r\n        setTypeDisplayModule(1)\r\n      }else{\r\n        setTypeDisplayModule(3)\r\n      }\r\n      setUserData({ ...userData, [e.target.name] : e.target.value })\r\n    }else if(e.target.name === \"rut\"){\r\n      setUserData({ ...userData, [e.target.name] : formatRut(e.target.value) })\r\n    }else{\r\n      setUserData({ ...userData, [e.target.name] : e.target.value })\r\n    }\r\n  }\r\n\r\n  const handleAccess = async (e,id) => {\r\n    e.persist()\r\n    if(e.target.checked){\r\n      await setModulesUser([...modulesUser,id])\r\n    }else{\r\n      setModulesUser(modulesUser.filter(v => v != e.target.value))\r\n    }\r\n  }\r\n\r\n  const addAllModules = () => {\r\n    let arreglo = modules.map(v => v.id)\r\n    setModulesUser(arreglo)\r\n  }\r\n\r\n  const removeAllModules = () => {\r\n    setModulesUser([])\r\n  }\r\n\r\n  const onSubmit = e => {\r\n\r\n    const form = e.currentTarget;\r\n    e.preventDefault();\r\n    if (form.checkValidity() === false) {\r\n      e.stopPropagation();\r\n      setValidated(true);\r\n      return\r\n    }\r\n    if(modulesUser.length === 0 && (userData.id_rol == 3 || userData.id_rol == 4)){\r\n      e.stopPropagation();\r\n      setValidated(true);\r\n      toast.error('Debe escoger al menos un módulo para el usuario')\r\n      return\r\n    }\r\n\r\n    let user = Object.assign({},userData,{\r\n      modules: modulesUser,\r\n    })\r\n    setDisplayLoading(true)\r\n    if(!isUpdate){\r\n      if(!user.password){\r\n        toast.error('Debe escribir una contraseña')\r\n        return false\r\n      }\r\n\r\n      if(user.password !== user.password_repeat){\r\n        toast.error('Las contraseñas no coinciden')\r\n        return false\r\n      }\r\n    }else{\r\n      if(user.password !== user.password_repeat){\r\n        toast.error('Las contraseñas no coinciden')\r\n        return false\r\n      }\r\n    }\r\n\r\n    if(user.id_rol >= 4 && user.id_rol <= 7){\r\n      user.id_sucursal = localStorage.getItem('id_sucursal')\r\n    }\r\n\r\n    let route = ''\r\n    setDisplayLoading(true)\r\n    if(isUpdate){\r\n      route = user.id_rol >= 3 && user.id_rol <= 7 ? API_URL+'user_by_branch_office/'+props.match.params.id : API_URL+'user/'+props.match.params.id\r\n\r\n      axios.put(route,user).then(result => {\r\n        toast.success('Usuario Modificado')\r\n        renderMenuNew(true)\r\n        setDisplayLoading(false)\r\n      }).catch(err => {\r\n        setDisplayLoading(false)\r\n        props.tokenExpired(err)\r\n      })\r\n    }else{\r\n      route = user.id_rol >= 3 && user.id_rol <= 7 ? API_URL+'user_by_brach_office' : API_URL+'user'\r\n      axios.post(route,user).then(result => {\r\n        toast.success('Usuario Registrado')\r\n        renderMenuNew(false)\r\n        setDisplayLoading(false)\r\n      }).catch(err => {\r\n        setDisplayLoading(false)\r\n        props.tokenExpired(err)\r\n      })\r\n    }\r\n  }\r\n\r\n  const cleanForm = () => {\r\n    setUserData({\r\n      name: \"\",\r\n      email: \"\",\r\n      rut: \"\",\r\n      password: \"\",\r\n      id_rol: 1\r\n    })\r\n    setModulesUser([])\r\n    setValidated(false)\r\n  }\r\n\r\n  const cleanEnterprise = () => {\r\n    setEnterpriseForm({\r\n      name: \"\",\r\n      address: \"\",\r\n      is_open: true,\r\n      id: ''\r\n    })\r\n  }\r\n\r\n  const goToListUser = () => {\r\n    props.history.replace('/user/list')\r\n  }\r\n\r\n  const renderMenuNew = async type => {\r\n    const menu = await axios.get(API_URL+'menu_user')\r\n    props.setMenu(menu.data)\r\n    if(type){\r\n      setTimeout(() => {\r\n        props.history.push('/user/list')\r\n      },1000)\r\n    }else{\r\n      props.history.push('/user/list')\r\n    }\r\n  }\r\n\r\n  const displayRolesOption = () => {\r\n    if(isUpdate){\r\n      if(userData.id_rol == 2 || userData.id_rol == 9){\r\n        return roles.map((v,i) => (\r\n          <option key={i} value={v.id}>{v.name_role}</option>\r\n        ))\r\n      }else{\r\n        return roles.filter(v => v.id !== 2 && v.id !== 9).map((v,i) => (\r\n          <option key={i} value={v.id}>{v.name_role}</option>\r\n        ))\r\n      }\r\n    }else{\r\n      return roles.filter(v => v.id !== 2).map((v,i) => (\r\n        <option key={i} value={v.id}>{v.name_role}</option>\r\n      ))\r\n    }\r\n  }\r\n  return(\r\n    <Container>\r\n      {displayLoading ? (\r\n        <LoadingComponent />\r\n      ) : (\r\n        <Form onSubmit={onSubmit} noValidate validated={validated}>\r\n          <Row>\r\n            <Col sm={ typeDisplayModule > 1 ? 12 : 5 } md={typeDisplayModule > 1 ? 12 : 5} lg={typeDisplayModule > 1 ? 12 : 5} xs={12} style={{borderRight: '1px solid rgb(237, 237, 237)'}}>\r\n\r\n              <h4 className=\"text-center title_principal\">Formulario de usuarios</h4>\r\n              <br/>\r\n              <Row>\r\n                <InputField\r\n                  { ...props.inputName}\r\n                  handleChange={onChange}\r\n                  value={userData.name}\r\n                  />\r\n                <InputField\r\n                  { ...props.inputEmail}\r\n                  handleChange={onChange}\r\n                  value={userData.email}\r\n                  />\r\n              </Row>\r\n              <Row>\r\n                <InputField\r\n                  { ...props.inputRut}\r\n                  handleChange={onChange}\r\n                  value={userData.rut}\r\n                  />\r\n                <InputField\r\n                  { ...props.inputPassword}\r\n                  handleChange={onChange}\r\n                  value={userData.password}\r\n                  />\r\n              </Row>\r\n              <Row>\r\n                <InputField\r\n                type='password'\r\n                label='Confirme Contraseña'\r\n                name='password_repeat'\r\n                required={false}\r\n                messageErrors={[\r\n\r\n                ]}\r\n                cols='col-md-6 col-lg-6 col-sm-6'\r\n                value={userData.password_repeat}\r\n                handleChange={onChange}\r\n                />\r\n                <InputField\r\n                  { ...props.inputSelect}\r\n                  cols={'col-md-6 col-sm-6 col-lg-6'}\r\n                  handleChange={onChange}\r\n                  value={userData.id_rol}\r\n                >\r\n                  <option value=''>--Seleccione--</option>\r\n                  {displayRolesOption()}\r\n                </InputField>\r\n              </Row>\r\n              <Row className=\"justify-content-center\">\r\n                {typeDisplayModule === 1 ? (\r\n                  <Col sm={12} md={12} lg={12} xs={12} className=\"text-center\">\r\n                    <Button size=\"sm\" type=\"submit\" variant=\"danger\" block>Enviar <FaPlusCircle /></Button>\r\n                    o\r\n                    <Button size=\"sm\" onClick={goToListUser} type=\"button\" variant=\"info\" block>Ir al Listado</Button>\r\n                  </Col>\r\n                ) : (\r\n                  <Col sm={6} md={6} lg={6} xs={12} className=\"text-center\">\r\n                    <Button size=\"sm\" type=\"submit\" variant=\"danger\" block>Enviar <FaPlusCircle /></Button>\r\n                    o\r\n                    <Button size=\"sm\" onClick={goToListUser} type=\"button\" variant=\"info\" block>Ir al Listado</Button>\r\n                  </Col>\r\n                )}\r\n              </Row>\r\n              <br/>\r\n              {messageDisplay ? (\r\n                <p className=\"alert alert-info text-center\">{messageDisplay}</p>\r\n              ) : ''}\r\n            </Col>\r\n            {\r\n              typeDisplayModule == 1 ? (\r\n                <Col sm={7} md={7} lg={7} xs={12} className=\"containerDivSeparated\" style={{height: '450px'}}>\r\n                  <h4 className=\"text-center title_principal\">Módulos</h4>\r\n                  <Row>\r\n                    {modules.map((v,i) => (\r\n                      <Col sm={4} md={4} lg={4} xs={6} key={i}>\r\n                        <Form.Group>\r\n                          <Form.Check type=\"checkbox\"\r\n                            custom\r\n                            id={v.name_item+v.id}\r\n                            label={v.name_item}\r\n                            value={v.id}\r\n                            checked={!!modulesUser.find(f => f == v.id)}\r\n                            onChange={(e) => handleAccess(e,v.id) } />\r\n                        </Form.Group>\r\n                      </Col>\r\n                    ))}\r\n                  </Row>\r\n                  <Row className=\"fixedBottom\">\r\n                    <Col sm={12} md={12} lg={12}>\r\n                      <p className=\"text-center\">Hacer click en el botón enviar para guardar los cambios</p>\r\n                    </Col>\r\n                    <Col sm={6} md={6} lg={6} xs={12}>\r\n                      <Button size=\"sm\" variant=\"secondary\" block={true} onClick={addAllModules}>Seleccionar Todos <FaCheckCircle /></Button>\r\n                    </Col>\r\n                    <Col sm={6} md={6} lg={6} xs={12}>\r\n                      <Button size=\"sm\" variant=\"secondary\" block={true} onClick={removeAllModules}>Deseleccionar Todos <FaTrashAlt /></Button>\r\n                    </Col>\r\n                  </Row>\r\n                </Col>\r\n              ) : '' }\r\n          </Row>\r\n        </Form>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nUserCreatePage.defaultProps = {\r\n  inputName: {\r\n    type: 'text',\r\n    required: true,\r\n    name: 'name',\r\n    label : 'Nombre Completo',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-6 col-md-6 col-lg-6 col-xs-6\"\r\n  },\r\n  inputEmail: {\r\n    type: 'email',\r\n    required: true,\r\n    name: 'email',\r\n    label : 'Email',\r\n    messageErrors: [\r\n      'Requerido*, ','Formato tipo Email*'\r\n    ],\r\n    cols:\"col-sm-6 col-md-6 col-lg-6 col-xs-6\"\r\n  },\r\n  inputRut: {\r\n    type: 'text',\r\n    required: true,\r\n    name: 'rut',\r\n    label : 'Documento Identidad',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-6 col-md-6 col-lg-6 col-xs-6\"\r\n  },\r\n  inputPassword: {\r\n    type: 'password',\r\n    required: false,\r\n    name: 'password',\r\n    label : 'Contraseña',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n    cols:\"col-sm-6 col-md-6 col-lg-6 col-xs-6\"\r\n  },\r\n  inputSelect: {\r\n    type: 'select',\r\n    required: true,\r\n    name: 'id_rol',\r\n    label : 'Rol',\r\n    messageErrors: [\r\n      'Requerido*'\r\n    ],\r\n  },\r\n}\r\n\r\nUserCreatePage.propTypes = {\r\n  setMenu: PropTypes.func.isRequired,\r\n  id_enterprise: PropTypes.string.isRequired,\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(){\r\n    return {\r\n      setMenu,\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n  return {\r\n    id_enterprise: state.enterpriseSucursal.id_enterprise\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps())(UserCreatePage)\r\n"],"sourceRoot":""}