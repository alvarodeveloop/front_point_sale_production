(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[63],{611:function(e,a,t){"use strict";var n=t(47),r=t(119),l=t(1),o=t.n(l),c=t(120),i=t(621),s=t(622),u=t(301);function m(){var e=Object(r.a)(["\n  padding: 1rem;\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .table_responsive_eddit{\n    overflow-x: auto;\n  }\n"]);return m=function(){return e},e}var d=c.a.div(m());function p(e){var a=e.column,t=a.filterValue,n=a.preFilteredRows,r=a.setFilter,l=n.length;return o.a.createElement("input",{value:t||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(l," registros..."),className:"inputPageFilter"})}function g(e,a,t){return Object(s.a)(e,t,{keys:[function(e){return e.values[a]}]})}function f(e){var a=e.columns,t=e.data,r=e.menuTop,l=e.headerColor,c=e.headerFontColor,s=e.pageSizeHandler,m=o.a.useMemo((function(){return{fuzzyText:g,text:function(e,a,t){return e.filter((function(e){var n=e.values[a];return void 0===n||String(n).toLowerCase().startsWith(String(t).toLowerCase())}))}}}),[]),d=o.a.useMemo((function(){return{Filter:p}}),[]),f=Object(i.useTable)({columns:a,data:t,defaultColumn:d,filterTypes:m,initialState:{pageIndex:0,pageSize:s[0]}},i.useFilters,i.useSortBy,i.usePagination),b=f.getTableProps,h=f.getTableBodyProps,E=f.headerGroups,v=f.page,y=f.prepareRow,x=f.canPreviousPage,C=f.canNextPage,N=f.pageOptions,O=f.pageCount,j=f.gotoPage,P=f.nextPage,k=f.previousPage,_=f.setPageSize,S=f.state,z=S.pageIndex,F=S.pageSize;return o.a.createElement("div",{className:"table_responsive_eddit"},r?o.a.createElement("div",{className:"pagination"},o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(0)},disabled:!x},"<<")," ",o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return k()},disabled:!x},"<")," ",o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!C},">")," ",o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(O-1)},disabled:!C},">>")," ",o.a.createElement("span",null,"P\xe1gina"," ",o.a.createElement("strong",null,z+1," de ",N.length)," "),o.a.createElement("span",{className:"ml-3"},"| ",o.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),o.a.createElement("input",Object(n.a)({type:"number",defaultValue:z+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;j(a)},className:"inputPage"},"onChange",(function(e){e.target.value>N.length&&(e.target.value=1)}))))," ",o.a.createElement("select",{value:F,onChange:function(e){_(Number(e.target.value))},className:"inputPage"},s.map((function(e){return o.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",o.a.createElement("table",Object.assign({},b(),{className:"table table-bordered"}),o.a.createElement("thead",null,E.map((function(e){return o.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center"}),e.headers.map((function(e){return o.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{style:{backgroundColor:l||"rgb(218, 236, 242)",color:c||"black"}}),e.render("Header"),o.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),o.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),o.a.createElement("tbody",Object.assign({},h(),{className:"text-center"}),v.map((function(e,a){return y(e)||o.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return o.a.createElement("td",Object.assign({style:{position:"relative"}},e.getCellProps()),e.render("Cell"))})))})))),o.a.createElement("div",{className:"pagination"},o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(0)},disabled:!x},"<<")," ",o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return k()},disabled:!x},"<")," ",o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!C},">")," ",o.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(O-1)},disabled:!C},">>")," ",o.a.createElement("span",null,"P\xe1gina"," ",o.a.createElement("strong",null,z+1," de ",N.length)," "),o.a.createElement("span",{className:"ml-3"},"| ",o.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),o.a.createElement("input",Object(n.a)({type:"number",defaultValue:z+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;j(a)},className:"inputPage"},"onChange",(function(e){e.target.value>N.length&&(e.target.value=1)}))))," ",o.a.createElement("select",{value:F,onChange:function(e){_(Number(e.target.value))},className:"inputPage"},s.map((function(e){return o.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}g.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,t=e.columns,n=e.menuTop,r=e.headerColor,l=e.headerFontColor,c=e.pageSizeHandler;return c=c||[10,20,30,40,50],o.a.createElement(d,null,o.a.createElement(f,{pageSizeHandler:c,data:a,columns:t,menuTop:n,headerFontColor:l,headerColor:r}))}},657:function(e,a,t){"use strict";var n=t(1),r=t.n(n),l=t(46),o=(t(310),r.a.forwardRef((function(e,a){var t=e.cols?e.cols:"col-md-6 col-sm-6";return"select"!==e.type&&"textarea"!==e.type?r.a.createElement(l.a.Group,{className:t},r.a.createElement(l.a.Label,{className:"fontBold"},e.label),r.a.createElement(l.a.Control,{ref:a,id:e.id?e.id:e.name,type:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,readOnly:!!e.readonly&&e.readonly,step:e.step?e.step:"",onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){},className:e.className?e.className+" form-control-sm mainBorder":"form-control-sm mainBorder",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"}),r.a.createElement(l.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return r.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):"select"===e.type?r.a.createElement(l.a.Group,{className:t},r.a.createElement(l.a.Label,{className:"fontBold"},e.label),r.a.createElement(l.a.Control,{id:e.id?e.id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",readOnly:!!e.readonly&&e.readonly,required:e.required,multiple:!!e.multiple&&e.multiple,ref:a||null,className:e.className?e.className+" form-control-sm mainBorder":"form-control-sm mainBorder",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"},e.children),r.a.createElement(l.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return r.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):"textarea"===e.type?r.a.createElement(l.a.Group,{className:t},r.a.createElement(l.a.Label,{className:"fontBold"},e.label),r.a.createElement(l.a.Control,{id:e.id?e.id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,rows:e.rows?e.rows:2,readOnly:!!e.readonly&&e.readonly,onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){},ref:a||null,className:e.className?e.className+" form-control-sm mainBorder":"form-control-sm mainBorder",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"}),r.a.createElement(l.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return r.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):void 0})));a.a=o},800:function(e,a,t){"use strict";t.r(a),t.d(a,"ProductListDetailPage",(function(){return k}));var n=t(89),r=t(47),l=t(18),o=t(15),c=t(1),i=t.n(c),s=t(28),u=t(609),m=t(301),d=t(608),p=t(598),g=t(197),f=t(46),b=t(9),h=t.n(b),E=t(10),v=t(657),y=t(8),x=t(77),C=t(611),N=t(31),O=t(17),j=localStorage.getItem("id_branch_office"),P=[],k=function(e){var a=Object(c.useState)(null),t=Object(o.a)(a,2),s=t[0],b=t[1],k=Object(c.useState)(!0),_=Object(o.a)(k,2),S=_[0],z=_[1],F=Object(c.useState)([]),w=Object(o.a)(F,2),B=w[0],T=w[1],G=Object(c.useState)([]),q=Object(o.a)(G,2),H=(q[0],q[1],Object(c.useState)([])),R=Object(o.a)(H,2),I=R[0],L=R[1],D=Object(c.useState)({tax:19}),K=Object(o.a)(D,2),U=K[0],V=K[1],M=Object(c.useState)({id_product:"",price:""}),$=Object(o.a)(M,2),A=$[0],J=$[1],W=Object(c.useState)(!1),Q=Object(o.a)(W,2),X=Q[0],Y=Q[1],Z=Object(c.useRef)(null),ee=Object(c.useRef)(null);Object(c.useEffect)((function(){j!=e.id_branch_office?(y.b.error("Esta lista no pertenece a esta sucursal"),setTimeout((function(){e.history.replace("/product/listProduct")}),1500)):ae(!0)}),[e.id_branch_office]),P=Object(c.useMemo)((function(){return[{Header:"Producto",accessor:function(e){return[e.products.name_product]}},{Header:"Precio",accessor:function(e){return[e.price]},Cell:function(a){return i.a.createElement("span",null,Object(O.g)(e.configGeneral,a.cell.row.original.price),e.configGeneral?e.configGeneral.simbolo_moneda:"")}},{Header:"Precio con iva",accessor:function(e){return[parseFloat(e.price)*parseFloat(U.tax)/100+parseFloat(e.price)]},Cell:function(a){var t=a.cell.row.original;return i.a.createElement(u.a,{variant:"danger",className:"font-badge"},Object(O.g)(e.configGeneral,parseFloat(t.price)*parseFloat(U.tax)/100+parseFloat(t.price),2,",",".")," ",e.configGeneral?e.configGeneral.simbolo_moneda:"")}},{Header:"Acciones",Cell:function(e){var a=e.cell.row.original;return i.a.createElement(m.a,{variant:"danger",size:"sm",onClick:function(){return ne(a)}},i.a.createElement(N.O,null))}}]}),[]);var ae=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[h.a.get(E.b+"listProduct/"+e.match.params.id)];a&&(t.push(h.a.get(E.b+"product")),t.push(h.a.get(E.b+"config_store"))),Promise.all(t).then((function(e){b(e[0].data),T(e[0].data.details),a&&(L(e[1].data),V(e[2].data)),z(!1)})).catch((function(a){e.tokenExpired(a),z(!1)}))},te=function(e){if(e.persist(),J(Object(l.a)(Object(l.a)({},A),{},Object(r.a)({},e.target.name,e.target.value))),"id_product"===e.target.name){var a,t=I.find((function(a){return a.id==e.target.value}));J(Object(l.a)(Object(l.a)({},A),{},(a={},Object(r.a)(a,e.target.name,e.target.value),Object(r.a)(a,"price",t.price),a))),ee.current.focus()}else J(Object(l.a)(Object(l.a)({},A),{},Object(r.a)({},e.target.name,e.target.value)))},ne=function(e){T((function(a){return a.filter((function(a){return parseInt(a.id_product)!==parseInt(e.id_product)}))}))},re=function(){e.history.replace("/product/listProduct")},le=function(){J({id_product:"",price:""}),Y(!1),Z.current.focus()};return i.a.createElement(d.a,{fluid:!0},S?i.a.createElement(x.a,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement(g.a,null,i.a.createElement("h4",{className:"title_principal"},"Detalle de la lista ",i.a.createElement("span",{style:{textDecoration:"underline",textTransform:"uppercase"}},s?s.name:""))),i.a.createElement(g.a,null,i.a.createElement("h4",{className:"title_principal text-right"},"Total de productos ",i.a.createElement(u.a,{variant:"danger",className:"font-badge"},B.length)))),i.a.createElement("hr",null),i.a.createElement(p.a,null,i.a.createElement(g.a,null,i.a.createElement(f.a,{onSubmit:function(e){var a=e.currentTarget;if(e.preventDefault(),!1===a.checkValidity())return e.stopPropagation(),void Y(!0);for(var t,r=document.getElementById("id_product"),l=0;l<r.options.length;l++)r.options[l].value===r.value&&(t=r.options[l]);var o=I[t.attributes.dataindex.value];if(B.find((function(e){return e.id_product===o.id})))y.b.error("Producto repetido, por favor agregue otro....");else{var c={id_product_list:s.id,id_product:A.id_product,price:A.price,products:o};T((function(e){return[].concat(Object(n.a)(e),[c])})),le()}},noValidate:!0,validated:X},i.a.createElement(p.a,{className:"justify-content-center"},i.a.createElement(v.a,{ref:Z,type:"select",name:"id_product",label:"Producto",value:A.id_product,handleChange:te,required:!0,cols:"col-md-4 col-sm-4 col-lg-4 col-xl-4",messageErrors:["Requerido"]},i.a.createElement("option",{value:""},"--Seleccione--"),I.map((function(e,a){return i.a.createElement("option",{key:a,value:e.id,dataindex:a},e.name_product)}))),i.a.createElement(v.a,{ref:ee,type:"number",name:"price",label:"Precio",value:A.price,required:!0,handleChange:te,cols:"col-md-4 col-sm-4 col-lg-4 col-xl-4",messageErrors:["Requerido"]})),i.a.createElement(p.a,null,i.a.createElement(g.a,{className:"text-center text-danger"},"*El bot\xf3n de agregar es para agregar el item a la tabla y el confirmar para almacenar en la base de datos.")),i.a.createElement("br",null),i.a.createElement(p.a,{className:"justify-content-center"},i.a.createElement(g.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,{variant:"secondary",type:"button",block:!0,size:"sm",onClick:re},"Volver")),i.a.createElement(g.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,{variant:"danger",type:"submit",block:!0,size:"sm"},"Agregar")),i.a.createElement(g.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,{variant:"secondary",type:"button",block:!0,size:"sm",onClick:function(){z(!0);var a={detailProducts:Object(n.a)(B)};h.a.put(E.b+"listProductDetail/"+e.match.params.id,a).then((function(e){y.b.success("Lista modificada con \xe9xito"),setTimeout((function(){re()}),1500)})).catch((function(a){z(!1),e.tokenExpired(a)}))}},"Confirmar")))))),i.a.createElement("br",null),i.a.createElement(p.a,null,i.a.createElement(g.a,null,i.a.createElement(C.a,{data:B,columns:P})))))};a.default=Object(s.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise,configGeneral:e.configs.config}}),{})(k)}}]);