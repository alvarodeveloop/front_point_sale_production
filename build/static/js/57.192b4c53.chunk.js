(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[57],{619:function(e,t,a){"use strict";var o=a(2),r=a(4),n=a(5),c=a.n(n),l=a(1),i=a.n(l),s=(a(312),a(7)),u=i.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.placement,l=e.className,u=e.style,p=e.children,d=e.arrowProps,m=(e.popper,e.show,Object(r.a)(e,["bsPrefix","placement","className","style","children","arrowProps","popper","show"]));a=Object(s.a)(a,"tooltip");var f=((null==n?void 0:n.split("-"))||[])[0];return i.a.createElement("div",Object(o.a)({ref:t,style:u,role:"tooltip","x-placement":f,className:c()(l,a,"bs-tooltip-"+f)},m),i.a.createElement("div",Object(o.a)({className:"arrow"},d)),i.a.createElement("div",{className:a+"-inner"},p))}));u.defaultProps={placement:"right"},u.displayName="Tooltip",t.a=u},620:function(e,t,a){"use strict";var o=a(2),r=a(4),n=a(19),c=a(105),l=a(1),i=a.n(l),s=a(628),u=a(209),p=(a(95),a(70)),d=a(5),m=a.n(d),f=a(3),b=a.n(f),g=a(35),h=a.n(g),O=a(96),v=a(63),E=a(217),j=a(218),y=a(219),_=a(216),x=a(214),w=i.a.forwardRef((function(e,t){var a=e.flip,n=e.offset,c=e.placement,s=e.containerPadding,u=void 0===s?5:s,p=e.popperConfig,d=void 0===p?{}:p,m=e.transition,f=Object(O.a)(),b=f[0],g=f[1],E=Object(O.a)(),w=E[0],C=E[1],k=Object(v.a)(g,t),S=Object(_.a)(e.container),q=Object(_.a)(e.target),T=Object(l.useState)(!e.show),P=T[0],N=T[1],R=Object(j.a)(q,b,Object(x.a)({placement:c,enableEvents:!!e.show,containerPadding:u||5,flip:a,offset:n,arrowElement:w,popperConfig:d})),D=R.styles,A=R.attributes,H=Object(r.a)(R,["styles","attributes"]);e.show?P&&N(!1):e.transition||P||N(!0);var M=e.show||m&&!P;if(Object(y.a)(b,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!M)return null;var F=e.children(Object(o.a)({},H,{show:!!e.show,props:Object(o.a)({},A.popper,{style:D.popper,ref:k}),arrowProps:Object(o.a)({},A.arrow,{style:D.arrow,ref:C})}));if(m){var J=e.onExit,I=e.onExiting,z=e.onEnter,B=e.onEntering,U=e.onEntered;F=i.a.createElement(m,{in:e.show,appear:!0,onExit:J,onExiting:I,onExited:function(){N(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:z,onEntering:B,onEntered:U},F)}return S?h.a.createPortal(F,S):null}));w.displayName="Overlay",w.propTypes={show:b.a.bool,placement:b.a.oneOf(E.b),target:b.a.any,container:b.a.any,flip:b.a.bool,children:b.a.func.isRequired,containerPadding:b.a.number,popperConfig:b.a.object,rootClose:b.a.bool,rootCloseEvent:b.a.oneOf(["click","mousedown"]),rootCloseDisabled:b.a.bool,onHide:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];var r;return e.rootClose?(r=b.a.func).isRequired.apply(r,[e].concat(a)):b.a.func.apply(b.a,[e].concat(a))},transition:b.a.elementType,onEnter:b.a.func,onEntering:b.a.func,onEntered:b.a.func,onExit:b.a.func,onExiting:b.a.func,onExited:b.a.func};var C=w,k=a(215),S=a(166),q={transition:S.a,rootClose:!1,show:!1,placement:"top"};function T(e){var t=e.children,a=e.transition,n=e.popperConfig,c=void 0===n?{}:n,s=Object(r.a)(e,["children","transition","popperConfig"]),p=Object(l.useRef)({}),d=Object(k.a)(),f=d[0],b=d[1],g=!0===a?S.a:a||null;return i.a.createElement(C,Object(o.a)({},s,{ref:f,popperConfig:Object(o.a)({},c,{modifiers:b.concat(c.modifiers||[])}),transition:g}),(function(e){var n,c=e.props,l=e.arrowProps,s=e.show,d=e.update,f=(e.forceUpdate,e.placement),b=e.state,g=Object(r.a)(e,["props","arrowProps","show","update","forceUpdate","placement","state"]);!function(e,t){var a=e.ref,o=t.ref;e.ref=a.__wrapped||(a.__wrapped=function(e){return a(Object(u.a)(e))}),t.ref=o.__wrapped||(o.__wrapped=function(e){return o(Object(u.a)(e))})}(c,l);var h=Object.assign(p.current,{state:b,scheduleUpdate:d,placement:f,outOfBoundaries:(null==b||null==(n=b.modifiersData.hide)?void 0:n.isReferenceHidden)||!1});return"function"===typeof t?t(Object(o.a)({},g,{},c,{placement:f,show:s,popper:h,arrowProps:l})):i.a.cloneElement(t,Object(o.a)({},g,{},c,{placement:f,arrowProps:l,popper:h,className:m()(t.props.className,!a&&s&&"show"),style:Object(o.a)({},t.props.style,{},c.style)}))}))}T.defaultProps=q;var P=T,N=function(e){function t(){return e.apply(this,arguments)||this}return Object(n.a)(t,e),t.prototype.render=function(){return this.props.children},t}(i.a.Component);function R(e,t,a){var o=t[0],r=o.currentTarget,n=o.relatedTarget||o.nativeEvent[a];n&&n===r||Object(c.a)(r,n)||e.apply(void 0,t)}function D(e){var t=e.trigger,a=e.overlay,n=e.children,c=e.popperConfig,d=void 0===c?{}:c,m=e.show,f=e.defaultShow,b=void 0!==f&&f,g=e.onToggle,h=e.delay,O=e.placement,v=e.flip,E=void 0===v?O&&-1!==O.indexOf("auto"):v,j=Object(r.a)(e,["trigger","overlay","children","popperConfig","show","defaultShow","onToggle","delay","placement","flip"]),y=Object(l.useRef)(null),_=Object(s.a)(),x=Object(l.useRef)(""),w=Object(p.b)(m,b,g),C=w[0],k=w[1],S=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(h),q="function"!==typeof n?i.a.Children.only(n).props:{},T=q.onFocus,D=q.onBlur,A=q.onClick,H=Object(l.useCallback)((function(){return Object(u.a)(y.current)}),[]),M=Object(l.useCallback)((function(){_.clear(),x.current="show",S.show?_.set((function(){"show"===x.current&&k(!0)}),S.show):k(!0)}),[S.show,k,_]),F=Object(l.useCallback)((function(){_.clear(),x.current="hide",S.hide?_.set((function(){"hide"===x.current&&k(!1)}),S.hide):k(!1)}),[S.hide,k,_]),J=Object(l.useCallback)((function(){M();for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];null==T||T.apply(void 0,t)}),[M,T]),I=Object(l.useCallback)((function(){F();for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];null==D||D.apply(void 0,t)}),[F,D]),z=Object(l.useCallback)((function(){k(!C),A&&A.apply(void 0,arguments)}),[A,k,C]),B=Object(l.useCallback)((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];R(M,t,"fromElement")}),[M]),U=Object(l.useCallback)((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];R(F,t,"toElement")}),[F]),V=null==t?[]:[].concat(t),W={};return-1!==V.indexOf("click")&&(W.onClick=z),-1!==V.indexOf("focus")&&(W.onFocus=J,W.onBlur=I),-1!==V.indexOf("hover")&&(W.onMouseOver=B,W.onMouseOut=U),i.a.createElement(i.a.Fragment,null,"function"===typeof n?n(Object(o.a)({},W,{ref:y})):i.a.createElement(N,{ref:y},Object(l.cloneElement)(n,W)),i.a.createElement(P,Object(o.a)({},j,{show:C,onHide:F,flip:E,placement:O,popperConfig:d,target:H}),a))}D.defaultProps={defaultShow:!1,trigger:["hover","focus"]};t.a=D},628:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var o=a(1),r=a(128),n=a(129),c=Math.pow(2,31)-1;function l(){var e=Object(r.a)(),t=Object(o.useRef)();return Object(n.a)((function(){return clearTimeout(t.current)})),Object(o.useMemo)((function(){var a=function(){return clearTimeout(t.current)};return{set:function(o,r){void 0===r&&(r=0),e()&&(a(),r<=c?t.current=setTimeout(o,r):function e(t,a,o){var r=o-Date.now();t.current=r<=c?setTimeout(a,r):setTimeout((function(){return e(t,a,o)}),c)}(t,o,Date.now()+r))},clear:a}}),[])}},798:function(e,t,a){"use strict";a.r(t);var o=a(51),r=a(20),n=a(16),c=a(1),l=a.n(c),i=a(9),s=a.n(i),u=a(29),p=a(32),d=a(82),m=a(8),f=a(10),b=a(91),g=a(620),h=a(619),O=a(18),v=a(614),E=a(50),j=a(604),y=a(205),_=a(305),x=a(83),w=function(e){var t=Object(c.useState)({logo:"",name_store:"",country:"",city:"",phone:"",whatssap:"",address:"",email:"",tax:"",handle_stock:!1,header_text:"",foot_page_text:"",client_data_foot_page:"",ref:1,rut:"",comuna:""}),a=Object(n.a)(t,2),i=a[0],u=a[1],b=Object(c.useState)([]),w=Object(n.a)(b,2),C=(w[0],w[1],Object(c.useState)([])),k=Object(n.a)(C,2),S=k[0],q=k[1],T=Object(c.useState)(!1),P=Object(n.a)(T,2),N=P[0],R=P[1],D=Object(c.useState)(!1),A=Object(n.a)(D,2),H=A[0],M=A[1],F=Object(c.useState)(!0),J=Object(n.a)(F,2),I=J[0],z=J[1];Object(c.useEffect)((function(){e.id_branch_office?U():(m.b.error("Debe crear una sucursal o escoger una"),setTimeout((function(){e.history.replace("/config/config_store")}),1e3))}),[e.id_branch_office]);var B=function(e){if("client_data_foot_page"===e.target.name)u(Object(r.a)(Object(r.a)({},i),{},Object(o.a)({},e.target.name,"true"===e.target.value)));else if("rut"===e.target.name){var t=Object(O.b)(e.target.value);u(Object(r.a)(Object(r.a)({},i),{},Object(o.a)({},e.target.name,t)))}else u(Object(r.a)(Object(r.a)({},i),{},Object(o.a)({},e.target.name,e.target.value)))},U=function(){var t=[s.a.get(f.b+"country")];(e.match.params.id||2==JSON.parse(localStorage.getItem("user")).id_rol&&e.id_branch_office)&&t.push(s.a.get(f.b+"config_store")),Promise.all(t).then((function(t){q(t[0].data),t.length>1&&t[1].data?(u({logo:t[1].data.logo,name_store:t[1].data.name_store,country:t[1].data.country,city:t[1].data.city,phone:t[1].data.phone,whatssap:t[1].data.whatssap,address:t[1].data.address,email:t[1].data.email,header_text:t[1].data.header_text,tax:t[1].data.tax,handle_stock:t[1].data.handle_stock,foot_page_text:t[1].data.foot_page_text,client_data_foot_page:t[1].data.client_data_foot_page,ref:t[1].data.ref,rut:t[1].data.rut,comuna:t[1].data.comuna}),M(!0)):2!=e.useConnect.id_rol||e.id_branch_office||u({logo:"",name_store:"",country:"",city:"",phone:"",whatssap:"",address:"",email:"",tax:"",handle_stock:!1,header_text:"",foot_page_text:"",client_data_foot_page:"",ref:1,rut:"",comuna:""}),z(!1)})).catch((function(t){z(!1),e.tokenExpired(t)}))};return l.a.createElement(v.a,null,I?l.a.createElement(x.a,null):l.a.createElement(E.a,{onSubmit:function(t){var a=t.currentTarget;if(t.preventDefault(),!1===a.checkValidity())return t.stopPropagation(),void R(!0);var o=Object.assign({},i);z(!0),H?s.a.put(f.b+"config_store/"+e.match.params.id,o).then((function(t){m.b.success("Configuraci\xf3n Modificada"),e.setConfigStore(t.data),localStorage.setItem("configStore",JSON.stringify(t.data)),setTimeout((function(){e.history.push("/config/config_store")}),1500)})).catch((function(t){z(!1),e.tokenExpired(t)})):s.a.post(f.b+"config_store",o).then((function(t){m.b.success("Configuraci\xf3n Creada"),localStorage.setItem("configStore",JSON.stringify(t.data)),e.setConfigStore(t.data),setTimeout((function(){e.history.push("/config/config_store")}),1500)})).catch((function(t){z(!1),e.tokenExpired(t)}))},noValidate:!0,validated:N},l.a.createElement(j.a,{className:"justify-content-center containerDiv"},l.a.createElement(y.a,{sm:12,md:12,lg:12},l.a.createElement("h4",{className:"text-center title_principal"},"Datos de la Tienda"),l.a.createElement("br",null)),l.a.createElement(y.a,{sm:12,md:12,lg:12,xs:12,className:""},l.a.createElement(j.a,null,l.a.createElement(d.a,Object.assign({},e.inputCountry,{handleChange:B,value:i.country}),l.a.createElement("option",{value:""},"--Seleccione--"),S.map((function(e,t){return l.a.createElement("option",{value:e.id,key:t},e.nombre)}))),l.a.createElement(d.a,{type:"text",label:"Ciudad",name:"city",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:i.city,handleChange:B}),l.a.createElement(d.a,{type:"text",label:"Comuna",name:"comuna",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:i.comuna,handleChange:B})),l.a.createElement(g.a,{placement:"top",overlay:l.a.createElement(h.a,{id:"tooltip-disabled1"},"Campos para especificar el tax que se le va a colocar a los productos y si se maneja inventario a la hora de facturar una venta")},l.a.createElement(j.a,null,l.a.createElement(d.a,Object.assign({},e.inputTax,{handleChange:B,value:i.tax})),l.a.createElement(d.a,Object.assign({},e.inputHandleStock,{handleChange:B,value:i.handle_stock}),l.a.createElement("option",{value:!1},"No"),l.a.createElement("option",{value:!0},"Si")))),l.a.createElement(g.a,{placement:"top",overlay:l.a.createElement(h.a,{id:"tooltip-disabled1"},"Campo para determinar desde que n\xfamero empieza la facturaci\xf3n en las ventas")},l.a.createElement(j.a,null,l.a.createElement(d.a,Object.assign({},e.inputRef,{handleChange:B,value:i.ref})))),l.a.createElement(j.a,{className:"justify-content-center"},l.a.createElement(y.a,{sm:4,md:4,lg:4,xs:4,className:""},l.a.createElement(_.a,{size:"sm",type:"submit",variant:"danger",block:!0},"Guardar ",l.a.createElement(p.A,null))),l.a.createElement(y.a,{sm:4,md:4,lg:4,xs:4,className:""},l.a.createElement(_.a,{size:"sm",type:"button",onClick:function(){e.history.replace("/config/config_store")},variant:"secondary",block:!0},"Volver a la Configuracipon ",l.a.createElement(p.i,null))))))))};w.defaultProps={inputNameStore:{type:"text",required:!0,name:"name_store",label:"Nombre de la Tienda",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputEmail:{type:"email",required:!1,name:"email",label:"Correo",messageErrors:["Requerido*"," Formato Email*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputCountry:{type:"select",required:!0,name:"country",label:"Pa\xeds",messageErrors:["Requerido*"],cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4"},inputPhone:{type:"number",required:!1,name:"phone",label:"Tel\xe9fono",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputWhatssap:{type:"number",required:!1,name:"whatssap",label:"Whatssap",messageErrors:[],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputAddress:{type:"textarea",required:!1,name:"address",label:"Direcci\xf3n",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputTax:{type:"number",required:!0,name:"tax",label:"Tax",messageErrors:[],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputHandleStock:{type:"select",required:!0,name:"handle_stock",label:"Maneja Inventario",messageErrors:[],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputHeaderText:{type:"textarea",required:!1,rows:3,name:"header_text",label:"Texto de Cabecera",messageErrors:[],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputFooterPageText:{type:"textarea",required:!1,rows:3,name:"foot_page_text",label:"Texto Pie de P\xe1gina",messageErrors:[],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputRut:{type:"text",required:!1,name:"rut",label:"Rut de la tienda",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"},inputRef:{type:"number",required:!0,name:"ref",label:"N\xfamero de referencia",placeholder:"N\xfamero de referencia de venta",messageErrors:["Requerido*"],cols:"col-sm-6 col-md-6 col-lg-6 col-xs-6"}},t.default=Object(u.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise}}),{setConfigStore:b.c})(w)}}]);