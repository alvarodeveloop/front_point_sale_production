(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[72],{625:function(e,a,t){e.exports=t.p+"static/media/empty_logo.258d3697.jpg"},825:function(e,a,t){"use strict";t.r(a);var r=t(51),l=t(20),n=t(16),o=t(1),c=t.n(o),s=t(613),i=t(614),m=t(604),d=t(205),u=t(50),p=t(305),g=t(32),f=t(18),E=t(9),b=t.n(E),h=t(10),y=t(8),w=t(82),v=t(83);a.default=function(e){var a=Object(o.useState)(!1),E=Object(n.a)(a,2),j=E[0],_=E[1],O=Object(o.useState)(!0),C=Object(n.a)(O,2),k=C[0],q=C[1],x=Object(o.useState)({email:"",name:"",phone:"",password:"",confirm_password:"",img_profile:"",file:""}),R=Object(n.a)(x,2),D=R[0],F=R[1],N=Object(o.useState)(c.a.createElement(s.a,{src:t(625),id:"imagen_logo",style:{width:"70px"},roundedCircle:!0})),S=Object(n.a)(N,2),z=S[0],I=S[1];Object(o.useEffect)((function(){J()}),[]);var J=function(){b.a.get(h.b+"profile").then((function(e){F((function(a){return Object.assign({},a,{email:e.data.email,name:e.data.name,phone:e.data.phone,rut:e.data.rut,img_profile:e.data.img_profile})})),e.data.img_profile&&I(c.a.createElement(s.a,{src:h.b+"images/user/"+e.data.img_profile,id:"imagen_logo",style:{width:"50%"},roundedCircle:!0})),q(!1)})).catch((function(a){q(!1),e.tokenExpired(a)}))},L=function(e){F(Object(l.a)(Object(l.a)({},D),{},Object(r.a)({},e.target.name,"rut"===e.target.name?Object(f.g)(e.target.value):e.target.value)))};return c.a.createElement(c.a.Fragment,null,k?c.a.createElement(i.a,{fluid:!0},c.a.createElement(v.a,null)):c.a.createElement(i.a,{fluid:!0},c.a.createElement(m.a,{className:""},c.a.createElement(d.a,{sm:6,md:6,lg:6},c.a.createElement("h4",{className:"title_principal"},"Perfil del Usuario")),c.a.createElement(d.a,{sm:6,md:6,lg:6,className:"text-center"},z)),c.a.createElement("hr",null),c.a.createElement(d.a,{sm:12,md:12,lg:12},c.a.createElement(u.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void _(!0);if(D.password!==D.confirm_password)return console.log(D.password,D.confirm_password,"aqui"),y.b.error("Las contrase\xf1as no coinciden"),!1;var r=new FormData;Object.keys(D).forEach((function(e,a){"file"===e?r.append("logo_profile",D[e]):r.append(e,D[e])})),q(!0),b.a.post(h.b+"profile",r).then((function(a){y.b.success("Datos modificados con \xe9xito"),setTimeout((function(){e.history.replace("/dashboard")}),1500)})).catch((function(a){q(!1),e.tokenExpired(a)}))},noValidate:!0,validated:j},c.a.createElement(m.a,null,c.a.createElement(w.a,{type:"email",label:"Email",name:"email",required:!0,messageErrors:["Requerido* ","Formato Email"],cols:"col-md-4 col-lg-4 col-sm-4",value:D.email,handleChange:L}),c.a.createElement(w.a,{type:"text",label:"Rut",name:"rut",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:D.rut,handleChange:L}),c.a.createElement(w.a,{type:"text",label:"Nombre completo",name:"name",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:D.name,handleChange:L})),c.a.createElement(m.a,null,c.a.createElement(w.a,{type:"text",label:"Fono",name:"phone",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:D.phone,handleChange:L}),c.a.createElement(w.a,{type:"password",label:"Contrase\xf1a",name:"password",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:D.password,handleChange:L}),c.a.createElement(w.a,{type:"password",label:"Confirme Contrase\xf1a",name:"confirm_password",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:D.confirm_password,handleChange:L})),c.a.createElement(m.a,null,c.a.createElement(d.a,{sm:4,md:4,lg:4},c.a.createElement(p.a,{variant:"primary",block:!0,onClick:function(){document.getElementById("input_file").click()},type:"button",size:"sm"},"Escoger imagen del perfil ",c.a.createElement(g.s,null)),c.a.createElement("input",{type:"file",style:{display:"none"},id:"input_file",onChange:function(e){var a=e.target.files[0],t=new FileReader;t.onload=function(e){I(c.a.createElement(s.a,{src:e.target.result,id:"img_show",style:{width:"50%"},roundedCircle:!0})),F(Object(l.a)(Object(l.a)({},D),{},{file:a}))},t.readAsDataURL(a)}}))),c.a.createElement("br",null),c.a.createElement(m.a,{className:"justify-content-center"},c.a.createElement(d.a,{sm:4,md:4,lg:4},c.a.createElement(p.a,{variant:"danger",block:!0,type:"submit",size:"sm"},"Guardar ",c.a.createElement(g.z,null))),c.a.createElement(d.a,{sm:4,md:4,lg:4},c.a.createElement(p.a,{variant:"secondary",block:!0,type:"button",size:"sm",onClick:function(){e.history.replace("/dashboard")}},"Ir al Dashboard")))))))}}}]);