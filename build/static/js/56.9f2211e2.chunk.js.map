{"version":3,"sources":["pages/InvoicePrintPage.jsx"],"names":["iva_value","InvoicePrintPage","props","useState","sale","setSale","useEffect","fetchData","id_sale","match","params","id","axios","get","API_URL","then","result","data","setTimeout","window","print","catch","err","response","toast","error","message","displayTotal","product","neto_result","is_neto","undefined","quantity","price","showPriceWithDecimals","config","iva_result","configStore","tax","className","sm","md","lg","xs","src","logo","style","width","name_store","address","phone","client","name_client","moment","format","Fragment","type_document","data_document","products","map","v","i","calculateIva","key","name_product","simbolo_moneda","products_not_registered","sub_total","total","border","defaultProps","JSON","parse","localStorage","getItem"],"mappings":"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","file":"static/js/56.9f2211e2.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport{\r\n  Row,\r\n  Col,\r\n  Container,\r\n  Image\r\n} from 'react-bootstrap'\r\nimport 'components/modals/css/modalFactura50.css'\r\nimport { showPriceWithDecimals } from 'utils/functions'\r\nimport { API_URL } from 'utils/constants'\r\nimport * as moment from 'moment-timezone'\r\nimport axios from 'axios'\r\nimport { toast } from 'react-toastify';\r\n\r\nlet iva_value = \"\"\r\nlet iva_total = 0\r\nlet neto_total = 0\r\nlet total_total = 0\r\n\r\nconst InvoicePrintPage = (props) => {\r\n\r\n  const [sale,setSale] = useState(null)\r\n\r\n  useEffect( ()=> {\r\n    fetchData()\r\n  },[])\r\n\r\n  const fetchData = () => {\r\n\r\n    let id_sale = props.match.params.id\r\n\r\n    axios.get(API_URL+\"sale/\"+id_sale).then(result =>{\r\n      setSale(result.data)\r\n      setTimeout(() =>{\r\n        window.print()\r\n      },500)\r\n    }).catch(err =>{\r\n      if(err.response){\r\n        toast.error(err.response.data.message)\r\n      }else{\r\n        toast.error('Error, contacte con soporte')\r\n      }\r\n    })\r\n  }\r\n\r\n  const printTypeDocument = type => {\r\n    switch (type) {\r\n      case 1:\r\n        return( <span>'Rut'</span> )\r\n      break;\r\n      case 2:\r\n        return( <span>'Id'</span> )\r\n      break;\r\n      case 3:\r\n        return( <span>'N° Documento'</span> )\r\n      break;\r\n    default:\r\n\r\n    }\r\n  }\r\n\r\n  const calculateIva = product => {\r\n    if(product.is_neto || product.is_neto === undefined ){\r\n      return ( <span>Excento</span> )\r\n    }else{\r\n      let result = ( ( product.price * product.quantity ) * props.configStore.tax ) / 100\r\n      iva_total += result\r\n      return showPriceWithDecimals(props.config,result)\r\n    }\r\n  }\r\n\r\n  const displayTotal = (product) =>{\r\n    let neto_result = 0\r\n    if(product.is_neto || product.is_neto === undefined){\r\n      neto_result += product.quantity * product.price\r\n      neto_total += neto_result\r\n      total_total += neto_result\r\n      return showPriceWithDecimals(props.config,neto_result)\r\n    }else{\r\n      neto_result = product.quantity * product.price\r\n      neto_total += neto_result\r\n      let iva_result = ( (product.price * product.quantity) * props.configStore.tax ) / 100\r\n      iva_total += iva_result\r\n      total_total += neto_result + iva_result\r\n      return showPriceWithDecimals(props.config,neto_result + iva_result)\r\n    }\r\n  }\r\n  if(sale){\r\n    return (\r\n      <Container>\r\n        <Row className=\"justify-content-center\">\r\n          <Col sm={4} md={4} lg={4} xs={12} className=\"text-center\">\r\n            <Image src={API_URL+'images/store/logo/'+props.configStore.logo}\r\n              style={{ width: '40%'}}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <br/>\r\n        <Row className=\"justify-content-center text-center\">\r\n          <Col sm={4} md={4} lg={4} xs={12}>\r\n            <h4>{ props.configStore.name_store }</h4>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"justify-content-center text-center\">\r\n          <Col sm={4} md={4} lg={4} xs={12}>\r\n            <h4>{ props.configStore.address }</h4>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"justify-content-center text-center\">\r\n          <Col sm={4} md={4} lg={4} xs={12}>\r\n            <h4>Fono: { props.configStore.phone }</h4>\r\n          </Col>\r\n        </Row>\r\n        <br/>\r\n        <Row className=\"justify-content-center\">\r\n          <Col sm={6} md={6} lg={6} xs={6} className=\"div_client\">\r\n            <Row>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                <h6>Señor(es)</h6>\r\n              </Col>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                {sale.client ? (\r\n                  <h6>{ sale.client.name_client }</h6>\r\n                ) : ''}\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                <h6>Fecha: </h6>\r\n              </Col>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                { moment.tz('America/Santiago').format('DD-MM-YYYY') }\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                <h6>Rut</h6>\r\n              </Col>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                {sale.client ? (\r\n                  <React.Fragment>\r\n                    <h6>{ sale.client.type_document }</h6>\r\n                    <h6>{ sale.client.data_document }</h6>\r\n                  </React.Fragment>\r\n                ) : ''}\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                <h6>Dirección</h6>\r\n              </Col>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                {sale.client ? (\r\n                  <h6>{ sale.client.address }</h6>\r\n                ) : '' }\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                <h6>Teléfono</h6>\r\n              </Col>\r\n              <Col sm={6} md={6} lg={6} xs={6}>\r\n                {sale.client ? (\r\n                  <h6>{ sale.client.phone }</h6>\r\n                ) : '' }\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"justify-content-center\">\r\n          <Col sm={6} md={6} lg={6} xs={6} className=\"div_client\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"text-center bgThead\">Producto</th>\r\n                  <th className=\"text-center bgThead\">Precio.U</th>\r\n                  <th className=\"text-center bgThead\">Cantidad</th>\r\n                  <th className=\"text-center bgThead\">Iva</th>\r\n                  <th className=\"text-center bgThead\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"text-center\">\r\n                {\r\n                  sale.products.map((v,i) =>{\r\n\r\n                    iva_value = calculateIva(v)\r\n\r\n                    return(\r\n                      <tr key={i}>\r\n                        <td>{ v.product.name_product }</td>\r\n                        <td>{ props.config.simbolo_moneda }{ showPriceWithDecimals(props.config,v.price) }</td>\r\n                        <td>{ v.quantity }</td>\r\n                        <td>{ v.product.is_neto ? '' : props.config.simbolo_moneda }{ iva_value }</td>\r\n                        <td>{ props.config.simbolo_moneda }{ displayTotal(v) } </td>\r\n                      </tr>\r\n                    )\r\n                  })\r\n                }\r\n\r\n\r\n                {sale.products_not_registered.map((v,i) =>{\r\n\r\n                  return(\r\n                    <tr key={i}>\r\n                      <td>{ v.name_product }</td>\r\n                      <td>{ props.config.simbolo_moneda }{ showPriceWithDecimals(props.config,v.price) }</td>\r\n                      <td>{ v.quantity }</td>\r\n                      <td>Excento</td>\r\n                      <td>{ props.config.simbolo_moneda }{ displayTotal(v) } </td>\r\n                    </tr>\r\n                  )\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"justify-content-center\">\r\n          <Col sm={6} md={6} lg={6} xs={6} className=\"div_client\">\r\n            <table className=\"table\">\r\n              <tbody className=\"\">\r\n                <tr>\r\n                  <td>Monto Neto:</td>\r\n                  <td>{ showPriceWithDecimals(props.config,sale.sub_total) }</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Tax{ props.configStore.tax } :</td>\r\n                  <td>{ showPriceWithDecimals(props.config,sale.tax) }</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Total:</td>\r\n                  <td>{ showPriceWithDecimals(props.config,sale.total) }</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"justify-content-center\">\r\n          <Col sm={6} md={6} lg={6} xs={6} className=\"div_client\">\r\n            <table className=\"rowTable\" border=\"1\">\r\n              <tbody>\r\n                <tr>\r\n                  <td className=\"text-center\">ACUSE DE RECIBO</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Nombre:</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Rut:</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Fecha:</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Recinto:</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Firma:</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    El acuse de recibo que se declara en esteacto,\r\n                    de acuerdo a lo dispuesto en la letra b)del artículo 4º y la letra c)\r\n                    del artículo 5º de laley 19.983,\r\n                    acredita que la entrega demercadería(s)\r\n                    o servicio(s) prestado(s) ha(n)sido recibo(s)\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    )\r\n  }else{\r\n    return(\r\n      <h1>Sin datos de factura</h1>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nInvoicePrintPage.propTypes = {\r\n  config: PropTypes.object.isRequired,\r\n  configStore: PropTypes.object.isRequired,\r\n}\r\n\r\nInvoicePrintPage.defaultProps = {\r\n  config: JSON.parse(localStorage.getItem('configGeneral')),\r\n  configStore: JSON.parse(localStorage.getItem('configStore')),\r\n}\r\n\r\n\r\nexport default InvoicePrintPage\r\n"],"sourceRoot":""}