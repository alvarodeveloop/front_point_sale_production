(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[58],{611:function(e,a,t){"use strict";var n=t(32),r=t(119),l=t(1),c=t.n(l),o=t(120),i=t(622),s=t(623),u=t(301);function m(){var e=Object(r.a)(["\n  padding: 1rem;\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .table_responsive_eddit{\n    overflow-x: auto;\n  }\n"]);return m=function(){return e},e}var d=o.a.div(m());function p(e){var a=e.column,t=a.filterValue,n=a.preFilteredRows,r=a.setFilter,l=n.length;return c.a.createElement("input",{value:t||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(l," registros..."),className:"inputPageFilter"})}function g(e,a,t){return Object(s.a)(e,t,{keys:[function(e){return e.values[a]}]})}function f(e){var a=e.columns,t=e.data,r=e.menuTop,l=e.headerColor,o=e.headerFontColor,s=c.a.useMemo((function(){return{fuzzyText:g,text:function(e,a,t){return e.filter((function(e){var n=e.values[a];return void 0===n||String(n).toLowerCase().startsWith(String(t).toLowerCase())}))}}}),[]),m=c.a.useMemo((function(){return{Filter:p}}),[]),d=Object(i.useTable)({columns:a,data:t,defaultColumn:m,filterTypes:s,initialState:{pageIndex:0}},i.useFilters,i.useSortBy,i.usePagination),f=d.getTableProps,b=d.getTableBodyProps,h=d.headerGroups,E=d.page,v=d.prepareRow,y=d.canPreviousPage,x=d.canNextPage,C=d.pageOptions,N=d.pageCount,O=d.gotoPage,j=d.nextPage,P=d.previousPage,k=d.setPageSize,_=d.state,S=_.pageIndex,F=_.pageSize;return c.a.createElement("div",{className:"table_responsive_eddit"},r?c.a.createElement("div",{className:"pagination"},c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O(0)},disabled:!y},"<<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!y},"<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j()},disabled:!x},">")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O(N-1)},disabled:!x},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,S+1," de ",C.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:S+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;O(a)},className:"inputPage"},"onChange",(function(e){e.target.value>C.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:F,onChange:function(e){k(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",c.a.createElement("table",Object.assign({},f(),{className:"table table-bordered"}),c.a.createElement("thead",null,h.map((function(e){return c.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center"}),e.headers.map((function(e){return c.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{style:{backgroundColor:l||"rgb(218, 236, 242)",color:o||"black"}}),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),c.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),c.a.createElement("tbody",Object.assign({},b(),{className:"text-center"}),E.map((function(e,a){return v(e)||c.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return c.a.createElement("td",Object.assign({style:{position:"relative"}},e.getCellProps()),e.render("Cell"))})))})))),c.a.createElement("div",{className:"pagination"},c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O(0)},disabled:!y},"<<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!y},"<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j()},disabled:!x},">")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O(N-1)},disabled:!x},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,S+1," de ",C.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:S+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;O(a)},className:"inputPage"},"onChange",(function(e){e.target.value>C.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:F,onChange:function(e){k(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}g.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,t=e.columns,n=e.menuTop,r=e.headerColor,l=e.headerFontColor;return c.a.createElement(d,null,c.a.createElement(f,{data:a,columns:t,menuTop:n,headerFontColor:l,headerColor:r}))}},658:function(e,a,t){"use strict";var n=t(32),r=t(1),l=t.n(r),c=t(47),o=(t(310),l.a.forwardRef((function(e,a){var t,r=e.cols?e.cols:"col-md-6 col-sm-6";return"select"!==e.type&&"textarea"!==e.type?l.a.createElement(c.a.Group,{className:r},l.a.createElement(c.a.Label,{className:"fontBold"},e.label),l.a.createElement(c.a.Control,(t={ref:a,id:e.id?e.id:e.name,type:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,readOnly:!!e.readonly&&e.readonly,className:e.className?e.className:"",step:e.step?e.step:"",onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){}},Object(n.a)(t,"className",e.className?e.className+" form-control-sm":"form-control-sm"),Object(n.a)(t,"style",e.style?e.style:{}),Object(n.a)(t,"autoComplete",e.autoComplete?e.autoComplete:"xxx"),t)),l.a.createElement(c.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return l.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):"select"===e.type?l.a.createElement(c.a.Group,{className:r},l.a.createElement(c.a.Label,{className:"fontBold"},e.label),l.a.createElement(c.a.Control,{id:e.id?e.id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",readOnly:!!e.readonly&&e.readonly,required:e.required,multiple:!!e.multiple&&e.multiple,ref:a||null,className:e.className?e.className+" form-control-sm":"form-control-sm",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"},e.children),l.a.createElement(c.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return l.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):"textarea"===e.type?l.a.createElement(c.a.Group,{className:r},l.a.createElement(c.a.Label,{className:"fontBold"},e.label),l.a.createElement(c.a.Control,{id:e.id?e.id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,rows:e.rows?e.rows:2,readOnly:!!e.readonly&&e.readonly,onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){},ref:a||null,className:e.className?e.className+" form-control-sm":"form-control-sm",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"}),l.a.createElement(c.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return l.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):void 0})));a.a=o},799:function(e,a,t){"use strict";t.r(a),t.d(a,"ProductListDetailPage",(function(){return k}));var n=t(89),r=t(32),l=t(18),c=t(15),o=t(1),i=t.n(o),s=t(28),u=t(609),m=t(301),d=t(608),p=t(598),g=t(197),f=t(47),b=t(9),h=t.n(b),E=t(10),v=t(658),y=t(8),x=t(77),C=t(611),N=t(31),O=t(17),j=localStorage.getItem("id_branch_office"),P=[],k=function(e){var a=Object(o.useState)(null),t=Object(c.a)(a,2),s=t[0],b=t[1],k=Object(o.useState)(!0),_=Object(c.a)(k,2),S=_[0],F=_[1],w=Object(o.useState)([]),z=Object(c.a)(w,2),T=z[0],G=z[1],q=Object(o.useState)([]),R=Object(c.a)(q,2),B=(R[0],R[1],Object(o.useState)([])),I=Object(c.a)(B,2),L=I[0],H=I[1],D=Object(o.useState)({tax:19}),K=Object(c.a)(D,2),U=K[0],V=K[1],M=Object(o.useState)({id_product:"",price:""}),$=Object(c.a)(M,2),A=$[0],J=$[1],W=Object(o.useState)(!1),Q=Object(c.a)(W,2),X=Q[0],Y=Q[1],Z=Object(o.useRef)(null),ee=Object(o.useRef)(null);Object(o.useEffect)((function(){j!=e.id_branch_office?(y.b.error("Esta lista no pertenece a esta sucursal"),setTimeout((function(){e.history.replace("/product/listProduct")}),1500)):ae(!0)}),[e.id_branch_office]),P=Object(o.useMemo)((function(){return[{Header:"Producto",accessor:function(e){return[e.products.name_product]}},{Header:"Precio",accessor:function(e){return[e.price]},Cell:function(a){return i.a.createElement("span",null,Object(O.g)(e.configGeneral,a.cell.row.original.price),e.configGeneral?e.configGeneral.simbolo_moneda:"")}},{Header:"Precio con iva",accessor:function(e){return[parseFloat(e.price)*parseFloat(U.tax)/100+parseFloat(e.price)]},Cell:function(a){var t=a.cell.row.original;return i.a.createElement(u.a,{variant:"danger",className:"font-badge"},Object(O.g)(e.configGeneral,parseFloat(t.price)*parseFloat(U.tax)/100+parseFloat(t.price),2,",",".")," ",e.configGeneral?e.configGeneral.simbolo_moneda:"")}},{Header:"Acciones",Cell:function(e){var a=e.cell.row.original;return i.a.createElement(m.a,{variant:"danger",size:"sm",onClick:function(){return ne(a)}},i.a.createElement(N.L,null))}}]}),[]);var ae=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[h.a.get(E.b+"listProduct/"+e.match.params.id)];a&&(t.push(h.a.get(E.b+"product")),t.push(h.a.get(E.b+"config_store"))),Promise.all(t).then((function(e){b(e[0].data),G(e[0].data.details),a&&(H(e[1].data),V(e[2].data)),F(!1)})).catch((function(a){e.tokenExpired(a),F(!1)}))},te=function(e){if(e.persist(),J(Object(l.a)(Object(l.a)({},A),{},Object(r.a)({},e.target.name,e.target.value))),"id_product"===e.target.name){var a,t=L.find((function(a){return a.id==e.target.value}));J(Object(l.a)(Object(l.a)({},A),{},(a={},Object(r.a)(a,e.target.name,e.target.value),Object(r.a)(a,"price",t.price),a))),ee.current.focus()}else J(Object(l.a)(Object(l.a)({},A),{},Object(r.a)({},e.target.name,e.target.value)))},ne=function(e){G((function(a){return a.filter((function(a){return parseInt(a.id_product)!==parseInt(e.id_product)}))}))},re=function(){e.history.replace("/product/listProduct")},le=function(){J({id_product:"",price:""}),Y(!1),Z.current.focus()};return i.a.createElement(d.a,{fluid:!0},S?i.a.createElement(x.a,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement(g.a,null,i.a.createElement("h4",{className:"title_principal"},"Detalle de la lista ",i.a.createElement("span",{style:{textDecoration:"underline",textTransform:"uppercase"}},s?s.name:""))),i.a.createElement(g.a,null,i.a.createElement("h4",{className:"title_principal text-right"},"Total de productos ",i.a.createElement(u.a,{variant:"danger",className:"font-badge"},T.length)))),i.a.createElement("hr",null),i.a.createElement(p.a,null,i.a.createElement(g.a,null,i.a.createElement(f.a,{onSubmit:function(e){var a=e.currentTarget;if(e.preventDefault(),!1===a.checkValidity())return e.stopPropagation(),void Y(!0);for(var t,r=document.getElementById("id_product"),l=0;l<r.options.length;l++)r.options[l].value===r.value&&(t=r.options[l]);var c={id_product_list:s.id,id_product:A.id_product,price:A.price,products:L[t.attributes.dataindex.value]};G((function(e){return[].concat(Object(n.a)(e),[c])})),le()},noValidate:!0,validated:X},i.a.createElement(p.a,{className:"justify-content-center"},i.a.createElement(v.a,{ref:Z,type:"select",name:"id_product",label:"Producto",value:A.id_product,handleChange:te,required:!0,cols:"col-md-4 col-sm-4 col-lg-4 col-xl-4",messageErrors:["Requerido"]},i.a.createElement("option",{value:""},"--Seleccione--"),L.map((function(e,a){return i.a.createElement("option",{key:a,value:e.id,dataindex:a},e.name_product)}))),i.a.createElement(v.a,{ref:ee,type:"number",name:"price",label:"Precio",value:A.price,required:!0,handleChange:te,cols:"col-md-4 col-sm-4 col-lg-4 col-xl-4",messageErrors:["Requerido"]})),i.a.createElement(p.a,null,i.a.createElement(g.a,{className:"text-center text-danger"},"*El bot\xf3n de agregar es para agregar el item a la tabla y el confirmar para almacenar en la base de datos.")),i.a.createElement("br",null),i.a.createElement(p.a,{className:"justify-content-center"},i.a.createElement(g.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,{variant:"secondary",type:"button",block:!0,size:"sm",onClick:re},"Volver")),i.a.createElement(g.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,{variant:"danger",type:"submit",block:!0,size:"sm"},"Agregar")),i.a.createElement(g.a,{sm:4,md:4,lg:4},i.a.createElement(m.a,{variant:"secondary",type:"button",block:!0,size:"sm",onClick:function(){F(!0);var a={detailProducts:Object(n.a)(T)};h.a.put(E.b+"listProductDetail/"+e.match.params.id,a).then((function(e){y.b.success("Lista modificada con \xe9xito"),setTimeout((function(){re()}),1500)})).catch((function(a){F(!1),e.tokenExpired(a)}))}},"Confirmar")))))),i.a.createElement("br",null),i.a.createElement(p.a,null,i.a.createElement(g.a,null,i.a.createElement(C.a,{data:T,columns:P})))))};a.default=Object(s.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise,configGeneral:e.configs.config}}),{})(k)}}]);
//# sourceMappingURL=58.84b91a25.chunk.js.map