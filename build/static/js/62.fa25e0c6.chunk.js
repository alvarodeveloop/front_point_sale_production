(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[62],{632:function(e,t,a){"use strict";var n=a(2),r=a(4),o=a(1),c=a.n(o),i=a(3),l=a.n(i),s=a(599),u=a(206),f=a(204),d={id:l.a.any,href:l.a.string,onClick:l.a.func,title:l.a.node.isRequired,disabled:l.a.bool,menuRole:l.a.string,renderMenuOnMount:l.a.bool,rootCloseEvent:l.a.string,bsPrefix:l.a.string,variant:l.a.string,size:l.a.string},g=c.a.forwardRef((function(e,t){var a=e.title,o=e.children,i=e.bsPrefix,l=e.rootCloseEvent,d=e.variant,g=e.size,m=e.menuRole,b=e.renderMenuOnMount,p=e.disabled,E=e.href,h=e.id,v=Object(r.a)(e,["title","children","bsPrefix","rootCloseEvent","variant","size","menuRole","renderMenuOnMount","disabled","href","id"]);return c.a.createElement(s.a,Object(n.a)({ref:t},v),c.a.createElement(u.a,{id:h,href:E,size:g,variant:d,disabled:p,childBsPrefix:i},a),c.a.createElement(f.a,{role:m,renderOnMount:b,rootCloseEvent:l},o))}));g.displayName="DropdownButton",g.propTypes=d,t.a=g},650:function(e,t,a){},792:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(1),o=a.n(r),c=a(9),i=a.n(c),l=a(609),s=a(632),u=a(599),f=a(608),d=a(598),g=a(197),m=a(8),b=a(10),p=a(611),E=(a(615),a(650),a(17)),h=a(694),v=a(675),O=(a(612),a(157)),C=(a(651),a(28)),j=a(50),w=a(77),_=[],k={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]};t.default=Object(C.b)((function(e){return{config:e.configs.config,configStore:e.configs.configStore,id_branch_office:e.enterpriseSucursal.id_branch_office}}),{})((function(e){var t=Object(r.useState)([]),a=Object(n.a)(t,2),c=a[0],C=a[1],S=Object(r.useState)(!1),P=Object(n.a)(S,2),M=P[0],x=P[1],y=Object(r.useState)({}),H=Object(n.a)(y,2),T=H[0],N=H[1],I=Object(r.useState)(!1),D=Object(n.a)(I,2),F=D[0],R=D[1],z=Object(r.useState)(!1),B=Object(n.a)(z,2),V=(B[0],B[1]),A=Object(r.useState)([]),Y=Object(n.a)(A,2),J=Y[0],q=Y[1],G=Object(r.useState)(!0),K=Object(n.a)(G,2),L=K[0],Q=K[1];Object(r.useEffect)((function(){return e.config&&e.configStore||(e.config?e.configStore||(m.b.error("Error, debe hacer su configuraci\xf3n de la tienda primero"),setTimeout((function(){e.history.replace("/config/config_store")}),2e3)):(m.b.error("Error, debe hacer su configuraci\xf3n general"),setTimeout((function(){e.history.replace("/config/config_general")}),2e3))),j.a.toggleCollapsed(),function(){j.a.toggleCollapsed(),_=[],te()}}),[]),Object(r.useEffect)((function(){te(),ee()}),[e.id_branch_office]),Object(r.useEffect)((function(){W(),setTimeout((function(){V(!1)}),3e3)}),[J]),Object(r.useMemo)((function(){_=[{Header:"Referencia",accessor:"ref"},{Header:"Cliente",accessor:function(e){return e.client?[e.client.name_client+" "+e.client.data_document]:[]}},{Header:"Total",accessor:"total",Cell:function(e){return Object(E.g)(e.config,e.cell.row.original.total)}},{Header:"Pago",accessor:"payment",Cell:function(e){return Object(E.g)(e.config,e.cell.row.original.payment)}},{Header:"Status",accessor:function(e){return[2===e.status?"En Espera":"Pagado"]},Cell:function(e){return 2===e.cell.row.original.status?o.a.createElement(l.a,{variant:"danger",className:"font-badge"},"En espera"):o.a.createElement(l.a,{variant:"success",className:"font-badge"},"Pagado")}},{Header:"Fecha",accessor:function(e){return[O(e.createdAt).format("DD-MM-YYYY")]}},{Header:"Acciones",Cell:function(e){return o.a.createElement(s.a,{size:"sm",id:"drop"+e.cell.row.original.id,title:"Seleccione",drop:"left",block:"true"},2===e.cell.row.original.status?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a.Item,{onClick:function(){return Z(e.cell.row.original)}},"Pagar Pedido"),o.a.createElement(u.a.Item,{onClick:function(){return $(e.cell.row.original)}},"Ver Detalle"),o.a.createElement(u.a.Item,{onClick:function(){return U(e.cell.row.original)}},"Anular Venta")):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a.Item,{onClick:function(){return X(e.cell.row.original)}},"Imprimir Factura"),o.a.createElement(u.a.Item,{onClick:function(){return $(e.cell.row.original)}},"Ver Detalle"),o.a.createElement(u.a.Item,{onClick:function(){return U(e.cell.row.original)}},"Anular Venta")))}}]}));var U=function(){},W=function(){J.forEach((function(e,t){k.labels.push(e.name),k.datasets[0].data.push(parseFloat(e.total)),k.datasets[0].backgroundColor.push(b.c[t]),k.datasets[0].hoverBackgroundColor.push(b.c[t])})),setTimeout((function(){V(!0)}),1500)},X=function(t){t.ref;Q(!0),i.a.get(b.b+"sale_print_invoice_history/"+t.ref).then((function(a){t.voucher?i.a.get(b.b+"invoice_print/"+a.data.id+"/2/2").then((function(e){window.open(b.b+"documents/sale_note/files_pdf/"+e.data.name),Q(!1)})).catch((function(t){Q(!1),e.tokenExpired(t)})):(Q(!1),window.open(a.data.pdf_public_url_bill,"_blank"))})).catch((function(t){Q(!1),e.tokenExpired(t)}))},Z=function(e){N(e),x(!0)},$=function(e){N(e),R(!0)},ee=function(){var t=[i.a.get(b.b+"sale"),i.a.get(b.b+"sale_stadistics")];Promise.all(t).then((function(e){C(e[0].data),q(e[1].data.sale),Q(!1)})).catch((function(t){Q(!1),e.tokenExpired(t)}))},te=function(){k={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]}};return o.a.createElement(o.a.Fragment,null,L?o.a.createElement(f.a,null,o.a.createElement(w.a,null)):o.a.createElement(f.a,{fluid:!0},o.a.createElement(d.a,null,o.a.createElement(g.a,{sm:6,md:6,lg:6},o.a.createElement("h4",{className:"title_principal"},"Tabla de Ventas")),o.a.createElement(g.a,{sm:6,md:6,lg:6,className:"text-center"},o.a.createElement("h4",{className:"title_principal"},"Total ventas ",o.a.createElement(l.a,{variant:"danger",className:"font-badge"},c.length)))),o.a.createElement("hr",null),o.a.createElement(d.a,null,o.a.createElement(g.a,{sm:12,md:12,lg:12,xs:12,className:"containerDiv"},o.a.createElement(p.a,{columns:_,data:c}))),o.a.createElement(h.a,{isShow:M,onHide:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];x(!1),e&&(te(),ee())},config:e.config,configStore:e.configStore,dataToPay:T}),e.config&&e.configStore?o.a.createElement(v.a,{isShow:F,onHide:function(){return R(!1)},config:e.config,configStore:e.configStore,dataSale:T}):""))}))}}]);