(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[29],{612:function(e,a,t){},617:function(e,a,t){e.exports=t.p+"static/media/empty_logo.258d3697.jpg"},625:function(e,a,t){},626:function(e,a,t){"use strict";var n=t(1),r=t.n(n),c=t(832),l=t(301),o=(t(612),t(627));a.a=function(e){return r.a.createElement(c.a,{show:e.show,onHide:e.onHide,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(c.a.Header,{closeButton:!0,className:"header_dark"},r.a.createElement(c.a.Title,{id:"contained-modal-title-vcenter"})),r.a.createElement(c.a.Body,null,r.a.createElement("div",{style:{width:"100%",paddingLeft:"25%"}},r.a.createElement(o.a,{catchCode:e.catchCode}))),r.a.createElement(c.a.Footer,null,r.a.createElement(l.a,{size:"sm",onClick:e.onHide},"Cerrar")))}},627:function(e,a,t){"use strict";var n=t(1),r=t.n(n),c=(t(635),t(657)),l=t.n(c),o=t(8);a.a=function(e){Object(n.useEffect)((function(){return a(),function(){l.a.stop()}}),[]);var a=function(){l.a.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#camera"),numOfWorkers:navigator.hardwareConcurrency,constraints:{width:300,height:300}},decoder:{readers:["ean_reader"]}},(function(e){e?o.b.error("Error, revise que la c\xe1mara de su dispositivo este conectada"):(console.log("Initialization finished. Ready to start"),l.a.start())}));var a=[];l.a.onDetected((function(n){var r=n.codeResult.code;if(a.push(r),a.length>20){var c=t(a)[0];e.catchCode(c)}}))},t=function(e){var a={};return e.forEach((function(e){a[e]||(a[e]=0),a[e]++})),Object.keys(a).sort((function(e,t){return a[e]<a[t]}))};return r.a.createElement("div",{id:"camera"})}},635:function(e,a,t){},636:function(e,a,t){"use strict";var n=t(89),r=t(16),c=t.n(r),l=t(47),o=t(18),s=t(34),i=t(15),u=t(1),m=t.n(u),d=t(9),p=t.n(d),g=(t(625),t(31)),b=t(88),E=t(8),f=t(17),y=t(10),h=t(626),j=(t(615),t(651),t(654)),v=t(607),_=t(838),O=t(598),k=t(197),C=t(301),x=t(608),q=t(46),S=t(662),w=t(660),N=function(e){var a,r,d=Object(u.useState)({name_product:"",code_ean:"",description:"",is_neto:!0,id_category:[],is_auto_sale:!1,img_product:"",method_sale:1,price:"",qr_image:"",sticker_color:"#9c7901",detailCost:[],pack:"",categoryNames:"",minimun_stock:10,quantity:"",cost:"",cost_details:"",id_provider:[]}),N=Object(i.a)(d,2),I=N[0],z=N[1],P=Object(u.useState)(!1),R=Object(i.a)(P,2),D=R[0],G=(R[1],Object(u.useState)(!1)),M=Object(i.a)(G,2),A=M[0],B=M[1],F=Object(u.useState)([]),L=Object(i.a)(F,2),T=(L[0],L[1]),H=Object(u.useState)([]),V=Object(i.a)(H,2),K=V[0],U=V[1],J=Object(u.useState)(!1),W=Object(i.a)(J,2),Q=W[0],X=W[1],Y=Object(u.useState)(!1),Z=Object(i.a)(Y,2),$=Z[0],ee=Z[1],ae=Object(u.useState)(""),te=Object(i.a)(ae,2),ne=te[0],re=te[1],ce=Object(u.useState)({}),le=Object(i.a)(ce,2),oe=le[0],se=le[1],ie=Object(u.useState)(0),ue=Object(i.a)(ie,2),me=ue[0],de=ue[1],pe=Object(u.useState)({}),ge=Object(i.a)(pe,2),be=ge[0],Ee=ge[1],fe=Object(u.useState)(""),ye=Object(i.a)(fe,2),he=ye[0],je=ye[1],ve=Object(u.useState)("Guardar"),_e=Object(i.a)(ve,2),Oe=_e[0],ke=_e[1],Ce=Object(u.useState)(!1),xe=Object(i.a)(Ce,2),qe=xe[0],Se=xe[1],we=Object(u.useState)([]),Ne=Object(i.a)(we,2),Ie=(Ne[0],Ne[1],Object(u.useState)(!1)),ze=Object(i.a)(Ie,2),Pe=ze[0],Re=ze[1],De=Object(u.useState)(m.a.createElement(v.a,{src:t(617),id:"imagen_logo",style:{width:"100px"},roundedCircle:!0})),Ge=Object(i.a)(De,2),Me=Ge[0],Ae=Ge[1],Be=Object(u.useState)(!1),Fe=Object(i.a)(Be,2),Le=Fe[0],Te=Fe[1],He=Object(u.useState)([]),Ve=Object(i.a)(He,2),Ke=Ve[0],Ue=Ve[1],Je=Object(u.useRef)(null);Object(u.useEffect)((function(){return Qe(),function(){Ye()}}),[]),Object(u.useEffect)((function(){Ze()}),[oe,be]);var We=function(){var e=Object(s.a)(c.a.mark((function e(a){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("method_sale"!==a.target.name){e.next=7;break}return"",2==a.target.value?Re(!0):Re(!1),e.next=5,z(Object(o.a)(Object(o.a)({},I),{},Object(l.a)({},a.target.name,a.target.value)));case 5:e.next=15;break;case 7:if("is_neto"!==a.target.name&&"is_auto_sale"!==a.target.name){e.next=13;break}return t="true"===a.target.value,e.next=11,z(Object(o.a)(Object(o.a)({},I),{},Object(l.a)({},a.target.name,t)));case 11:e.next=15;break;case 13:return e.next=15,z(Object(o.a)(Object(o.a)({},I),{},Object(l.a)({},a.target.name,a.target.value)));case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Qe=function(){var a=[p.a.get(y.b+"category"),p.a.get(y.b+"config_general"),p.a.get(y.b+"provider")];e.match.params.id&&(e.isInventary?a.push(p.a.get(y.b+"product/"+atob(e.match.params.id))):a.push(p.a.get(y.b+"product/"+e.match.params.id))),Promise.all(a).then((function(a){a[0].data?U(a[0].data):E.b.warning("Debe realizar su configuraci\xf3n general"),T(a[1].data),Ue(a[2].data),a.length>3&&e.isInventary&&(z({name_product:a[3].data.name_product,code_ean:a[3].data.code_ean,description:a[3].data.description,is_neto:a[3].data.is_neto,id_category:a[3].data.categories.map((function(e){return{value:e.categories.id,label:e.categories.name_category}})),is_auto_sale:a[3].data.is_auto_sale,img_product:a[3].data.img_product,method_sale:a[3].data.method_sale,price:a[3].data.price,qr_image:a[3].data.qr_image,sticker_color:a[3].data.sticker_color,detailCost:a[3].data.cost_details,pack:a[3].data.pack,minimun_stock:a[3].data.inventary[0].minimun_stock}),2==a[3].data.method_sale&&Re(!0),ee(!0),a[3].data.img_product&&Ae(m.a.createElement(v.a,{src:y.b+"images/product/principal/"+a[3].data.img_product,id:"imagen_logo",style:{width:"80px"},thumbnail:!0})),a[3].data.gallery.length>0&&Ee(a[3].data.gallery))})).catch((function(e){e.response?E.b.error(e.response.data.message):(console.log(e),E.b.error("Error,contacte con soporte"))}))},Xe=function(){var a=Object(s.a)(c.a.mark((function a(){var t,n,r,l,o,s,i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!1!==Je.current.checkValidity()){a.next=5;break}return X(!0),a.abrupt("return");case 5:if(t=new FormData,n=Object.assign({},I,{detailCost:I.detailCost.concat(D)}),Object.keys(n).forEach((function(e,a){if("img_product"===e)ne&&t.append(e,ne);else if("id_category"===e){var n="";I[e].forEach((function(e,a){t.append("id_category",e.value),n+=e.label+","})),n=n.substring(0,n.length-1),t.append("name_categories",n)}else t.append(e,I[e])})),ke("Guardando Datos, Espere por favor..."),Se(!0),!$){a.next=25;break}return r=e.isInventary?atob(e.match.params.id):e.match.params.id,a.next=14,p.a.put(y.b+"product/"+r,t);case 14:return l=a.sent,ke("Trabajando en galeria de imag\xe9nes..."),o=new FormData,Object.keys(oe).forEach((function(e,a){o.append("gallery",oe[e])})),Object.keys(be).forEach((function(e,a){o.append("galleryUpdate",be[e].filename)})),a.next=21,p.a.put(y.b+"update_gallery/"+r,o);case 21:E.b.success("Producto Modificado"),setTimeout((function(){e.isInventary?ea():e.handleSubmitProduct(Object.assign({},l.data))}),1500),a.next=48;break;case 25:return a.next=27,p.a.post(y.b+"product",t);case 27:if(s=a.sent,!(oe.length>0)){a.next=42;break}return ke("Guardando Galeria de Imagenes..."),i=new FormData,Object.keys(oe).forEach((function(e,a){i.append("gallery",oe[e])})),i.append("id_product",s.data.id),a.next=35,p.a.post(y.b+"product_gallery",i);case 35:E.b.success("Producto Creado"),ke("Guardar"),Se(!1),Re(!1),Ye(),a.next=47;break;case 42:E.b.success("Producto Creado"),ke("Guardar"),Se(!1),Re(!1),Ye();case 47:setTimeout((function(){e.isInventary?ea():e.handleSubmitProduct(Object.assign({},s.data))}),1500);case 48:a.next=55;break;case 50:a.prev=50,a.t0=a.catch(0),ke("Guardar"),Se(!1),a.t0.response?E.b.error(a.t0.response.data.message):(console.log(a.t0),E.b.error("Error, contacte con soporte"));case 55:case"end":return a.stop()}}),a,null,[[0,50]])})));return function(){return a.apply(this,arguments)}}(),Ye=function(){z({name_product:"",cost:"",code_ean:"",description:"",is_neto:"",id_category:"",is_auto_sale:"",img_product:"",method_sale:"",price:"",qr_image:"",sticker_color:"#9c7901",detailCost:[],pack:"",categoryNames:"",minimun_stock:0}),re(null),Ae(null),se({}),je(""),Ae(m.a.createElement(v.a,{src:t(617),id:"img_show",style:{width:"80px"},roundedCircle:!0}))},Ze=function(){var e=Object(s.a)(c.a.mark((function e(){var a,t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",0,e.next=4,Promise.all(Object.keys(oe).map(function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe[t],e.next=3,Object(f.c)(a);case 3:return r=e.sent,e.abrupt("return",m.a.createElement(_.a.Item,{key:n},m.a.createElement("img",{className:"d-block",src:r,alt:"First slide",style:{height:"300px",width:"100%"}}),m.a.createElement(_.a.Caption,null,m.a.createElement(O.a,{className:"justify-content-center"},m.a.createElement(k.a,{sm:5,md:5,lg:5},m.a.createElement(C.a,{size:"sm",variant:"dark",title:"Eliminar",onClick:function(){return $e(t,!1)},className:"buttonTrashGallery"},"Eliminar ",m.a.createElement(g.M,null)))))));case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()));case 4:return t=e.sent,e.next=7,Promise.all(Object.keys(be).map(function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=be[t],e.abrupt("return",m.a.createElement(_.a.Item,{key:n+"-update"},m.a.createElement("img",{className:"d-block",src:y.b+"images/product/gallery/"+a.filename,alt:"First slide",style:{height:"300px",width:"100%"}}),m.a.createElement(_.a.Caption,null,m.a.createElement(O.a,{className:"justify-content-center"},m.a.createElement(k.a,{sm:5,md:5,lg:5},m.a.createElement(C.a,{size:"sm",variant:"dark",title:"Eliminar",onClick:function(){return $e(t,!0)},className:"buttonTrashGallery"},"Eliminar ",m.a.createElement(g.M,null)))))));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()));case 7:r=e.sent,je([].concat(Object(n.a)(t),Object(n.a)(r)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(e,a){if(a){var t=Object.assign({},be);delete t[e],Ee(t),de(0)}else{var n=Object.assign({},oe);delete n[e],se(n),de(0)}},ea=function(){e.history.replace("/inventary")},aa=function(){if(!Le){if(!I.name_product||!I.price)return void X(!0);Q&&X(!1)}Te(!Le)};return m.a.createElement(x.a,{fluid:!0},m.a.createElement(O.a,null,m.a.createElement(k.a,{sm:12,md:12,lg:12},m.a.createElement("h4",{className:"title_principal"},$?"Modifcar producto en el invetario":"Crear producto en el inventario"))),m.a.createElement(q.a,{onSubmit:function(){},noValidate:!0,validated:Q,ref:Je},Le?m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,null,m.a.createElement(b.a,{type:"number",label:"Cantidad",name:"quantity",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:I.quantity,handleChange:We}),m.a.createElement(b.a,{type:"text",label:"Detalle Costo",name:"detail",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:I.detail,handleChange:We}),m.a.createElement(b.a,{type:"number",step:"any",label:"Costo",name:"cost",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:I.cost,handleChange:We})),m.a.createElement(O.a,null,m.a.createElement(q.a.Group,{className:"col-md-4 col-sm-4 col-lg-4"},m.a.createElement(q.a.Label,{className:"fontBold"},"Proveedores"),m.a.createElement(j.a,{value:I.id_provider,onChange:function(e){z(Object(o.a)(Object(o.a)({},I),{},{id_provider:e}))},isMulti:!0,options:Ke.map((function(e,a){return{value:e.id,label:e.social_razon}}))}))),m.a.createElement(O.a,{className:"justify-content-center"},m.a.createElement(k.a,{sm:4,md:4,lg:4},m.a.createElement(C.a,{size:"sm",type:"button",onClick:Xe,disabled:qe,variant:"danger",block:!0},Oe," ",m.a.createElement(g.z,null)," ")),m.a.createElement(k.a,{sm:4,md:4,lg:4},m.a.createElement(C.a,{size:"sm",type:"button",onClick:aa,variant:"secondary",block:!0},"Atr\xe1s")))):m.a.createElement(O.a,{className:""},m.a.createElement(k.a,{sm:12,md:12,lg:12,xs:12,className:""},m.a.createElement(O.a,{className:"justify-content-center align-items-center"},m.a.createElement(k.a,{sm:4,md:4,lg:4,xs:12},m.a.createElement("br",null),m.a.createElement(C.a,Object(l.a)({size:"sm",onClick:function(){document.getElementById("file_product").click()},variant:"success",block:"true"},"size","sm"),"Escoger Imagen Producto ",m.a.createElement(g.s,null)),m.a.createElement("input",{type:"file",id:"file_product",style:{display:"none"},onChange:function(e){var a=e.target.files[0],t=new FileReader;t.onload=function(e){Ae(m.a.createElement(v.a,{src:e.target.result,id:"img_show",style:{width:"80%"},roundedCircle:!0})),re(a)},t.readAsDataURL(a)}})),m.a.createElement(k.a,{sm:4,md:4,lg:4,xs:12,className:"text-center"},Me)),m.a.createElement("br",null),m.a.createElement(O.a,null,m.a.createElement(b.a,Object.assign({},e.inputNameProduct,{handleChange:We,value:I.name_product,placeholder:"Nombre del Producto"})),m.a.createElement(b.a,Object.assign({},e.inputPrice,{handleChange:We,value:I.price})),m.a.createElement(q.a.Group,{className:e.isInventary?"col-md-4 col-sm-4 col-lg-4":"col-md-3 col-sm-3 col-lg-3"},m.a.createElement(q.a.Label,{className:"fontBold"},"Categor\xedas"),m.a.createElement(j.a,{value:I.id_category,onChange:function(e){z(Object(o.a)(Object(o.a)({},I),{},{id_category:e}))},isMulti:!0,options:K.map((function(e,a){return{value:e.id,label:e.name_category}}))}))),m.a.createElement(O.a,null,m.a.createElement(b.a,Object.assign({},e.inputDescription,{handleChange:We,value:I.description}))),m.a.createElement(S.a,null,m.a.createElement(w.a,null,m.a.createElement(S.a.Toggle,{as:w.a.Header,eventKey:"0",className:"header_card"},m.a.createElement("b",null,"Datos de Personalizaci\xf3n")," (hacer click para desplegar campos)"),m.a.createElement(S.a.Collapse,{eventKey:"0"},m.a.createElement(w.a.Body,null,m.a.createElement(O.a,null,m.a.createElement(b.a,Object.assign({},e.inputCodeEan,{handleChange:We,value:I.code_ean})),m.a.createElement(k.a,{sm:4,md:4,lg:4},m.a.createElement("br",null),m.a.createElement(C.a,(a={size:"sm",variant:"dark"},Object(l.a)(a,"size","sm"),Object(l.a)(a,"onClick",(function(){document.getElementById("code_ean").removeAttribute("readonly")})),Object(l.a)(a,"block",!0),a),"Escribir EAN")),m.a.createElement(k.a,{sm:4,md:4,lg:4},m.a.createElement("br",null),m.a.createElement(C.a,(r={size:"sm",variant:"dark"},Object(l.a)(r,"size","sm"),Object(l.a)(r,"onClick",(function(){document.getElementById("code_ean").setAttribute("readonly",!0),B(!0)})),Object(l.a)(r,"block",!0),r),"Scannear EAN"))),m.a.createElement("br",null),m.a.createElement(O.a,null,m.a.createElement(b.a,Object.assign({},e.inputSticker,{handleChange:We,value:I.sticker_color})),m.a.createElement(b.a,Object.assign({},e.inputMethodSale,{handleChange:We,value:I.method_sale}),m.a.createElement("option",{value:""},"--Seleccione--"),m.a.createElement("option",{value:1},"Unidad"),m.a.createElement("option",{value:2},"Mayorista"),m.a.createElement("option",{value:3},"(Kilo, Litros, Metros, Entre Otros...)")),Pe?m.a.createElement(b.a,Object.assign({},e.inputPack,{handleChange:We,value:I.pack})):"",m.a.createElement(b.a,{type:"number",label:"Stock minimo",name:"minimun_stock",required:!1,messageErrors:[""],cols:"col-md-4 col-lg-4 col-sm-4",value:I.minimun_stock,handleChange:We})),m.a.createElement(O.a,{className:"justify-content-center"},m.a.createElement(k.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement(C.a,{size:"sm",variant:"secondary",onClick:function(){document.getElementById("galleryImg").click()},block:"true"},"Imag\xe9nes de Galeria ",m.a.createElement(g.s,null)),m.a.createElement("input",{type:"file",id:"galleryImg",style:{display:"none"},multiple:!0,accept:".jpg, .png, .jpeg",onChange:function(e){se(Object.assign({},oe,e.target.files))}}))),m.a.createElement("br",null),m.a.createElement(O.a,{className:"justify-content-center"},m.a.createElement(k.a,{sm:8,md:8,lg:8},m.a.createElement(_.a,{activeIndex:me,onSelect:function(e,a){de(e)}},he))))))),m.a.createElement("br",null),$?m.a.createElement(O.a,{className:"justify-content-center"},m.a.createElement(k.a,{md:4,sm:4,lg:4},m.a.createElement(C.a,{size:"sm",type:"button",onClick:Xe,disabled:qe,variant:"danger",block:!0},Oe," ",m.a.createElement(g.z,null)," ")),e.isInventary?m.a.createElement(k.a,{md:4,sm:4,lg:4},m.a.createElement(C.a,{size:"sm",type:"button",onClick:ea,variant:"secondary",block:!0},"Volver")):""):m.a.createElement(O.a,{className:"justify-content-center"},m.a.createElement(k.a,{sm:4,md:4,lg:4},m.a.createElement(C.a,{variant:"danger",size:"sm",onClick:aa,block:!0},"Datos de Inventario")))))),m.a.createElement(h.a,{show:A,onHide:function(){return B(!1)},catchCode:function(e){B(!1)}}))};N.defaultProps={inputNameProduct:{type:"text",required:!0,name:"name_product",label:"Nombre",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputCodeEan:{type:"text",required:!1,readonly:!0,name:"code_ean",label:"Codigo EAN",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputIsNeto:{type:"select",required:!0,name:"is_neto",label:"Es Neto",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputDescription:{type:"textarea",required:!1,name:"description",label:"Descripci\xf3n (opcional)",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputAutoSale:{type:"select",required:!0,name:"is_auto_sale",label:"Auto Venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputMethodSale:{type:"select",required:!0,name:"method_sale",label:"M\xe9todo de Venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputPrice:{type:"number",required:!0,name:"price",label:"Precio",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",step:"any",messageErrors:["Requerido*"]},inputSticker:{type:"color",required:!0,name:"sticker_color",label:"color de la Etiqueta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputCategory:{type:"select",multiple:!0,required:!1,name:"id_category",label:"Categoria",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputPack:{type:"number",required:!1,name:"pack",label:"Pack",placeholder:"Ingrese la cantidad de venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",step:"any",messageErrors:["Requerido*"]}},a.a=N},797:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=(t(9),t(8)),l=(t(10),t(50)),o=t(636);a.default=function(e){return Object(n.useEffect)((function(){if(localStorage.getItem("configStore"))return l.a.toggleCollapsed(),function(){l.a.toggleCollapsed()};c.b.error("Error, debe hacer su configuraci\xf3n de empresa"),e.history.replace("/config/config_store")}),[]),r.a.createElement(o.a,Object.assign({},e,{handleSubmitProduct:function(){},isInventary:!0}))}}}]);
//# sourceMappingURL=29.12b480fe.chunk.js.map