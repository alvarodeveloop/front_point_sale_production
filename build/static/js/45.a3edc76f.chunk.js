(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[45],{611:function(e,a,t){"use strict";var n=t(47),r=t(119),l=t(1),c=t.n(l),o=t(120),i=t(622),s=t(623),u=t(301);function m(){var e=Object(r.a)(["\n  padding: 1rem;\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .table_responsive_eddit{\n    overflow-x: auto;\n  }\n"]);return m=function(){return e},e}var d=o.a.div(m());function p(e){var a=e.column,t=a.filterValue,n=a.preFilteredRows,r=a.setFilter,l=n.length;return c.a.createElement("input",{value:t||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Buscar en ".concat(l," registros..."),className:"inputPageFilter"})}function g(e,a,t){return Object(s.a)(e,t,{keys:[function(e){return e.values[a]}]})}function f(e){var a=e.columns,t=e.data,r=e.menuTop,l=e.headerColor,o=e.headerFontColor,s=e.pageSizeHandler,m=c.a.useMemo((function(){return{fuzzyText:g,text:function(e,a,t){return e.filter((function(e){var n=e.values[a];return void 0===n||String(n).toLowerCase().startsWith(String(t).toLowerCase())}))}}}),[]),d=c.a.useMemo((function(){return{Filter:p}}),[]),f=Object(i.useTable)({columns:a,data:t,defaultColumn:d,filterTypes:m,initialState:{pageIndex:0,pageSize:s[0]}},i.useFilters,i.useSortBy,i.usePagination),b=f.getTableProps,E=f.getTableBodyProps,h=f.headerGroups,v=f.page,y=f.prepareRow,C=f.canPreviousPage,x=f.canNextPage,N=f.pageOptions,k=f.pageCount,j=f.gotoPage,O=f.nextPage,P=f.previousPage,S=f.setPageSize,z=f.state,_=z.pageIndex,w=z.pageSize;return c.a.createElement("div",{className:"table_responsive_eddit"},r?c.a.createElement("div",{className:"pagination"},c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(0)},disabled:!C},"<<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!C},"<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O()},disabled:!x},">")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(k-1)},disabled:!x},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,_+1," de ",N.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:_+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;j(a)},className:"inputPage"},"onChange",(function(e){e.target.value>N.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:w,onChange:function(e){S(Number(e.target.value))},className:"inputPage"},s.map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",c.a.createElement("table",Object.assign({},b(),{className:"table table-bordered"}),c.a.createElement("thead",null,h.map((function(e){return c.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center"}),e.headers.map((function(e){return c.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{style:{backgroundColor:l||"rgb(218, 236, 242)",color:o||"black"}}),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),c.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),c.a.createElement("tbody",Object.assign({},E(),{className:"text-center"}),v.map((function(e,a){return y(e)||c.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return c.a.createElement("td",Object.assign({style:{position:"relative"}},e.getCellProps()),e.render("Cell"))})))})))),c.a.createElement("div",{className:"pagination"},c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(0)},disabled:!C},"<<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return P()},disabled:!C},"<")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return O()},disabled:!x},">")," ",c.a.createElement(u.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return j(k-1)},disabled:!x},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,_+1," de ",N.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:_+1,onChange:function(e){var a=e.target.value?Number(e.target.value)-1:0;j(a)},className:"inputPage"},"onChange",(function(e){e.target.value>N.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:w,onChange:function(e){S(Number(e.target.value))},className:"inputPage"},s.map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}g.autoRemove=function(e){return!e};a.a=function(e){var a=e.data,t=e.columns,n=e.menuTop,r=e.headerColor,l=e.headerFontColor,o=e.pageSizeHandler;return o=o||[10,20,30,40,50],c.a.createElement(d,null,c.a.createElement(f,{pageSizeHandler:o,data:a,columns:t,menuTop:n,headerFontColor:l,headerColor:r}))}},612:function(e,a,t){},658:function(e,a,t){"use strict";var n=t(1),r=t.n(n),l=t(46),c=(t(310),r.a.forwardRef((function(e,a){var t=e.cols?e.cols:"col-md-6 col-sm-6";return"select"!==e.type&&"textarea"!==e.type?r.a.createElement(l.a.Group,{className:t},r.a.createElement(l.a.Label,{className:"fontBold"},e.label),r.a.createElement(l.a.Control,{ref:a,id:e.id?e.id:e.name,type:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,readOnly:!!e.readonly&&e.readonly,step:e.step?e.step:"",onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){},className:e.className?e.className+" form-control-sm mainBorder":"form-control-sm mainBorder",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"}),r.a.createElement(l.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return r.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):"select"===e.type?r.a.createElement(l.a.Group,{className:t},r.a.createElement(l.a.Label,{className:"fontBold"},e.label),r.a.createElement(l.a.Control,{id:e.id?e.id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",readOnly:!!e.readonly&&e.readonly,required:e.required,multiple:!!e.multiple&&e.multiple,ref:a||null,className:e.className?e.className+" form-control-sm mainBorder":"form-control-sm mainBorder",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"},e.children),r.a.createElement(l.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return r.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):"textarea"===e.type?r.a.createElement(l.a.Group,{className:t},r.a.createElement(l.a.Label,{className:"fontBold"},e.label),r.a.createElement(l.a.Control,{id:e.id?e.id:e.name,as:e.type,name:e.name,onChange:e.handleChange,value:e.value,placeholder:e.placeholder?e.placeholder:"",required:e.required,rows:e.rows?e.rows:2,readOnly:!!e.readonly&&e.readonly,onKeyUp:e.handleKeyUp?e.handleKeyUp:function(){},ref:a||null,className:e.className?e.className+" form-control-sm mainBorder":"form-control-sm mainBorder",style:e.style?e.style:{},autoComplete:e.autoComplete?e.autoComplete:"xxx"}),r.a.createElement(l.a.Control.Feedback,{type:"invalid"},e.messageErrors.map((function(e,a){return r.a.createElement("span",{key:a,className:"error-input"},e.replace(/[*]$/g,""))})))):void 0})));a.a=c},798:function(e,a,t){"use strict";t.r(a);var n=t(89),r=t(47),l=t(18),c=t(15),o=t(1),i=t.n(o),s=t(614),u=t(613),m=t(609),d=t(633),p=t(599),g=t(608),f=t(598),b=t(197),E=t(46),h=t(301),v=t(831),y=t(77),C=t(611),x=t(9),N=t.n(x),k=t(10),j=t(658),O=t(31),P=t(8),S=t(615),z=t(28),_=t(17),w=(t(612),[]),F=[],H=[];a.default=Object(z.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise,configGeneral:e.configs.config}}),{})((function(e){var a=Object(o.useState)([]),t=Object(c.a)(a,2),x=t[0],z=t[1],B=Object(o.useState)(!0),L=Object(c.a)(B,2),T=L[0],G=L[1],I=Object(o.useState)(!1),q=Object(c.a)(I,2),M=q[0],R=q[1],U=Object(o.useState)([]),A=Object(c.a)(U,2),D=A[0],K=A[1],V=Object(o.useState)([]),$=Object(c.a)(V,2),J=$[0],W=$[1],Q=Object(o.useState)(!1),X=Object(c.a)(Q,2),Y=X[0],Z=X[1],ee=Object(o.useState)({tax:19}),ae=Object(c.a)(ee,2),te=ae[0],ne=ae[1],re=Object(o.useState)({name:"",status:!0,id:""}),le=Object(c.a)(re,2),ce=le[0],oe=le[1],ie=Object(o.useRef)(null);Object(o.useEffect)((function(){T||G(!0),ue(!0)}),[e.id_branch_office,e.id_enterprise]),w=Object(o.useMemo)((function(){return[{Header:"Nombre",accessor:"name"},{Header:"Estado",accessor:function(e){return e.status?["Activa"]:["Desactivada"]}},{Header:"Cantidad Productos",accesor:function(e){return[e.details.length]},Cell:function(e){var a=e.cell.row.original;return i.a.createElement(s.a,{placement:"right",overlay:i.a.createElement(u.a,{id:"tooltip-disabled2"},a.details.map((function(e,a){return i.a.createElement("ul",{className:"list-group"},i.a.createElement("li",{className:"list-group-item"},i.a.createElement("b",null,"Producto: "),e.products.name_product,i.a.createElement("br",null),i.a.createElement("b",null,"Precio: "),e.price))})))},i.a.createElement(m.a,{variant:"danger",className:"font-badge"},a.details.length))}},{Header:"Acciones",Cell:function(e){var a=e.cell.row.original;return i.a.createElement(d.a,{size:"sm",id:"drop"+a.id,title:"Seleccione",drop:"left",block:"true"},i.a.createElement(p.a.Item,{onClick:function(){me(a)}},"Modificar"),i.a.createElement(p.a.Item,{onClick:function(){de(a)}},"Agregar Detalles"),i.a.createElement(p.a.Item,{onClick:function(){pe(a)}},"Eliminar"))}}]}),[]);var se=Object(o.useMemo)((function(){return[{Header:"Producto",accessor:"name_product"},{Header:"Precio",accessor:function(e){return[e.price]},Cell:function(e){var a=e.cell.row.original,t=a.price;return i.a.createElement("input",{className:"form-control text-center",type:"text",value:t,onChange:function(t){return ye(e.row.id,t,a.id)}})}},{Header:"Precio con iva",accessor:function(e){return[parseFloat(e.price)*parseFloat(te.tax)/100+parseFloat(e.price)]},Cell:function(a){var t=a.cell.row.original;return i.a.createElement(m.a,{variant:"danger",className:"font-badge"},Object(_.g)(e.configGeneral,parseFloat(t.price)*parseFloat(te.tax)/100+parseFloat(t.price),2,",",".")," ",e.configGeneral?e.configGeneral.simbolo_moneda:"")}},{Header:"Seleccionar",Cell:function(e){var a=e.cell.row.original;return i.a.createElement("div",null,i.a.createElement("label",{className:"form-check"},i.a.createElement("input",{onChange:Ce,className:"form-check-input",type:"checkbox",value:a.id,checked:J.find((function(e){return e.id_product===a.id}))})))}}]}),[J]),ue=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[N.a.get(k.b+"listProduct")];a&&t.push(N.a.get(k.b+"product"),N.a.get(k.b+"config_store")),Promise.all(t).then((function(e){z(e[0].data),a&&(K(e[1].data),F=e[1].data,H=e[1].data,ne(e[2].data)),G(!1)})).catch((function(a){G(!1),e.tokenExpired(a)}))},me=function(e){oe(Object(l.a)(Object(l.a)({},ce),{},{name:e.name,status:e.status,id:e.id})),ie.current.focus()},de=function(a){e.history.replace("/product/listProduct/"+a.id)},pe=function(e){Object(S.confirmAlert)({customUI:function(a){var t=a.onClose;return i.a.createElement("div",{className:"custom-ui-edit"},i.a.createElement("h1",null,"\xbfEsta seguro?"),i.a.createElement("p",{className:"font-alert"},"\xbfDesea realmente borrar este registro?"),i.a.createElement("button",{className:"button-alert",onClick:function(){ge(e.id),t()}},"Si, Aceptar"),i.a.createElement("button",{className:"button-alert",onClick:t},"No"))}})},ge=function(a){G(!0),N.a.delete(k.b+"listProduct/"+a).then((function(e){P.b.success("Lista eliminada con \xe9xito"),z((function(e){return e.filter((function(e){return e.id!=a}))})),G(!1)})).catch((function(a){e.tokenExpired(a),G(!1)}))},fe=function(e){oe(Object(l.a)(Object(l.a)({},ce),{},Object(r.a)({},e.target.name,"status"===e.target.name?e.target.checked:e.target.value)))},be=function(){var a=Object.assign({},ce,{productsList:J.map((function(e){return e.price=D[e.index].price,e}))}),t=a.id?k.b+"listProduct/"+a.id:k.b+"listProduct";(a.id?N.a.put(t,a):N.a.post(t,a)).then((function(e){P.b.success("Lista ".concat(a.id?"modificada":"creada"," con \xe9xito")),a.id?he():Ee(),ue(),G(!1)})).catch((function(a){e.tokenExpired(a),G(!1)}))},Ee=function(){oe({name:"",status:!0,id:""}),W([]),K(F),xe(),ie.current.focus()},he=function(){oe({name:"",status:!0,id:""}),ie.current.focus()},ve=function(e){if(e){var a=[];D.forEach((function(e,t){return a.push({id_product:parseInt(e.id),price:e.price,index:t})})),W(a)}else W([])},ye=function(e,a,t){var n=a.target.value.replace(/[^0-9 .]/g,"");H[e].price=n},Ce=function(e){var a;(e.persist(),e.target.checked)?(F.forEach((function(t,n){t.id==e.target.value&&(a={id_product:parseInt(e.target.value),price:t.price,index:n})})),W((function(e){return[].concat(Object(n.a)(e),[a])}))):W((function(a){return a.filter((function(a){return a.id_product!==parseInt(e.target.value)}))}))},xe=function(){Z(!Y)};return i.a.createElement(g.a,{fluid:!0},T?i.a.createElement(y.a,null):i.a.createElement(f.a,null,i.a.createElement(b.a,null,i.a.createElement(f.a,null,i.a.createElement(b.a,{className:"text-center"},i.a.createElement("h4",{className:"title_principal"},"Lista de Productos")),i.a.createElement(b.a,{className:"text-center"},i.a.createElement("h4",{className:"title_principal"},"Total Listas ",i.a.createElement(m.a,{variant:"danger",className:"font-badge"},x.length)))),i.a.createElement(f.a,null,i.a.createElement(b.a,null,i.a.createElement(E.a,{onSubmit:function(e){var a=e.currentTarget;if(e.preventDefault(),!1===a.checkValidity())return e.stopPropagation(),void R(!0);ce.id?be():xe()},noValidate:!0,validated:M},i.a.createElement(f.a,{className:"justify-content-center"},i.a.createElement(j.a,{type:"text",name:"name",ref:ie,label:"Nombre de la lista",required:!0,value:ce.name,handleChange:fe,messageErrors:["Requerido*"],cols:"col-md-4 col-sm-4 col-lg-4"}),i.a.createElement(b.a,{sm:4,md:4,lg:4},i.a.createElement(f.a,null,i.a.createElement(b.a,{className:"text-center"},i.a.createElement(E.a.Label,null,"Status"))),i.a.createElement(E.a.Group,{className:"text-center"},i.a.createElement(E.a.Check,{name:"status",type:"checkbox",id:"radio-5",label:"Activo",required:!1,checked:ce.status,onChange:fe})))),i.a.createElement(f.a,{className:"justify-content-center"},i.a.createElement(b.a,{sm:4,md:4,lg:4},i.a.createElement(h.a,{variant:"danger",block:!0,size:"sm",type:"submit"},"Crear Lista ",i.a.createElement(O.F,null))),ce.id?i.a.createElement(b.a,{sm:4,md:4,lg:4},i.a.createElement(h.a,{variant:"secondary",block:!0,size:"sm",type:"button",onClick:he},"Cancelar Edici\xf3n")):"")))),i.a.createElement(f.a,null,i.a.createElement(b.a,null,i.a.createElement(C.a,{columns:w,data:x}))))),i.a.createElement(v.a,{show:Y,onHide:xe,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},i.a.createElement(v.a.Header,{closeButton:!0,className:"header_dark"},i.a.createElement(v.a.Title,{id:"contained-modal-title-vcenter"},"Productos disponibles para la lista")),i.a.createElement(v.a.Body,null,i.a.createElement(f.a,{className:"justify-content-center"},i.a.createElement(b.a,{sm:4,md:4,lg:4,xl:4},i.a.createElement(h.a,{block:!0,variant:"primary",size:"sm",onClick:function(){return ve(!0)}},"Seleccionar todos")),i.a.createElement(b.a,{sm:4,md:4,lg:4,xl:4},i.a.createElement(h.a,{block:!0,variant:"secondary",size:"sm",onClick:function(){return ve(!1)}},"Deseleccionar todos")),i.a.createElement(b.a,{sm:4,md:4,lg:4,xl:4},i.a.createElement(h.a,{variant:"danger",size:"sm",block:!0,type:"button",onClick:be},"Guardar"))),i.a.createElement(f.a,null,i.a.createElement(b.a,null,i.a.createElement(C.a,{columns:se,data:D,pageSizeHandler:[500,1e3]}))),i.a.createElement("br",null)),i.a.createElement(v.a.Footer,null,i.a.createElement(h.a,{variant:"danger",size:"md",onClick:xe},"Cerrar"))))}))}}]);
//# sourceMappingURL=45.a3edc76f.chunk.js.map