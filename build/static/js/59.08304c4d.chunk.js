(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[59],{613:function(e,t,a){"use strict";var n=a(2),r=a(4),o=a(6),c=a.n(o),i=a(1),l=a.n(i),s=(a(307),a(7)),u=l.a.forwardRef((function(e,t){var a=e.bsPrefix,o=e.placement,i=e.className,u=e.style,d=e.children,p=e.arrowProps,f=(e.popper,e.show,Object(r.a)(e,["bsPrefix","placement","className","style","children","arrowProps","popper","show"]));a=Object(s.a)(a,"tooltip");var m=((null==o?void 0:o.split("-"))||[])[0];return l.a.createElement("div",Object(n.a)({ref:t,style:u,role:"tooltip","x-placement":m,className:c()(i,a,"bs-tooltip-"+m)},f),l.a.createElement("div",Object(n.a)({className:"arrow"},p)),l.a.createElement("div",{className:a+"-inner"},d))}));u.defaultProps={placement:"right"},u.displayName="Tooltip",t.a=u},614:function(e,t,a){"use strict";var n=a(2),r=a(4),o=a(19),c=a(202),i=a(1),l=a.n(i),s=a(621),u=a(200),d=(a(97),a(63)),p=a(6),f=a.n(p),m=a(3),b=a.n(m),h=a(42),g=a.n(h),v=a(121),E=a(56),O=a(207),j=a(208),_=a(209),y=a(624),w=a(203),C=l.a.forwardRef((function(e,t){var a=e.flip,o=e.offset,c=e.placement,s=e.containerPadding,u=void 0===s?5:s,d=e.popperConfig,p=void 0===d?{}:d,f=e.transition,m=Object(v.a)(),b=m[0],h=m[1],O=Object(v.a)(),C=O[0],k=O[1],S=Object(E.a)(h,t),x=Object(y.a)(e.container),P=Object(y.a)(e.target),T=Object(i.useState)(!e.show),D=T[0],N=T[1],H=Object(j.a)(P,b,Object(w.a)({placement:c,enableEvents:!!e.show,containerPadding:u||5,flip:a,offset:o,arrowElement:C,popperConfig:p})),A=H.styles,R=H.attributes,B=Object(r.a)(H,["styles","attributes"]);e.show?D&&N(!1):e.transition||D||N(!0);var F=e.show||f&&!D;if(Object(_.a)(b,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!F)return null;var M=e.children(Object(n.a)({},B,{show:!!e.show,props:Object(n.a)({},R.popper,{style:A.popper,ref:S}),arrowProps:Object(n.a)({},R.arrow,{style:A.arrow,ref:k})}));if(f){var z=e.onExit,q=e.onExiting,G=e.onEnter,Y=e.onEntering,I=e.onEntered;M=l.a.createElement(f,{in:e.show,appear:!0,onExit:z,onExiting:q,onExited:function(){N(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:G,onEntering:Y,onEntered:I},M)}return x?g.a.createPortal(M,x):null}));C.displayName="Overlay",C.propTypes={show:b.a.bool,placement:b.a.oneOf(O.b),target:b.a.any,container:b.a.any,flip:b.a.bool,children:b.a.func.isRequired,containerPadding:b.a.number,popperConfig:b.a.object,rootClose:b.a.bool,rootCloseEvent:b.a.oneOf(["click","mousedown"]),rootCloseDisabled:b.a.bool,onHide:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r;return e.rootClose?(r=b.a.func).isRequired.apply(r,[e].concat(a)):b.a.func.apply(b.a,[e].concat(a))},transition:b.a.elementType,onEnter:b.a.func,onEntering:b.a.func,onEntered:b.a.func,onExit:b.a.func,onExiting:b.a.func,onExited:b.a.func};var k=C,S=a(205),x=a(616),P={transition:x.a,rootClose:!1,show:!1,placement:"top"};function T(e){var t=e.children,a=e.transition,o=e.popperConfig,c=void 0===o?{}:o,s=Object(r.a)(e,["children","transition","popperConfig"]),d=Object(i.useRef)({}),p=Object(S.a)(),m=p[0],b=p[1],h=!0===a?x.a:a||null;return l.a.createElement(k,Object(n.a)({},s,{ref:m,popperConfig:Object(n.a)({},c,{modifiers:b.concat(c.modifiers||[])}),transition:h}),(function(e){var o,c=e.props,i=e.arrowProps,s=e.show,p=e.update,m=(e.forceUpdate,e.placement),b=e.state,h=Object(r.a)(e,["props","arrowProps","show","update","forceUpdate","placement","state"]);!function(e,t){var a=e.ref,n=t.ref;e.ref=a.__wrapped||(a.__wrapped=function(e){return a(Object(u.a)(e))}),t.ref=n.__wrapped||(n.__wrapped=function(e){return n(Object(u.a)(e))})}(c,i);var g=Object.assign(d.current,{state:b,scheduleUpdate:p,placement:m,outOfBoundaries:(null==b||null==(o=b.modifiersData.hide)?void 0:o.isReferenceHidden)||!1});return"function"===typeof t?t(Object(n.a)({},h,{},c,{placement:m,show:s,popper:g,arrowProps:i})):l.a.cloneElement(t,Object(n.a)({},h,{},c,{placement:m,arrowProps:i,popper:g,className:f()(t.props.className,!a&&s&&"show"),style:Object(n.a)({},t.props.style,{},c.style)}))}))}T.defaultProps=P;var D=T,N=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){return this.props.children},t}(l.a.Component);function H(e,t,a){var n=t[0],r=n.currentTarget,o=n.relatedTarget||n.nativeEvent[a];o&&o===r||Object(c.a)(r,o)||e.apply(void 0,t)}function A(e){var t=e.trigger,a=e.overlay,o=e.children,c=e.popperConfig,p=void 0===c?{}:c,f=e.show,m=e.defaultShow,b=void 0!==m&&m,h=e.onToggle,g=e.delay,v=e.placement,E=e.flip,O=void 0===E?v&&-1!==v.indexOf("auto"):E,j=Object(r.a)(e,["trigger","overlay","children","popperConfig","show","defaultShow","onToggle","delay","placement","flip"]),_=Object(i.useRef)(null),y=Object(s.a)(),w=Object(i.useRef)(""),C=Object(d.b)(f,b,h),k=C[0],S=C[1],x=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(g),P="function"!==typeof o?l.a.Children.only(o).props:{},T=P.onFocus,A=P.onBlur,R=P.onClick,B=Object(i.useCallback)((function(){return Object(u.a)(_.current)}),[]),F=Object(i.useCallback)((function(){y.clear(),w.current="show",x.show?y.set((function(){"show"===w.current&&S(!0)}),x.show):S(!0)}),[x.show,S,y]),M=Object(i.useCallback)((function(){y.clear(),w.current="hide",x.hide?y.set((function(){"hide"===w.current&&S(!1)}),x.hide):S(!1)}),[x.hide,S,y]),z=Object(i.useCallback)((function(){F();for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];null==T||T.apply(void 0,t)}),[F,T]),q=Object(i.useCallback)((function(){M();for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];null==A||A.apply(void 0,t)}),[M,A]),G=Object(i.useCallback)((function(){S(!k),R&&R.apply(void 0,arguments)}),[R,S,k]),Y=Object(i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];H(F,t,"fromElement")}),[F]),I=Object(i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];H(M,t,"toElement")}),[M]),L=null==t?[]:[].concat(t),U={};return-1!==L.indexOf("click")&&(U.onClick=G),-1!==L.indexOf("focus")&&(U.onFocus=z,U.onBlur=q),-1!==L.indexOf("hover")&&(U.onMouseOver=Y,U.onMouseOut=I),l.a.createElement(l.a.Fragment,null,"function"===typeof o?o(Object(n.a)({},U,{ref:_})):l.a.createElement(N,{ref:_},Object(i.cloneElement)(o,U)),l.a.createElement(D,Object(n.a)({},j,{show:k,onHide:M,flip:O,placement:v,popperConfig:p,target:B}),a))}A.defaultProps={defaultShow:!1,trigger:["hover","focus"]};t.a=A},621:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1),r=a(211),o=a(650),c=Math.pow(2,31)-1;function i(){var e=Object(r.a)(),t=Object(n.useRef)();return Object(o.a)((function(){return clearTimeout(t.current)})),Object(n.useMemo)((function(){var a=function(){return clearTimeout(t.current)};return{set:function(n,r){void 0===r&&(r=0),e()&&(a(),r<=c?t.current=setTimeout(n,r):function e(t,a,n){var r=n-Date.now();t.current=r<=c?setTimeout(a,r):setTimeout((function(){return e(t,a,n)}),c)}(t,n,Date.now()+r))},clear:a}}),[])}},807:function(e,t,a){"use strict";a.r(t);var n=a(47),r=a(18),o=a(15),c=a(1),i=a.n(c),l=a(9),s=a.n(l),u=a(301),d=a(609),p=a(608),f=a(598),m=a(197),b=a(833),h=a(46),g=a(8),v=a(10),E=a(611),O=(a(615),a(17)),j=a(694),_=a(676),y=a(157),w=a(88),C=(a(612),a(659)),k=a(28),S=a(50),x=a(613),P=a(614),T=a(77),D=[],N={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0},H={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]};t.default=Object(k.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise,config:e.configs.config,configStore:e.configs.configStore}}),{})((function(e){var t=Object(c.useState)(!0),a=Object(o.a)(t,2),l=a[0],k=a[1],A=Object(c.useState)([]),R=Object(o.a)(A,2),B=R[0],F=R[1],M=Object(c.useState)(!1),z=Object(o.a)(M,2),q=z[0],G=z[1],Y=Object(c.useState)({}),I=Object(o.a)(Y,2),L=I[0],U=I[1],V=Object(c.useState)(!1),J=Object(o.a)(V,2),K=J[0],Q=J[1],W=Object(c.useState)(!1),X=Object(o.a)(W,2),Z=X[0],$=X[1],ee=Object(c.useState)({status_dispatch:"",description_dispatch:"",dispatch:{}}),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],re=Object(c.useState)(!1),oe=Object(o.a)(re,2),ce=oe[0],ie=oe[1],le=Object(c.useState)(!1),se=Object(o.a)(le,2),ue=se[0],de=se[1],pe=Object(c.useState)([]),fe=Object(o.a)(pe,2),me=fe[0],be=fe[1],he=Object(c.useState)(!1),ge=Object(o.a)(he,2),ve=ge[0],Ee=ge[1],Oe=Object(c.useState)(null),je=Object(o.a)(Oe,2),_e=je[0],ye=je[1];Object(c.useEffect)((function(){return Se(),S.a.toggleCollapsed(),function(){S.a.toggleCollapsed(),D=[],Ne()}}),[e.id_branch_office]),Object(c.useEffect)((function(){we(),setTimeout((function(){de(!1)}),3e3)}),[me]),Object(c.useMemo)((function(){D=[{Header:"Referencia",accessor:"ref",Cell:function(e){var t=e.cell.row.original;return i.a.createElement(P.a,{placement:"bottom",overlay:i.a.createElement(x.a,{id:"tooltip-disabled2"},"Hacer click para cambiar el status")},i.a.createElement(u.a,{variant:"link",size:"sm",onClick:function(){return Ce(t)}},t.ref))}},{Header:"Cliente",accessor:function(e){return e.client?[e.client.name_client+" "+e.client.data_document]:[]}},{Header:"Total",accessor:"total",Cell:function(e){return Object(O.g)(e.config,e.cell.row.original.total)}},{Header:"Status de Entrega",accessor:function(e){return 1==e.status_dispatch?["Sin entregar"]:2==e.status_dispatch?["Entregado"]:3==e.status_dispatch?["Se llevo sin recepci\xf3n"]:4==e.status_dispatch?["Retiro en Local"]:5==e.status_dispatch?["Anulado"]:["Otro"]},Cell:function(e){var t=e.cell.row.original,a="";return a=1==t.status_dispatch?"Sin entregar":2==t.status_dispatch?"Entregado":3==t.status_dispatch?"Se llevo sin recepci\xf3n":4==t.status_dispatch?"Retiro en Local":5==t.status_dispatch?"Anulado":"Otro",t.status_dispatch>=5?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{variant:"danger",className:"font-badge"},a),i.a.createElement("br",null),i.a.createElement("b",null,"Motivo:")," ",t.description_dispatch):i.a.createElement(d.a,{variant:"danger",className:"font-badge"},a)}},{Header:"Status de Pago",accessor:function(e){return 1==e.status_payment_dispatch?["En espera"]:2==e.status_payment_dispatch?["Pedido Guardado"]:3==e.status_payment_dispatch?["Pagado"]:4==e.status_payment_dispatch?["Anulado"]:void 0},Cell:function(e){var t=e.cell.row.original,a="";return 1==t.status_payment_dispatch?a="En espera":2==t.status_payment_dispatch?a="Pedido Guardado":3==t.status_payment_dispatch?a="Pagado":4==t.status_payment_dispatch&&(a="Anulado"),i.a.createElement(d.a,{variant:"secondary",className:"font-badge"},a)}},{Header:"Fecha",accessor:function(t){return[y(e.createdAt).format("DD-MM-YYYY")]}},{Header:"Acciones",Cell:function(e){var t=e.cell.row.original;return i.a.createElement(u.a,{variant:"primary",block:!0,size:"sm",onClick:function(){return Te(t)}},"Acciones")}}]}));var we=function(){me.forEach((function(e,t){H.labels.push(e.name),H.datasets[0].data.push(parseFloat(e.total)),H.datasets[0].backgroundColor.push(v.c[t]),H.datasets[0].hoverBackgroundColor.push(v.c[t])})),setTimeout((function(){de(!0)}),1500)},Ce=function(e){xe(),ne(Object(r.a)(Object(r.a)({},ae),{},{dispatch:e}))},ke=function(e){var t;parseInt(e.target.value,10)<5?ne(Object(r.a)(Object(r.a)({},ae),{},(t={},Object(n.a)(t,e.target.name,e.target.value),Object(n.a)(t,"description_dispatch",""),t))):ne(Object(r.a)(Object(r.a)({},ae),{},Object(n.a)({},e.target.name,e.target.value)))},Se=function(){var t=[s.a.get(v.b+"sale_by_dispatch"),s.a.get(v.b+"sale_dispatch_stadistics")];Promise.all(t).then((function(e){console.log(e[0].data,"aqui flaco malvado"),F(e[0].data),be(e[1].data.delivery),k(!1)})).catch((function(t){k(!1),e.tokenExpired(t)}))},xe=function(){$(!Z)},Pe=function(){Ee(!ve)},Te=function(e){ye(e),Pe()},De=function(){ne({status_dispatch:"",description_dispatch:"",dispatch:{}})},Ne=function(){H={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]}};return i.a.createElement(p.a,{fluid:!0},i.a.createElement(f.a,null,i.a.createElement(m.a,{sm:6,md:6,lg:6}),i.a.createElement(m.a,{sm:6,md:6,lg:6},i.a.createElement("h5",null,"Totales por Status de Entrega"))),i.a.createElement(f.a,null,i.a.createElement(m.a,{sm:4,md:4,lg:4},i.a.createElement("h4",{className:"title_principal"},"Tabla de Despachos")),i.a.createElement(m.a,{sm:8,md:8,lg:8},i.a.createElement(C.b,{data:H,redraw:ue,options:N}))),i.a.createElement("hr",null),l?i.a.createElement(T.a,null):i.a.createElement(f.a,null,i.a.createElement(m.a,{sm:12,md:12,lg:12,xs:12,className:"containerDiv"},i.a.createElement(E.a,{columns:D,data:B}))),i.a.createElement(j.a,{isShow:q,onHide:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];G(!1),e&&(Pe(),Ne(),Se())},config:e.config,configStore:e.configStore,dataToPay:L,isDispatch:!0}),e.config&&e.configStore?i.a.createElement(_.a,{isShow:K,onHide:function(){return Q(!1)},config:e.config,configStore:e.configStore,dataSale:L,isDispatch:!0}):"",i.a.createElement(b.a,{show:Z,onHide:xe,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},i.a.createElement(b.a.Header,{closeButton:!0,className:"header_dark"},i.a.createElement(b.a.Title,{id:"contained-modal-title-vcenter"},"Cambiar Status del Despacho ",Object.keys(ae.dispatch).length>0?ae.dispatch.ref:"")),i.a.createElement(h.a,{onSubmit:function(t){var a=t.currentTarget;if(t.preventDefault(),!1===a.checkValidity())return t.stopPropagation(),void ie(!0);var n=Object.assign({},ae);k(!0),s.a.put(v.b+"sale_dispatch_status_delivery/"+n.dispatch.id,n).then((function(e){g.b.success("Status Modificado"),De(),xe(),Ne(),Se()})).catch((function(t){k(!1),e.tokenExpired(t)}))},noValidate:!0,validated:ce},i.a.createElement(b.a.Body,null,i.a.createElement(f.a,{className:"justify-content-center"},i.a.createElement(w.a,{type:"select",name:"status_dispatch",required:!0,label:"Status del Despacho",cols:"col-md-6 col-sm-6 col-lg-6",value:ae.status_dispatch,handleChange:ke,messageErrors:["Requerido*"]},i.a.createElement("option",{value:""},"--Seleccione--"),i.a.createElement("option",{value:"1"},"Sin Entregar"),i.a.createElement("option",{value:"2"},"Entregado"),i.a.createElement("option",{value:"3"},"Se llevo sin Recepci\xf3n"),i.a.createElement("option",{value:"4"},"Retiro  en el Local"),i.a.createElement("option",{value:"5"},"Anulado"),i.a.createElement("option",{value:"6"},"Otro"))),6==ae.status_dispatch||5==ae.status_dispatch?i.a.createElement(f.a,{className:"justify-content-center"},i.a.createElement(w.a,{type:"textarea",name:"description_dispatch",required:!0,label:"Ingrese una Descripci\xf3n o Motivo",cols:"col-md-6 col-sm-6 col-lg-6",value:ae.description_dispatch,handleChange:ke,messageErrors:[]})):""),i.a.createElement(b.a.Footer,null,i.a.createElement(u.a,{variant:"primary",type:"submit"},"Guardar"),i.a.createElement(u.a,{variant:"danger",onClick:xe},"Cerrar")))),i.a.createElement(b.a,{show:ve,onHide:Pe,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},i.a.createElement(b.a.Header,{closeButton:!0,className:"header_dark"},i.a.createElement(b.a.Title,{id:"contained-modal-title-vcenter"},_e?"Acciones para el despacho N\xba ".concat(_e.ref):"")),i.a.createElement(b.a.Body,null,_e&&!l?i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{className:"justify-content-center"},5!=_e.status_dispatch&&3!=_e.status_payment_dispatch?i.a.createElement(m.a,{sm:3,md:3,lg:3,xl:3},i.a.createElement(u.a,{block:!0,size:"sm",variant:"secondary",onClick:function(){return U(_e),void G(!0)}},"Pagar Despacho")):"",5!=_e.status_dispatch&&1==_e.status_payment_dispatch?i.a.createElement(m.a,{sm:3,md:3,lg:3,xl:3},i.a.createElement(u.a,{block:!0,size:"sm",variant:"secondary",onClick:function(){return t=_e,k(!0),void s.a.put(v.b+"sale_storage_dispatch/"+t.id).then((function(e){g.b.success("Despacho Guardado"),Pe(),Ne(),Se()})).catch((function(t){k(!1),e.tokenExpired(t)}));var t}},"Guardar Despacho")):"",3==_e.status_payment_dispatch?i.a.createElement(m.a,{sm:3,md:3,lg:3,xl:3},i.a.createElement(u.a,{block:!0,size:"sm",variant:"secondary",onClick:function(){return function(t){t.ref;k(!0),s.a.get(v.b+"sale_print_invoice_history/"+t.ref).then((function(a){t.voucher?s.a.get(v.b+"invoice_print/"+a.data.id+"/2/2").then((function(e){window.open(v.b+"documents/sale_note/files_pdf/"+e.data.name),k(!1)})).catch((function(t){k(!1),e.tokenExpired(t)})):(k(!1),window.open(a.data.pdf_public_url_bill,"_blank"))})).catch((function(t){k(!1),e.tokenExpired(t)}))}(_e)}},"Imprimir Factura")):"",i.a.createElement(m.a,{sm:3,md:3,lg:3,xl:3},i.a.createElement(u.a,{block:!0,size:"sm",variant:"secondary",onClick:function(){return U(_e),void Q(!0)}},"Ver detalles")),i.a.createElement(m.a,{sm:3,md:3,lg:3,xl:3},i.a.createElement(u.a,{block:!0,variant:"secondary",size:"sm",onClick:function(){return Ce(_e)}},"Cambiar Status de Entrega")))):i.a.createElement(T.a,null)),i.a.createElement(b.a.Footer,null,i.a.createElement(u.a,{variant:"danger",onClick:Pe},"Cerrar"))))}))}}]);
//# sourceMappingURL=59.08304c4d.chunk.js.map