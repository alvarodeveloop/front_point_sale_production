{"version":3,"sources":["assets/img/utils/empty_logo.jpg","pages/ConfigAidyPage.jsx"],"names":["module","exports","ConfigAidyPage","props","useState","img_login","api_key_nuxo","rut_nuxo","password_nuxo","file_img_login","base64LoginImg","bussines_name","address","email","formData","setFormData","validated","setValidated","displayLoading","setDisplayLoading","useEffect","fetchData","displayImgLogin","axios","get","API_URL","then","result","data","dv_nuxo","catch","err","tokenExpired","src","id","style","width","height","roundedCircle","require","onChange","e","target","name","formatRut","value","sm","md","lg","onSubmit","form","currentTarget","preventDefault","checkValidity","stopPropagation","formDataPost","FormData","objectNew","Object","assign","keys","forEach","v","i","append","post","toast","success","noValidate","className","variant","block","type","size","onClick","document","getElementById","click","file","files","reader","FileReader","onload","event","readAsDataURL","display","label","required","messageErrors","cols","handleChange"],"mappings":"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","file":"static/js/58.79dd67cf.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/empty_logo.258d3697.jpg\";","import React, {useState,useEffect} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Form,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Container,\r\n  Image,\r\n} from 'react-bootstrap'\r\nimport InputField from 'components/input/InputComponent'\r\nimport {FaRegPaperPlane} from 'react-icons/fa'\r\nimport axios from 'axios'\r\nimport {API_URL} from 'utils/constants'\r\nimport {toast} from 'react-toastify'\r\nimport {formatRut} from 'utils/functions'\r\nimport LoadingComponent from 'components/LoadingComponent'\r\n\r\nconst ConfigAidyPage = (props) => {\r\n\r\n  const [formData,setFormData] = useState({\r\n    img_login: '',\r\n    api_key_nuxo : '',\r\n    rut_nuxo : '',\r\n    password_nuxo: '',\r\n    file_img_login : '',\r\n    base64LoginImg: '',\r\n    bussines_name: '',\r\n    address: '',\r\n    email: '',\r\n  })\r\n  const [validated, setValidated] = useState(false)\r\n  const [displayLoading, setDisplayLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n  },[])\r\n\r\n  useEffect(() => {\r\n    displayImgLogin()\r\n  },[formData.base64LoginImg])\r\n\r\n  const fetchData = () => {\r\n    axios.get(API_URL+'config_aidy').then(result => {\r\n      setFormData({\r\n        img_login : result.data.img_login,\r\n        api_key_nuxo : result.data.api_key_nuxo,\r\n        rut_nuxo : result.data.rut_nuxo+\"-\"+result.data.dv_nuxo,\r\n        password_nuxo : result.data.password_nuxo,\r\n      })\r\n      setDisplayLoading(false)\r\n    }).catch(err => {\r\n      setDisplayLoading(false)\r\n       props.tokenExpired(err)\r\n    })\r\n  }\r\n\r\n  const displayImgLogin = () => {\r\n    if(formData.base64LoginImg){\r\n      return (\r\n        <Image src={formData.base64LoginImg}\r\n          id=\"img_show\" style={{ width: '100px',height: '100px' }} roundedCircle\r\n        />\r\n      )\r\n    }else if(!formData.img_login){\r\n      return (\r\n        <Image src={  require('../assets/img/utils/empty_logo.jpg') }\r\n          id=\"imagen_logo\" style={{ width: '80px' }} roundedCircle\r\n        />\r\n      )\r\n    }else{\r\n      if(formData.img_login){\r\n        return (\r\n          <Image src={API_URL+'images/aidy/'+formData.img_login}\r\n            id=\"img_show\" style={{ width: '100px',height: '100px' }} roundedCircle\r\n          />\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  const onChange = e => {\r\n    setFormData({...formData, [e.target.name] : e.target.name === \"rut_nuxo\" ? formatRut(e.target.value) : e.target.value})\r\n  }\r\n\r\n  const openFileInput = () => {\r\n    document.getElementById('input_file_img_login').click()\r\n  }\r\n\r\n  const onChangeInputFile = e => {\r\n\r\n    let file = e.target.files[0];\r\n\r\n    let reader = new FileReader();\r\n    reader.onload = event => {\r\n      // The file's text will be printed here\r\n      document.getElementById('input_file_img_login').src = event.target.result\r\n\r\n      setFormData({...formData, file_img_login : file, base64LoginImg: event.target.result})\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  const onSubmit = e => {\r\n\r\n    const form = e.currentTarget;\r\n\r\n    e.preventDefault();\r\n    if (form.checkValidity() === false) {\r\n      e.stopPropagation();\r\n      setValidated(true);\r\n      return\r\n    }\r\n\r\n    let formDataPost = new FormData()\r\n\r\n    let objectNew = Object.assign({},formData)\r\n\r\n    Object.keys(objectNew).forEach((v,i) => {\r\n      if(v === 'file_img_login'){\r\n        formDataPost.append('img_login',objectNew[v])\r\n      }else if(v !== \"base64LoginImg\"){\r\n        formDataPost.append(v,objectNew[v])\r\n      }\r\n    })\r\n    setDisplayLoading(true)\r\n     axios.post(API_URL+'config_aidy',formDataPost).then(result => {\r\n      toast.success('Configuración guardada')\r\n      setDisplayLoading(false)\r\n     }).catch(err => {\r\n      setDisplayLoading(false)\r\n       props.tokenExpired(err)\r\n     })\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      {displayLoading ? (\r\n        <LoadingComponent />\r\n      ) : (\r\n        <Row>\r\n          <Col sm={12} md={12} lg={12}>\r\n            <Form onSubmit={onSubmit} noValidate validated={validated}>\r\n              <Row>\r\n                <Col sm={7} md={7} lg={7}>\r\n                  <h4 className=\"title_principal\">Formulario de configuración de aidy</h4>\r\n                </Col>\r\n                <Col sm={5} md={5} lg={5}>\r\n                  <Button variant=\"danger\" block={true} type=\"submit\" size=\"sm\">Guardar <FaRegPaperPlane /></Button>\r\n                </Col>\r\n              </Row>\r\n              <hr/>\r\n              <Row>\r\n                <Col sm={4} md={4} lg={4}>\r\n                  <br/>\r\n                  <Button variant=\"primary\" block={true} onClick={openFileInput} type=\"button\" size=\"sm\">Escoger imagen login</Button>\r\n                  <input type=\"file\" onChange={onChangeInputFile} style={{display: \"none\"}} id=\"input_file_img_login\" />\r\n                </Col>\r\n                <Col sm={4} md={4} lg={4} className=\"text-center\">\r\n                  {displayImgLogin()}\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <InputField\r\n                type='text'\r\n                label='Api Key Nuxo'\r\n                name='api_key_nuxo'\r\n                required={true}\r\n                messageErrors={[\r\n                'Requerido*'\r\n                ]}\r\n                cols='col-md-4 col-lg-4 col-sm-4'\r\n                value={formData.api_key_nuxo}\r\n                handleChange={onChange}\r\n                />\r\n                <InputField\r\n                type='text'\r\n                label='Rut Nuxo'\r\n                name='rut_nuxo'\r\n                required={true}\r\n                messageErrors={[\r\n                'Requerido*'\r\n                ]}\r\n                cols='col-md-4 col-lg-4 col-sm-4'\r\n                value={formData.rut_nuxo}\r\n                handleChange={onChange}\r\n                />\r\n                <InputField\r\n                type='password'\r\n                label='Password Nuxo'\r\n                name='password_nuxo'\r\n                required={true}\r\n                messageErrors={[\r\n                'Requerido*'\r\n                ]}\r\n                cols='col-md-4 col-lg-4 col-sm-4'\r\n                value={formData.password_nuxo}\r\n                handleChange={onChange}\r\n                />\r\n              </Row>\r\n              <Row>\r\n                <InputField\r\n                  type='text'\r\n                  label='Nombre de la empresa'\r\n                  name='bussines_name'\r\n                  required={true}\r\n                  messageErrors={[\r\n                  'Requerido*'\r\n                  ]}\r\n                  cols='col-md-4 col-lg-4 col-sm-4'\r\n                  value={formData.bussines_name}\r\n                  handleChange={onChange}\r\n                />\r\n                  <InputField\r\n                  type='text'\r\n                  label='Dirección'\r\n                  name='address'\r\n                  required={true}\r\n                  messageErrors={[\r\n                  'Requerido*'\r\n                  ]}\r\n                  cols='col-md-4 col-lg-4 col-sm-4'\r\n                  value={formData.address}\r\n                  handleChange={onChange}\r\n                />\r\n                  <InputField\r\n                  type='email'\r\n                  label='Email'\r\n                  name='email'\r\n                  required={true}\r\n                  messageErrors={[\r\n                  'Requerido* ','*Formato email requerido'\r\n                  ]}\r\n                  cols='col-md-4 col-lg-4 col-sm-4'\r\n                  value={formData.email}\r\n                  handleChange={onChange}\r\n                />\r\n              </Row>\r\n            </Form>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default ConfigAidyPage\r\n"],"sourceRoot":""}