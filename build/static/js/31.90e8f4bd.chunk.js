(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[31],{619:function(e,a,t){"use strict";var r=t(2),n=t(4),l=t(5),c=t.n(l),o=t(1),s=t.n(o),i=(t(312),t(7)),u=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.placement,o=e.className,u=e.style,d=e.children,m=e.arrowProps,p=(e.popper,e.show,Object(n.a)(e,["bsPrefix","placement","className","style","children","arrowProps","popper","show"]));t=Object(i.a)(t,"tooltip");var f=((null==l?void 0:l.split("-"))||[])[0];return s.a.createElement("div",Object(r.a)({ref:a,style:u,role:"tooltip","x-placement":f,className:c()(o,t,"bs-tooltip-"+f)},p),s.a.createElement("div",Object(r.a)({className:"arrow"},m)),s.a.createElement("div",{className:t+"-inner"},d))}));u.defaultProps={placement:"right"},u.displayName="Tooltip",a.a=u},620:function(e,a,t){"use strict";var r=t(2),n=t(4),l=t(19),c=t(105),o=t(1),s=t.n(o),i=t(632),u=t(209),d=(t(95),t(70)),m=t(5),p=t.n(m),f=t(3),b=t.n(f),g=t(35),E=t.n(g),h=t(96),O=t(63),v=t(217),j=t(218),y=t(219),_=t(216),C=t(214),w=s.a.forwardRef((function(e,a){var t=e.flip,l=e.offset,c=e.placement,i=e.containerPadding,u=void 0===i?5:i,d=e.popperConfig,m=void 0===d?{}:d,p=e.transition,f=Object(h.a)(),b=f[0],g=f[1],v=Object(h.a)(),w=v[0],x=v[1],N=Object(O.a)(g,a),k=Object(_.a)(e.container),S=Object(_.a)(e.target),F=Object(o.useState)(!e.show),q=F[0],M=F[1],D=Object(j.a)(S,b,Object(C.a)({placement:c,enableEvents:!!e.show,containerPadding:u||5,flip:t,offset:l,arrowElement:w,popperConfig:m})),P=D.styles,R=D.attributes,I=Object(n.a)(D,["styles","attributes"]);e.show?q&&M(!1):e.transition||q||M(!0);var T=e.show||p&&!q;if(Object(y.a)(b,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!T)return null;var A=e.children(Object(r.a)({},I,{show:!!e.show,props:Object(r.a)({},R.popper,{style:P.popper,ref:N}),arrowProps:Object(r.a)({},R.arrow,{style:P.arrow,ref:x})}));if(p){var B=e.onExit,G=e.onExiting,z=e.onEnter,J=e.onEntering,H=e.onEntered;A=s.a.createElement(p,{in:e.show,appear:!0,onExit:B,onExiting:G,onExited:function(){M(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:z,onEntering:J,onEntered:H},A)}return k?E.a.createPortal(A,k):null}));w.displayName="Overlay",w.propTypes={show:b.a.bool,placement:b.a.oneOf(v.b),target:b.a.any,container:b.a.any,flip:b.a.bool,children:b.a.func.isRequired,containerPadding:b.a.number,popperConfig:b.a.object,rootClose:b.a.bool,rootCloseEvent:b.a.oneOf(["click","mousedown"]),rootCloseDisabled:b.a.bool,onHide:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),r=1;r<a;r++)t[r-1]=arguments[r];var n;return e.rootClose?(n=b.a.func).isRequired.apply(n,[e].concat(t)):b.a.func.apply(b.a,[e].concat(t))},transition:b.a.elementType,onEnter:b.a.func,onEntering:b.a.func,onEntered:b.a.func,onExit:b.a.func,onExiting:b.a.func,onExited:b.a.func};var x=w,N=t(215),k=t(166),S={transition:k.a,rootClose:!1,show:!1,placement:"top"};function F(e){var a=e.children,t=e.transition,l=e.popperConfig,c=void 0===l?{}:l,i=Object(n.a)(e,["children","transition","popperConfig"]),d=Object(o.useRef)({}),m=Object(N.a)(),f=m[0],b=m[1],g=!0===t?k.a:t||null;return s.a.createElement(x,Object(r.a)({},i,{ref:f,popperConfig:Object(r.a)({},c,{modifiers:b.concat(c.modifiers||[])}),transition:g}),(function(e){var l,c=e.props,o=e.arrowProps,i=e.show,m=e.update,f=(e.forceUpdate,e.placement),b=e.state,g=Object(n.a)(e,["props","arrowProps","show","update","forceUpdate","placement","state"]);!function(e,a){var t=e.ref,r=a.ref;e.ref=t.__wrapped||(t.__wrapped=function(e){return t(Object(u.a)(e))}),a.ref=r.__wrapped||(r.__wrapped=function(e){return r(Object(u.a)(e))})}(c,o);var E=Object.assign(d.current,{state:b,scheduleUpdate:m,placement:f,outOfBoundaries:(null==b||null==(l=b.modifiersData.hide)?void 0:l.isReferenceHidden)||!1});return"function"===typeof a?a(Object(r.a)({},g,{},c,{placement:f,show:i,popper:E,arrowProps:o})):s.a.cloneElement(a,Object(r.a)({},g,{},c,{placement:f,arrowProps:o,popper:E,className:p()(a.props.className,!t&&i&&"show"),style:Object(r.a)({},a.props.style,{},c.style)}))}))}F.defaultProps=S;var q=F,M=function(e){function a(){return e.apply(this,arguments)||this}return Object(l.a)(a,e),a.prototype.render=function(){return this.props.children},a}(s.a.Component);function D(e,a,t){var r=a[0],n=r.currentTarget,l=r.relatedTarget||r.nativeEvent[t];l&&l===n||Object(c.a)(n,l)||e.apply(void 0,a)}function P(e){var a=e.trigger,t=e.overlay,l=e.children,c=e.popperConfig,m=void 0===c?{}:c,p=e.show,f=e.defaultShow,b=void 0!==f&&f,g=e.onToggle,E=e.delay,h=e.placement,O=e.flip,v=void 0===O?h&&-1!==h.indexOf("auto"):O,j=Object(n.a)(e,["trigger","overlay","children","popperConfig","show","defaultShow","onToggle","delay","placement","flip"]),y=Object(o.useRef)(null),_=Object(i.a)(),C=Object(o.useRef)(""),w=Object(d.b)(p,b,g),x=w[0],N=w[1],k=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(E),S="function"!==typeof l?s.a.Children.only(l).props:{},F=S.onFocus,P=S.onBlur,R=S.onClick,I=Object(o.useCallback)((function(){return Object(u.a)(y.current)}),[]),T=Object(o.useCallback)((function(){_.clear(),C.current="show",k.show?_.set((function(){"show"===C.current&&N(!0)}),k.show):N(!0)}),[k.show,N,_]),A=Object(o.useCallback)((function(){_.clear(),C.current="hide",k.hide?_.set((function(){"hide"===C.current&&N(!1)}),k.hide):N(!1)}),[k.hide,N,_]),B=Object(o.useCallback)((function(){T();for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];null==F||F.apply(void 0,a)}),[T,F]),G=Object(o.useCallback)((function(){A();for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];null==P||P.apply(void 0,a)}),[A,P]),z=Object(o.useCallback)((function(){N(!x),R&&R.apply(void 0,arguments)}),[R,N,x]),J=Object(o.useCallback)((function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];D(T,a,"fromElement")}),[T]),H=Object(o.useCallback)((function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];D(A,a,"toElement")}),[A]),K=null==a?[]:[].concat(a),V={};return-1!==K.indexOf("click")&&(V.onClick=z),-1!==K.indexOf("focus")&&(V.onFocus=B,V.onBlur=G),-1!==K.indexOf("hover")&&(V.onMouseOver=J,V.onMouseOut=H),s.a.createElement(s.a.Fragment,null,"function"===typeof l?l(Object(r.a)({},V,{ref:y})):s.a.createElement(M,{ref:y},Object(o.cloneElement)(l,V)),s.a.createElement(q,Object(r.a)({},j,{show:x,onHide:A,flip:v,placement:h,popperConfig:m,target:I}),t))}P.defaultProps={defaultShow:!1,trigger:["hover","focus"]};a.a=P},632:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var r=t(1),n=t(128),l=t(129),c=Math.pow(2,31)-1;function o(){var e=Object(n.a)(),a=Object(r.useRef)();return Object(l.a)((function(){return clearTimeout(a.current)})),Object(r.useMemo)((function(){var t=function(){return clearTimeout(a.current)};return{set:function(r,n){void 0===n&&(n=0),e()&&(t(),n<=c?a.current=setTimeout(r,n):function e(a,t,r){var n=r-Date.now();a.current=n<=c?setTimeout(t,n):setTimeout((function(){return e(a,t,r)}),c)}(a,r,Date.now()+n))},clear:t}}),[])}},648:function(e,a,t){"use strict";var r=t(2),n=t(4),l=t(5),c=t.n(l),o=t(1),s=t.n(o),i=t(7),u=t(36),d=t(221),m=t(220),p=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.className,o=e.variant,u=e.as,d=void 0===u?"img":u,m=Object(n.a)(e,["bsPrefix","className","variant","as"]),p=Object(i.a)(t,"card-img");return s.a.createElement(d,Object(r.a)({ref:a,className:c()(o?p+"-"+o:p,l)},m))}));p.displayName="CardImg",p.defaultProps={variant:null};var f=p,b=Object(d.a)("h5"),g=Object(d.a)("h6"),E=Object(u.a)("card-body"),h=Object(u.a)("card-title",{Component:b}),O=Object(u.a)("card-subtitle",{Component:g}),v=Object(u.a)("card-link",{Component:"a"}),j=Object(u.a)("card-text",{Component:"p"}),y=Object(u.a)("card-header"),_=Object(u.a)("card-footer"),C=Object(u.a)("card-img-overlay"),w=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.className,u=e.bg,d=e.text,p=e.border,f=e.body,b=e.children,g=e.as,h=void 0===g?"div":g,O=Object(n.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),v=Object(i.a)(t,"card"),j=Object(o.useMemo)((function(){return{cardHeaderBsPrefix:v+"-header"}}),[v]);return s.a.createElement(m.a.Provider,{value:j},s.a.createElement(h,Object(r.a)({ref:a},O,{className:c()(l,v,u&&"bg-"+u,d&&"text-"+d,p&&"border-"+p)}),f?s.a.createElement(E,null,b):b))}));w.displayName="Card",w.defaultProps={body:!1},w.Img=f,w.Title=h,w.Subtitle=O,w.Body=E,w.Link=v,w.Text=j,w.Header=y,w.Footer=_,w.ImgOverlay=C;a.a=w},650:function(e,a,t){"use strict";var r=t(2),n=t(4),l=t(5),c=t.n(l),o=t(1),s=t.n(o),i=t(70),u=t(7),d=t(30),m=s.a.createContext(null);m.displayName="AccordionContext";var p=m;var f=s.a.forwardRef((function(e,a){var t=e.as,l=void 0===t?"button":t,c=e.children,i=e.eventKey,u=e.onClick,m=Object(n.a)(e,["as","children","eventKey","onClick"]),f=function(e,a){var t=Object(o.useContext)(p),r=Object(o.useContext)(d.a);return function(n){r&&r(e===t?null:e,n),a&&a(n)}}(i,u);return"button"===l&&(m.type="button"),s.a.createElement(l,Object(r.a)({ref:a,onClick:f},m),c)})),b=t(222),g=s.a.forwardRef((function(e,a){var t=e.children,l=e.eventKey,c=Object(n.a)(e,["children","eventKey"]),i=Object(o.useContext)(p);return s.a.createElement(b.a,Object(r.a)({ref:a,in:i===l},c),s.a.createElement("div",null,s.a.Children.only(t)))}));g.displayName="AccordionCollapse";var E=g,h=s.a.forwardRef((function(e,a){var t=Object(i.a)(e,{activeKey:"onSelect"}),l=t.as,o=void 0===l?"div":l,m=t.activeKey,f=t.bsPrefix,b=t.children,g=t.className,E=t.onSelect,h=Object(n.a)(t,["as","activeKey","bsPrefix","children","className","onSelect"]),O=c()(g,Object(u.a)(f,"accordion"));return s.a.createElement(p.Provider,{value:m||null},s.a.createElement(d.a.Provider,{value:E||null},s.a.createElement(o,Object(r.a)({ref:a},h,{className:O}),b)))}));h.displayName="Accordion",h.Toggle=f,h.Collapse=E;a.a=h},652:function(e,a,t){},654:function(e,a,t){"use strict";var r=t(16),n=t(37),l=t(1),c=t.n(l),o=t(18),s=t(32),i=t(620),u=t(619),d=(t(652),function(e){var a=e.plan,t=Object(n.a)(e,["plan"]),d=Object(l.useState)(!1),m=Object(r.a)(d,2),p=m[0],f=m[1],b=function(e){e.preventDefault(),t.handleUpdate(a)},g=function(e){var t=parseFloat(a.discount)*parseFloat(a.price)/100;return Object(o.f)(parseFloat(a.price)-t,2,",",".")},E=function(e){e.preventDefault(),t.handleSelect(a)},h=function(){f(!p)};return c.a.createElement(c.a.Fragment,null,a.especial?c.a.createElement("div",{className:"plan featured"},c.a.createElement("header",null,c.a.createElement("h4",{className:"plan-title"},a.name),c.a.createElement("div",{className:"plan-cost"},c.a.createElement("span",{className:a.discount?"plan-price-discount":"plan-price"},t.configGeneral&&t.configGeneral.simbolo_moneda?t.configGeneral.simbolo_moneda:"$",Object(o.f)(a.price,2,",",".")),a.discount?c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("span",{className:"plan-price"},t.configGeneral&&t.configGeneral.simbolo_moneda?t.configGeneral.simbolo_moneda:"$",g(a.price))):"",c.a.createElement("span",{className:"plan-type"},c.a.createElement("br",null),1==a.billing_period?"Mensual":a.billing_period+"-Meses"))),c.a.createElement("ul",{className:"plan-features"},c.a.createElement("li",null,c.a.createElement(s.f,null)," Descripcion:",a.description.length>9?c.a.createElement(c.a.Fragment,null,t.isModal?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{style:{color:"rgb(228, 90, 59)"},onMouseOver:h,onMouseLeave:h}," Ver detalle"),p?c.a.createElement("p",{style:{color:"white"}},a.description):""):c.a.createElement(i.a,{placement:"bottom",overlay:c.a.createElement(u.a,{id:"tooltip-plan"+a.id},c.a.createElement("b",null,"Descripci\xf3n: "),c.a.createElement("br",null),a.description)},c.a.createElement("span",{style:{color:"rgb(228, 90, 59)"}}," Ver detalle"))):c.a.createElement("span",null," ",a.description)),c.a.createElement("li",null,c.a.createElement(s.f,null)," Descuento: ",a.discount,"%"),c.a.createElement("li",null,c.a.createElement(s.f,null)," D\xedas de Prueba: ",a.day_test)),t.update?c.a.createElement("div",{className:"plan-select"},c.a.createElement("a",{href:"",onClick:b},"Modificar ",c.a.createElement("br",null)," O ",c.a.createElement("br",null)," Eliminar")):t.disabled?c.a.createElement("span",null):c.a.createElement("div",{className:"plan-select",onClick:E},c.a.createElement("a",{href:""},"Seleccionar"))):c.a.createElement("div",{className:"plan"},c.a.createElement("header",null,c.a.createElement("h4",{className:"plan-title"},a.name),c.a.createElement("div",{className:"plan-cost"},c.a.createElement("span",{className:a.discount?"plan-price-discount":"plan-price"},t.configGeneral&&t.configGeneral.simbolo_moneda?t.configGeneral.simbolo_moneda:"$",Object(o.f)(a.price,2,",",".")),a.discount?c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("span",{className:"plan-price"},t.configGeneral&&t.configGeneral.simbolo_moneda?t.configGeneral.simbolo_moneda:"$",g(a.price))):"",c.a.createElement("span",{className:"plan-type"},c.a.createElement("br",null),1==a.billing_period?"Mensual":a.billing_period+"-Meses"))),c.a.createElement("ul",{className:"plan-features"},c.a.createElement("li",null,c.a.createElement(s.f,null)," Descripcion:",a.description.length>9?c.a.createElement(c.a.Fragment,null,t.isModal?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{style:{color:"rgb(228, 90, 59)"},onMouseOver:h,onMouseLeave:h}," Ver detalle"),p?c.a.createElement("p",{style:{color:"white"}},a.description):""):c.a.createElement(i.a,{placement:"bottom",overlay:c.a.createElement(u.a,{id:"tooltip-plan"+a.id},c.a.createElement("b",null,"Descripci\xf3n: "),c.a.createElement("br",null),a.description)},c.a.createElement("span",{style:{color:"rgb(228, 90, 59)"}}," Ver detalle"))):c.a.createElement("span",null," ",a.description)),c.a.createElement("li",null,c.a.createElement(s.f,null)," Descuento: ",a.discount,"%"),c.a.createElement("li",null,c.a.createElement(s.f,null)," D\xedas de Prueba: ",a.day_test)),t.update?c.a.createElement("div",{className:"plan-select"},c.a.createElement("a",{href:"",onClick:b},"Modificar ",c.a.createElement("br",null)," O ",c.a.createElement("br",null)," Eliminar")):t.disabled?c.a.createElement("span",null):c.a.createElement("div",{className:"plan-select",onClick:E},c.a.createElement("a",{href:""},"Seleccionar"))))});d.defaultProps={configGeneral:JSON.parse(localStorage.getItem("configGeneral"))},a.a=d},676:function(e,a,t){"use strict";var r=t(94),n=t(51),l=t(20),c=t(16),o=t(1),s=t.n(o),i=t(616),u=t(613),d=t(50),m=t(604),p=t(205),f=t(650),b=t(648),g=t(305),E=t(82),h=t(32),O=t(10),v=(t(311),t(18)),j=t(8),y=t(9),_=t.n(y),C=t(83),w=1;a.a=function(e){var a=Object(o.useState)([]),y=Object(c.a)(a,2),x=y[0],N=y[1],k=Object(o.useState)(!1),S=Object(c.a)(k,2),F=S[0],q=S[1];Object(o.useEffect)((function(){e.isOpenModalAdd&&"Crear Sucursal"===e.titleModal&&B()}),[e.isOpenModalAdd]);var M=Object(o.useState)(!1),D=Object(c.a)(M,2),P=D[0],R=D[1],I=function(a){"is_open"===a.target.name?e.setBranchOfficeForm(Object(l.a)(Object(l.a)({},e.branchOfficeForm),{},Object(n.a)({},a.target.name,a.target.checked))):e.setBranchOfficeForm(Object(l.a)(Object(l.a)({},e.branchOfficeForm),{},Object(n.a)({},a.target.name,a.target.value)))},T=function(a){"rut"===a.target.name?e.setUserForm(Object(l.a)(Object(l.a)({},e.userForm),{},Object(n.a)({},a.target.name,Object(v.g)(a.target.value)))):e.setUserForm(Object(l.a)(Object(l.a)({},e.userForm),{},Object(n.a)({},a.target.name,a.target.value)))},A=function(e){var a=!1,t=!1;return Object.keys(e).forEach((function(r,n){""!==e[r]&&null!==e[r]&&"id_rol"!==r?a=!0:!0!==a||e[r]||"id_rol"===r||"id"===r||(t=!0)})),{validate:a,required:t}},B=function(){e.setUserForm({email:"",password:"",password_repeat:"",rut:"",name:"",phone:"",id:"",id_rol:3}),e.setBranchOfficeForm({name:"",id:"",is_open:!0}),e.setRequiredInput(!1),R(!1)};return s.a.createElement(i.a,{show:e.isOpenModalAdd,onHide:e.handleOpenModalAdd,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},s.a.createElement(i.a.Header,{className:"header_dark"},s.a.createElement(i.a.Title,{id:"contained-modal-title-vcenter"},e.titleModal,"\xa0\xa0",s.a.createElement(u.a,{src:t(316),style:{width:"50px"}}))),s.a.createElement(d.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void R(!0);var n=Object.assign({},e.branchOfficeForm),l=Object.assign({},e.userForm);if(l.password!==l.password_repeat)return j.b.error("Error, las contrase\xf1as no coinciden"),!1;if(q(!0),e.isBranchOffice)if(n.id)_.a.put(O.b+"branch_office/"+n.id,n).then((function(a){var t=A(l);if(t.validate){if(t.required)return q(!1),j.b.error("Todos los campos del usuario son requeridos"),!1;_.a.put(O.b+"user_by_branch_office/"+l.id,l).then((function(a){j.b.success("Sucursal Modificada"),B(),e.handleOpenModalAdd(),2===parseInt(JSON.parse(localStorage.getItem("user")).id_rol,10)?e.fetchData(!0,!0):e.fetchData(),q(!1)})).catch((function(e){q(!1);var a=e.response;a?j.b.error(a.data.message):j.b.error("Error, contacte con soporte")}))}else j.b.success("Sucursal Modificada"),B(),e.handleOpenModalAdd(),2===parseInt(JSON.parse(localStorage.getItem("user")).id_rol,10)?e.fetchData(!0,!0):e.fetchData(),q(!1)})).catch((function(e){q(!1);var a=e.response;a?j.b.error(a.data.message):j.b.error("Error, contacte con soporte")}));else{var c=A(l);if(c.validate){if(c.required)return j.b.error("Todos los campos del usuario son requeridos"),!1;l.branch=n,_.a.post(O.b+"user_and_branch_office",l).then((function(a){j.b.success("Sucursal Creada con \xe9xito"),B(),e.handleOpenModalAdd(),w++,2===parseInt(JSON.parse(localStorage.getItem("user")).id_rol,10)&&w>1&&w<3?e.fetchData(!0):e.fetchData(),q(!1)})).catch((function(e){q(!1);var a=e.response;a?j.b.error(a.data.message):j.b.error("Error, contacte con soporte")}))}else _.a.post(O.b+"branch_office",n).then((function(a){j.b.success("Sucursal Creada con \xe9xito"),B(),e.handleOpenModalAdd(),w++,2===parseInt(JSON.parse(localStorage.getItem("user")).id_rol,10)&&w>1&&w<3?e.fetchData(!0):e.fetchData(),q(!1)})).catch((function(e){q(!1),e.response?j.b.error(e.response.data.message):(console.log(e),j.b.error("Error, contacte con soporte"))}))}else{var o=A(l);if(o.validate){if(o.required)return j.b.error("Todos los campos del usuario son requeridos"),!1;if(0===x.length)return j.b.error("Debe seleccionar los m\xf3dulos del administrador, si despu\xe9s de la creaci\xf3n desea cambiarlos debe ir al m\xf3dulo de usuarios"),!1;l.branch=n,l.modules=Object(r.a)(x),_.a.post(O.b+"user_and_branch_office",l).then((function(a){j.b.success("Sucursal Creada con \xe9xito"),B(),e.handleOpenModalAdd(),w++,2===parseInt(JSON.parse(localStorage.getItem("user")).id_rol,10)&&w>1&&w<3?e.fetchData(!0):e.fetchData(),q(!1)})).catch((function(e){q(!1);var a=e.response;a?j.b.error(a.data.message):j.b.error("Error, contacte con soporte")}))}else _.a.post(O.b+"branch_office",n).then((function(a){j.b.success("Sucursal Creada con \xe9xito"),B(),e.handleOpenModalAdd(),w++,2===parseInt(JSON.parse(localStorage.getItem("user")).id_rol,10)&&w>1&&w<3?e.fetchData(!0):e.fetchData(),q(!1)})).catch((function(e){q(!1),e.response?j.b.error(e.response.data.message):(console.log(e),j.b.error("Error, contacte con soporte"))}))}},noValidate:!0,validated:P},s.a.createElement(s.a.Fragment,null,F?s.a.createElement(C.a,null):s.a.createElement(i.a.Body,null,s.a.createElement(m.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement("h4",{className:"title_principal"},"Datos de la Sucursal"))),s.a.createElement("hr",null),s.a.createElement(m.a,null,s.a.createElement(E.a,{type:"text",label:"Nombre Sucursal",name:"name",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:e.branchOfficeForm.name,handleChange:I}),s.a.createElement(p.a,{sm:4,md:4,lg:4},s.a.createElement("br",null),s.a.createElement(d.a.Group,null,s.a.createElement(d.a.Check,{type:"checkbox",custom:!0,id:"is_open",name:"is_open",label:"Activa",value:e.branchOfficeForm.is_open,checked:e.branchOfficeForm.is_open,onChange:I})))),e.branchOfficeForm.id?"":s.a.createElement(m.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement(f.a,null,s.a.createElement(b.a,null,s.a.createElement(f.a.Toggle,{as:b.a.Header,eventKey:"0",className:"header_card"},s.a.createElement("b",null,"Datos del administrador de la sucursal")," ( No es requerido para crear la sucursal, hacer click para desplegar )"),s.a.createElement(f.a.Collapse,{eventKey:"0"},s.a.createElement(b.a.Body,null,s.a.createElement(m.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement("h4",{className:"title_principal"},"Datos del Administrador de la Sucursal"))),s.a.createElement("hr",null),s.a.createElement(m.a,null,s.a.createElement(E.a,{type:"text",label:"Nombre Completo",name:"name",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:e.userForm.name,handleChange:T}),s.a.createElement(E.a,{type:"text",label:"Rut",name:"rut",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:e.userForm.rut,handleChange:T}),s.a.createElement(E.a,{type:"email",label:"Email",name:"email",required:!1,autoComplete:"new-password",messageErrors:["Requerido* ","Formato Tipo Email*"],cols:"col-md-4 col-lg-4 col-sm-4",value:e.userForm.email,handleChange:T})),s.a.createElement(m.a,null,s.a.createElement(E.a,{type:"number",label:"Fono",name:"phone",required:!1,messageErrors:[],cols:"col-md-4 col-lg-4 col-sm-4",value:e.userForm.phone,handleChange:T}),s.a.createElement(E.a,{type:"password",label:"Contrase\xf1a",name:"password",required:e.requiredInput,autoComplete:"new-password",messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:e.userForm.password,handleChange:T}),s.a.createElement(E.a,{type:"password",label:"Repita Contrase\xf1a",name:"password_repeat",required:e.requiredInput,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:e.userForm.password_repeat,handleChange:T})),s.a.createElement(m.a,null,s.a.createElement(p.a,{sm:12,md:12,lg:12},s.a.createElement(f.a,null,s.a.createElement(b.a,null,s.a.createElement(f.a.Toggle,{as:b.a.Header,eventKey:"1",className:"header_card"},s.a.createElement("b",null,"Modulos para el administrador")," ( hacer click para desplegar )"),s.a.createElement(f.a.Collapse,{eventKey:"1"},s.a.createElement(b.a.Body,null,s.a.createElement(m.a,null,e.menu.map((function(e,a){return s.a.createElement(p.a,{sm:4,md:4,lg:4,xs:6,key:a},s.a.createElement(d.a.Group,null,s.a.createElement(d.a.Check,{type:"checkbox",custom:!0,id:e.name_item+e.id,label:e.name_item,value:e.id,checked:!!x.find((function(a){return a==e.id})),onChange:function(a){return function(e,a){e.persist(),e.target.checked?N([].concat(Object(r.a)(x),[a])):N(x.filter((function(a){return a!=e.target.value})))}(a,e.id)}})))}))),s.a.createElement(m.a,{className:""},s.a.createElement(p.a,{sm:6,md:6,lg:6,xs:12},s.a.createElement(g.a,{size:"sm",variant:"danger",block:!0,onClick:function(){var a=e.menu.map((function(e){return e.id}));N(a)}},"Seleccionar Todos ",s.a.createElement(h.g,null))),s.a.createElement(p.a,{sm:6,md:6,lg:6,xs:12},s.a.createElement(g.a,{size:"sm",variant:"danger",block:!0,onClick:function(){N([])}},"Deseleccionar Todos ",s.a.createElement(h.N,null)))))))))))))))),s.a.createElement("hr",null),s.a.createElement(m.a,{className:"justify-content-center"},s.a.createElement(p.a,{sm:4,md:4,lg:4},s.a.createElement(g.a,{block:!0,variant:"primary",size:"sm",type:"submit"},"Guardar")),e.isBranchOffice?s.a.createElement(p.a,{sm:4,md:4,lg:4},s.a.createElement(g.a,{block:!0,variant:"danger",size:"sm",onClick:e.handleOpenModalAdd,type:"button"},"Cerrar")):"")))))}},804:function(e,a,t){"use strict";t.r(a);var r=t(51),n=t(20),l=t(17),c=t.n(l),o=t(34),s=t(16),i=t(1),u=t.n(i),d=t(614),m=t(604),p=t(205),f=t(615),b=t(50),g=t(305),E=t(82),h=t(8),O=t(10),v=t(9),j=t.n(v),y=t(32),_=t(654),C=t(18),w=t(53),x=t(121),N=t(91),k=t(29),S=t(55),F=t(620),q=t(619),M=t(676),D=t(83);a.default=Object(k.b)((function(e){return{id_enterprise_redux:e.enterpriseSucursal.id_enterprise,modules:e.menu.modules}}),function(){var e;return e={setEnterprises:w.c,setDisplayMessage:x.b,setBranchOffices:w.b,setIdEnterprise:w.e,setMenu:x.c,setConfig:N.b},Object(r.a)(e,"setBranchOffices",w.b),Object(r.a)(e,"setIdBranchOffice",w.d),Object(r.a)(e,"setConfigStore",N.c),e}())((function(e){var a=Object(i.useState)(!1),t=Object(s.a)(a,2),l=t[0],v=t[1],w=Object(i.useState)([]),x=Object(s.a)(w,2),N=x[0],k=x[1],P=Object(i.useState)(!1),R=Object(s.a)(P,2),I=R[0],T=R[1],A=Object(i.useState)({rut:"",name:"",bussines_name:"",address:"",city:"",comuna:"",email_enterprise:"",phone:"",spin:"",plan:{},actividad_economica:"",giro:""}),B=Object(s.a)(A,2),G=B[0],z=B[1],J=Object(i.useState)(!0),H=Object(s.a)(J,2),K=H[0],V=H[1],U=Object(i.useState)({name:"",is_open:!0,id:""}),L=Object(s.a)(U,2),$=L[0],Q=L[1],W=Object(i.useState)({email:"",password:"",password_repeat:"",rut:"",name:"",phone:"",id:"",id_rol:3}),X=Object(s.a)(W,2),Y=X[0],Z=X[1],ee=Object(i.useState)(!1),ae=Object(s.a)(ee,2),te=ae[0],re=ae[1];Object(i.useEffect)((function(){return S.a.toggleCollapsed(),ne(),function(){S.a.toggleCollapsed()}}),[]);var ne=function(){var a=[j.a.get(O.b+"plans")];e.match.params.id&&a.push(j.a.get(O.b+"enterprise/"+e.match.params.id)),Promise.all(a).then((function(e){k(e[0].data),e.length>1&&z({rut:e[1].data.rut,name:e[1].data.name,bussines_name:e[1].data.bussines_name,email_enterprise:e[1].data.email_enterprise,city:e[1].data.city,comuna:e[1].data.comuna,address:e[1].data.address,phone:e[1].data.phone,spin:e[1].data.spin,plan:e[1].data.plan,id:e[1].data.id,actividad_economica:e[1].data.actividad_economica,plan_backup:e[1].data.plan,giro:e[1].data.giro}),V(!1)})).catch((function(a){V(!1),e.tokenExpired(a)}))},le=function(e){"rut"===e.target.name?z(Object(n.a)(Object(n.a)({},G),{},Object(r.a)({},e.target.name,Object(C.g)(e.target.value)))):z(Object(n.a)(Object(n.a)({},G),{},Object(r.a)({},e.target.name,e.target.value)))},ce=function(){e.history.replace("/enterprise")},oe=function(e){z(Object(n.a)(Object(n.a)({},G),{},{plan:Object.assign({},e)})),h.b.info("Plan Seleccionado")},se=function(){re(!te)};return u.a.createElement(u.a.Fragment,null,K?u.a.createElement(d.a,{fluid:!0},u.a.createElement(D.a,null)):u.a.createElement(d.a,{fluid:!0},u.a.createElement(m.a,null,u.a.createElement(p.a,{sm:6,md:6,lg:6},u.a.createElement("h4",{className:"title_principal"},"Formulario de Empresas")),u.a.createElement(p.a,{sm:6,md:6,lg:6},u.a.createElement("h4",{className:"title_principal text-right"},"Plan de la empresa: ",u.a.createElement(f.a,{variant:"danger",className:"font-badge"},Object.keys(G.plan).length>0?G.plan.name:"Ninguno")))),u.a.createElement("hr",null),u.a.createElement(m.a,null,u.a.createElement(p.a,{sm:12,lg:12,md:12},u.a.createElement(b.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void v(!0);var r=Object.assign({},G);if(Object.keys(G.plan).length<1)return h.b.error("Debe escoger un plan para la empresa"),!1;if(V(!0),r.id){var n=r.plan_backup;j.a.put(O.b+"enterprise/"+r.id,r).then(function(){var a=Object(o.a)(c.a.mark((function a(t){var l;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(h.b.success("Empresa modificada con \xe9xito"),e.id_enterprise_redux!=r.id||n.id===r.plan.id){a.next=15;break}return e.setDisplayMessage(!0),a.next=5,j.a.get(O.b+"enterprises_branch_office/"+r.id);case 5:l=a.sent,e.setEnterprises(t.data.enterprises),l.data.menu&&e.setMenu(l.data.menu),localStorage.setItem("id_enterprise",r.id),localStorage.setItem("configGeneral",JSON.stringify(l.data.config)),e.setConfig(l.data.config),e.setIdEnterprise(r.id),setTimeout((function(){e.setDisplayMessage(!1),ce()}),1500),a.next=16;break;case 15:setTimeout((function(){ce()}),1500);case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(a){V(!1),e.tokenExpired(a)}))}else j.a.post(O.b+"enterprise",r).then(function(){var a=Object(o.a)(c.a.mark((function a(t){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(h.b.success("Empresa creada con \xe9xito"),1!==t.data.enterprises.length){a.next=16;break}return e.setDisplayMessage(!0),a.next=5,j.a.get(O.b+"enterprises_branch_office/"+t.data.enterprises[0].id);case 5:r=a.sent,e.setEnterprises(t.data.enterprises),r.data.menu&&e.setMenu(r.data.menu),localStorage.setItem("id_enterprise",t.data.enterprises[0].id),localStorage.setItem("configGeneral",JSON.stringify(r.data.config)),e.setConfig(r.data.config),e.setIdEnterprise(t.data.enterprises[0].id),V(!1),setTimeout((function(){e.setDisplayMessage(!1),se(),h.b.info("Cree la sucursal con la que va a trabajar para empezar en aidy")}),1500),a.next=18;break;case 16:e.setEnterprises(t.data.enterprises),setTimeout((function(){ce()}),1500);case 18:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(a){V(!1),console.log(a),e.tokenExpired(a)}))},noValidate:!0,validated:l},u.a.createElement(m.a,null,u.a.createElement(p.a,{sm:4,md:4,lg:4},u.a.createElement(b.a.Label,{className:"fontBold"},"Rut"),u.a.createElement(b.a.Group,{className:"divContainerFlex"},u.a.createElement(b.a.Control,{style:{flexGrow:2},type:"text",label:"Rut",id:"rut_client_sii",name:"rut",required:!1,placeholder:"rut de la empresa",cols:"col-md-12 col-lg-12 col-sm-12",className:"form-control-sm",onChange:le,value:G.rut}),u.a.createElement(F.a,{placement:"right",overlay:u.a.createElement(q.a,{id:"tooltip-disabled2"},"Hacer click para buscar datos de la empresa")},u.a.createElement(g.a,{variant:"secondary",size:"sm",onClick:function(){return function(){var a=Object.assign({},G).rut;a?(h.b.info("Buscando Receptor, espere por favor"),V(!0),j.a.get(O.b+"search_receptor/"+a.split("-")[0]+"/"+a.split("-")[1]).then((function(e){z((function(a){return Object.assign({},a,{rut:e.data.rut+"-"+e.data.dv,bussines_name:e.data.razon_social,address:e.data.direccion_seleccionada,comuna:e.data.comuna_seleccionada,city:e.data.ciudad_seleccionada})})),V(!1)})).catch((function(a){V(!1),e.tokenExpired(a)}))):h.b.info("Debe ingresar un rut para buscar los datos de la empresa")}()}},u.a.createElement(y.I,null))))),u.a.createElement(E.a,{type:"text",label:"Razon Social",name:"bussines_name",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:G.bussines_name,handleChange:le}),u.a.createElement(E.a,{type:"text",label:"Nombre",name:"name",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:G.name,handleChange:le})),u.a.createElement(m.a,null,u.a.createElement(E.a,{type:"textarea",label:"Direcci\xf3n",name:"address",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:G.address,handleChange:le}),u.a.createElement(E.a,{type:"text",label:"Ciudad",name:"city",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:G.city,handleChange:le}),u.a.createElement(E.a,{type:"text",label:"Comuna",name:"comuna",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:G.comuna,handleChange:le})),u.a.createElement(m.a,null,u.a.createElement(E.a,{type:"email",label:"Email",name:"email_enterprise",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:G.email_enterprise,handleChange:le}),u.a.createElement(E.a,{type:"number",label:"Fono",name:"phone",required:!0,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:G.phone,handleChange:le})),u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(p.a,{sm:12,md:12,lg:12},u.a.createElement("h4",{className:"title_principal"},"Planes para la empresa"),u.a.createElement(m.a,{className:"snip1404 justify-content-center"},N.map((function(e,a){return u.a.createElement(p.a,{sm:4,md:4,lg:4,key:a},u.a.createElement(_.a,{plan:e,handleSelect:oe}))}))))),u.a.createElement("br",null),u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(p.a,{sm:4,md:4,lg:4},u.a.createElement(g.a,{variant:"primary",block:!0,size:"sm",type:"submit"},"Enviar ",u.a.createElement(y.z,null))),u.a.createElement(p.a,{sm:4,md:4,lg:4},u.a.createElement(g.a,{variant:"secondary",block:!0,size:"sm",type:"button",onClick:ce},"Volver")))))),u.a.createElement(M.a,{branchOfficeForm:$,userForm:Y,setUserForm:Z,setBranchOfficeForm:Q,handleOpenModalAdd:se,isOpenModalAdd:te,titleModal:"Crear Sucursal",requiredInput:I,setRequiredInput:T,fetchData:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[j.a.get(O.b+"branch_office")];V(!0),Promise.all(r).then(function(){var r=Object(o.a)(c.a.mark((function r(n){var l;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!a){r.next=13;break}if(e.setBranchOffices(n[0].data),t){r.next=13;break}if(1!==n[0].data.length){r.next=13;break}return r.next=6,j.a.get(O.b+"enterprises_branch_office/null/"+n[0].data[0].id+"/1");case 6:l=r.sent,localStorage.setItem("id_branch_office",n[0].data[0].id),localStorage.setItem("configStore",JSON.stringify(l.data.config)),e.setConfigStore(l.data.config),e.setIdBranchOffice(n[0].data[0].id),h.b.info("Sucursal seleccionada para trabajar"),setTimeout((function(){e.history.replace("/config/config_general")}),1e3);case 13:V(!1);case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(a){V(!1),e.tokenExpired(a)}))},menu:e.modules})))}))}}]);