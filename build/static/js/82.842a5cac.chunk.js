(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[82],{796:function(e,a,t){"use strict";t.r(a);var r=t(51),n=t(20),s=t(16),c=t(1),l=t.n(c),o=t(613),i=t(50),m=t(604),u=t(205),d=t(305),g=t(82),p=t(8),b=t(10),E=t(9),f=t.n(E),v=(t(230),t(18)),h=t(29),j=t(68),y=t(83),w=function(e){var a=Object(c.useState)(!1),E=Object(s.a)(a,2),h=E[0],j=E[1],w=Object(c.useState)(!1),N=Object(s.a)(w,2),O=N[0],x=N[1],k=Object(c.useState)({name:"",rut:"",email:"",password:"",password_repeat:"",id_rol:2,name_enterprise:"",address_enterprise:""}),R=Object(s.a)(k,2),_=R[0],C=R[1],q=Object(c.useState)(null),S=Object(s.a)(q,2),P=S[0],I=S[1];Object(c.useEffect)((function(){T()}),[]);var T=function(){f.a.get(b.b+"config_aidy_login").then((function(e){e.data&&e.data.img_login&&I(e.data.img_login)})).catch((function(a){e.tokenExpired(a)}))},z=function(e){if("rut"===e.target.name){var a=Object(v.g)(e.target.value);C(Object(n.a)(Object(n.a)({},_),{},Object(r.a)({},e.target.name,a)))}else C(Object(n.a)(Object(n.a)({},_),{},Object(r.a)({},e.target.name,e.target.value)))};return l.a.createElement("div",{className:"authentication-wrapper authentication-3"},l.a.createElement("div",{className:"authentication-inner"},P?l.a.createElement("div",{className:"d-none d-lg-flex col-lg-8 align-items-center ui-bg-cover ui-bg-overlay-container p-5",style:{backgroundImage:"url('".concat(b.b,"images/aidy/").concat(P,"')")}},l.a.createElement("div",{className:""})):l.a.createElement("div",{className:"d-none d-lg-flex col-lg-8 align-items-center ui-bg-cover ui-bg-overlay-container p-5",style:{backgroundImage:"url('".concat("https://app.aidy.cl","/background_1920-16.jpg')")}},l.a.createElement("div",{className:"ui-bg-overlay bg-dark opacity-50"}),l.a.createElement("div",{className:"w-100 text-white px-5"},l.a.createElement("h1",{className:"display-2 font-weight-bolder mb-4"},"REGISTRO DE CUENTA"),l.a.createElement("div",{className:"text-large font-weight-light"},"Crea tu usuario nivel empresa para empezar el manejo de negocio en aidy"))),l.a.createElement("div",{className:"d-flex col-lg-4 align-items-center theme-bg-white p-5"},l.a.createElement("div",{className:"d-flex col-sm-7 col-md-5 col-lg-12 px-0 px-xl-4 mx-auto"},l.a.createElement("div",{className:"w-100"},l.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},l.a.createElement("div",{className:"position-relative text-center"},l.a.createElement(o.a,{src:t(229),width:"150px"}))),l.a.createElement("h4",{className:"text-center text-lighter font-weight-normal mt-5 mb-0"}),h?l.a.createElement(y.a,null):l.a.createElement(i.a,{onSubmit:function(a){var t=a.currentTarget;if(a.preventDefault(),!1===t.checkValidity())return a.stopPropagation(),void x(!0);var r=Object.assign({},_);if(r.password!==r.password_repeat)return p.b.error("Las contrase\xf1as no coinciden"),!1;j(!0),f.a.post(b.b+"user_free",r).then((function(a){p.b.success("Felicidades, usuario registrado con \xe9xito"),localStorage.setItem("user",JSON.stringify(a.data.user)),localStorage.setItem("token",a.data.token),Object(v.k)(a.data.token),e.login(a.data.user),j(!1),setTimeout((function(){e.history.replace("/dashboard")}),1500)})).catch((function(e){j(!1),e.response?p.b.error(e.response.data.message):(console.log(e),p.b.error("Error, contacte con soporte si el error persiste"))}))},noValidate:!0,validated:O},l.a.createElement(m.a,{className:"justify-content-center"},l.a.createElement(g.a,Object.assign({},e.inputName,{handleChange:z,value:_.name}))),l.a.createElement(m.a,{className:"justify-content-center"},l.a.createElement(g.a,Object.assign({},e.inputEmail,{handleChange:z,value:_.email}))),l.a.createElement(m.a,{className:"justify-content-center"},l.a.createElement(g.a,Object.assign({},e.inputRut,{handleChange:z,value:_.rut}))),l.a.createElement(m.a,{className:"justify-content-center"},l.a.createElement(g.a,Object.assign({},e.inputPassword,{handleChange:z,value:_.password}))),l.a.createElement(m.a,{className:"justify-content-center"},l.a.createElement(g.a,Object.assign({},e.inputPasswordRepeat,{handleChange:z,value:_.password_repeat}))),l.a.createElement(m.a,{className:"justify-content-center"},l.a.createElement(u.a,{sm:12,md:12,lg:12},l.a.createElement(d.a,{size:"sm",variant:"primary",block:!0,type:"submit"},"Registrar Usuario"))),l.a.createElement("br",null),l.a.createElement(m.a,{className:"justify-content-center"},l.a.createElement(u.a,{sm:12,md:12,lg:12},l.a.createElement(d.a,{size:"sm",variant:"secondary",block:!0,type:"button",onClick:function(){return e.history.replace("/")}},"Volver")))))))),l.a.createElement(p.a,null))};w.defaultProps={inputName:{type:"text",required:!0,name:"name",label:"Nombre Completo",messageErrors:["Requerido*"],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"},inputEmail:{type:"email",required:!0,name:"email",label:"Correo",messageErrors:["Requerido*"," Formato tipo Email*"],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"},inputRut:{type:"text",required:!0,name:"rut",label:"Rut",messageErrors:["Requerido*"],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"},inputPassword:{type:"password",required:!0,name:"password",label:"Contrase\xf1a",messageErrors:["Requerido*"],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"},inputPasswordRepeat:{type:"password",required:!0,name:"password_repeat",label:"Repita la Contrase\xf1a",messageErrors:["Requerido*"],cols:"col-sm-12 col-md-12 col-lg-12 col-xs-12"}},a.default=Object(h.b)((function(e){return{isLogin:e.auth.isAuthenticated}}),{login:j.a})(w)}}]);