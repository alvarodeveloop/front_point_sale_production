(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[28],{691:function(e,a,t){},695:function(e,a,t){e.exports=t.p+"static/media/empty_logo.258d3697.jpg"},706:function(e,a,t){},707:function(e,a,t){"use strict";var n=t(1),r=t.n(n),c=t(909),l=t(132),o=(t(691),t(708));a.a=function(e){return r.a.createElement(c.a,{show:e.show,onHide:e.onHide,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(c.a.Header,{closeButton:!0,className:"header_dark"},r.a.createElement(c.a.Title,{id:"contained-modal-title-vcenter"})),r.a.createElement(c.a.Body,null,r.a.createElement("div",{style:{width:"100%",paddingLeft:"25%"}},r.a.createElement(o.a,{catchCode:e.catchCode}))),r.a.createElement(c.a.Footer,null,r.a.createElement(l.a,{size:"sm",onClick:e.onHide},"Cerrar")))}},708:function(e,a,t){"use strict";var n=t(1),r=t.n(n),c=(t(716),t(739)),l=t.n(c),o=t(9);a.a=function(e){Object(n.useEffect)((function(){return a(),function(){l.a.stop()}}),[]);var a=function(){l.a.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#camera"),numOfWorkers:navigator.hardwareConcurrency,constraints:{width:300,height:300}},decoder:{readers:["ean_reader"]}},(function(e){e?o.b.error("Error, revise que la c\xe1mara de su dispositivo este conectada"):(console.log("Initialization finished. Ready to start"),l.a.start())}));var a=[];l.a.onDetected((function(n){var r=n.codeResult.code;if(a.push(r),a.length>20){var c=t(a)[0];e.catchCode(c)}}))},t=function(e){var a={};return e.forEach((function(e){a[e]||(a[e]=0),a[e]++})),Object.keys(a).sort((function(e,t){return a[e]<a[t]}))};return r.a.createElement("div",{id:"camera"})}},716:function(e,a,t){},717:function(e,a,t){"use strict";var n=t(99),r=t(21),c=t.n(r),l=t(34),o=t(22),s=t(42),i=t(20),u=t(1),m=t.n(u),d=t(12),p=t.n(d),b=(t(706),t(19)),g=t(88),E=t(9),f=t(23),h=t(15),y=t(707),_=(t(694),t(732),t(734)),j=t(686),v=t(915),k=t(134),O=t(87),x=t(132),C=t(654),N=t(49),S=t(741),w=t(742),q=function(e){var a,r,d=Object(u.useState)({name_product:"",cost:"",code_ean:"",description:"",is_neto:!0,id_category:[],is_auto_sale:!1,img_product:"",method_sale:1,price:"",qr_image:"",sticker_color:"#9c7901",detailCost:[],pack:"",categoryNames:"",minimun_stock:0}),q=Object(i.a)(d,2),I=q[0],P=q[1],z=Object(u.useState)(!1),R=Object(i.a)(z,2),D=R[0],G=(R[1],Object(u.useState)(!1)),A=Object(i.a)(G,2),B=A[0],M=A[1],F=Object(u.useState)([]),T=Object(i.a)(F,2),H=(T[0],T[1]),L=Object(u.useState)([]),V=Object(i.a)(L,2),K=V[0],U=V[1],J=Object(u.useState)(!1),Q=Object(i.a)(J,2),W=Q[0],X=Q[1],Y=Object(u.useState)(!1),Z=Object(i.a)(Y,2),$=Z[0],ee=Z[1],ae=Object(u.useState)(""),te=Object(i.a)(ae,2),ne=te[0],re=te[1],ce=Object(u.useState)({}),le=Object(i.a)(ce,2),oe=le[0],se=le[1],ie=Object(u.useState)(0),ue=Object(i.a)(ie,2),me=ue[0],de=ue[1],pe=Object(u.useState)({}),be=Object(i.a)(pe,2),ge=be[0],Ee=be[1],fe=Object(u.useState)(""),he=Object(i.a)(fe,2),ye=he[0],_e=he[1],je=Object(u.useState)("Guardar"),ve=Object(i.a)(je,2),ke=ve[0],Oe=ve[1],xe=Object(u.useState)(!1),Ce=Object(i.a)(xe,2),Ne=Ce[0],Se=Ce[1],we=Object(u.useState)([]),qe=Object(i.a)(we,2),Ie=(qe[0],qe[1],Object(u.useState)(!1)),Pe=Object(i.a)(Ie,2),ze=Pe[0],Re=Pe[1],De=Object(u.useState)(m.a.createElement(j.a,{src:t(695),id:"imagen_logo",style:{width:"100px"},roundedCircle:!0})),Ge=Object(i.a)(De,2),Ae=Ge[0],Be=Ge[1],Me=Object(u.useRef)(null);Object(u.useEffect)((function(){return Te(),function(){Le()}}),[]),Object(u.useEffect)((function(){Ve()}),[oe,ge]);var Fe=function(){var e=Object(s.a)(c.a.mark((function e(a){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("method_sale"!==a.target.name){e.next=7;break}return"",2==a.target.value?Re(!0):Re(!1),e.next=5,P(Object(o.a)(Object(o.a)({},I),{},Object(l.a)({},a.target.name,a.target.value)));case 5:e.next=15;break;case 7:if("is_neto"!==a.target.name&&"is_auto_sale"!==a.target.name){e.next=13;break}return t="true"===a.target.value,e.next=11,P(Object(o.a)(Object(o.a)({},I),{},Object(l.a)({},a.target.name,t)));case 11:e.next=15;break;case 13:return e.next=15,P(Object(o.a)(Object(o.a)({},I),{},Object(l.a)({},a.target.name,a.target.value)));case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Te=function(){var a=[p.a.get(h.b+"category"),p.a.get(h.b+"config_general")];e.match.params.id&&(e.isInventary?a.push(p.a.get(h.b+"product/"+atob(e.match.params.id))):a.push(p.a.get(h.b+"product/"+e.match.params.id))),Promise.all(a).then((function(a){a[0].data?U(a[0].data):E.b.warning("Debe realizar su configuraci\xf3n general"),H(a[1].data),a.length>2&&e.isInventary&&(P({name_product:a[2].data.name_product,cost:a[2].data.cost,code_ean:a[2].data.code_ean,description:a[2].data.description,is_neto:a[2].data.is_neto,id_category:a[2].data.categories.map((function(e){return{value:e.categories.id,label:e.categories.name_category}})),is_auto_sale:a[2].data.is_auto_sale,img_product:a[2].data.img_product,method_sale:a[2].data.method_sale,price:a[2].data.price,qr_image:a[2].data.qr_image,sticker_color:a[2].data.sticker_color,detailCost:a[2].data.cost_details,pack:a[2].data.pack,minimun_stock:a[2].data.inventary[0].minimun_stock}),2==a[2].data.method_sale&&Re(!0),ee(!0),a[2].data.img_product&&Be(m.a.createElement(j.a,{src:h.b+"images/product/principal/"+a[2].data.img_product,id:"imagen_logo",style:{width:"150px"},thumbnail:!0})),a[2].data.gallery.length>0&&Ee(a[2].data.gallery))})).catch((function(e){e.response?E.b.error(e.response.data.message):(console.log(e),E.b.error("Error,contacte con soporte"))}))},He=function(){var a=Object(s.a)(c.a.mark((function a(){var t,n,r,l,o,s,i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!1!==Me.current.checkValidity()){a.next=5;break}return X(!0),a.abrupt("return");case 5:if(t=new FormData,n=Object.assign({},I,{detailCost:I.detailCost.concat(D)}),Object.keys(n).forEach((function(e,a){if("img_product"===e)ne&&t.append(e,ne);else if("id_category"===e){var n="";I[e].forEach((function(e,a){t.append("id_category",e.value),n+=e.label+","})),n=n.substring(0,n.length-1),t.append("name_categories",n)}else t.append(e,I[e])})),Oe("Guardando Datos, Espere por favor..."),Se(!0),!$){a.next=25;break}return r=e.isInventary?atob(e.match.params.id):e.match.params.id,a.next=14,p.a.put(h.b+"product/"+r,t);case 14:return l=a.sent,Oe("Trabajando en galeria de imag\xe9nes..."),o=new FormData,Object.keys(oe).forEach((function(e,a){o.append("gallery",oe[e])})),Object.keys(ge).forEach((function(e,a){o.append("galleryUpdate",ge[e].filename)})),a.next=21,p.a.put(h.b+"update_gallery/"+r,o);case 21:E.b.success("Producto Modificado"),setTimeout((function(){e.isInventary?Ue():e.handleSubmitProduct(Object.assign({},l.data))}),1500),a.next=48;break;case 25:return a.next=27,p.a.post(h.b+"product",t);case 27:if(s=a.sent,!(oe.length>0)){a.next=42;break}return Oe("Guardando Galeria de Imagenes..."),i=new FormData,Object.keys(oe).forEach((function(e,a){i.append("gallery",oe[e])})),i.append("id_product",s.data.id),a.next=35,p.a.post(h.b+"product_gallery",i);case 35:E.b.success("Producto Creado"),Oe("Guardar"),Se(!1),Re(!1),Le(),a.next=47;break;case 42:E.b.success("Producto Creado"),Oe("Guardar"),Se(!1),Re(!1),Le();case 47:setTimeout((function(){e.isInventary?Ue():e.handleSubmitProduct(Object.assign({},s.data))}),1500);case 48:a.next=55;break;case 50:a.prev=50,a.t0=a.catch(0),Oe("Guardar"),Se(!1),a.t0.response?E.b.error(a.t0.response.data.message):(console.log(a.t0),E.b.error("Error, contacte con soporte"));case 55:case"end":return a.stop()}}),a,null,[[0,50]])})));return function(){return a.apply(this,arguments)}}(),Le=function(){P({name_product:"",cost:"",code_ean:"",description:"",is_neto:"",id_category:"",is_auto_sale:"",img_product:"",method_sale:"",price:"",qr_image:"",sticker_color:"#9c7901",detailCost:[],pack:"",categoryNames:"",minimun_stock:0}),re(null),Be(null),se({}),_e(""),Be(m.a.createElement(j.a,{src:t(695),id:"img_show",style:{width:"80px"},roundedCircle:!0})),document.getElementById("code_ean").setAttribute("readonly",!0)},Ve=function(){var e=Object(s.a)(c.a.mark((function e(){var a,t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",0,e.next=4,Promise.all(Object.keys(oe).map(function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe[t],e.next=3,Object(f.c)(a);case 3:return r=e.sent,e.abrupt("return",m.a.createElement(v.a.Item,{key:n},m.a.createElement("img",{className:"d-block",src:r,alt:"First slide",style:{height:"300px",width:"100%"}}),m.a.createElement(v.a.Caption,null,m.a.createElement(k.a,{className:"justify-content-center"},m.a.createElement(O.a,{sm:5,md:5,lg:5},m.a.createElement(x.a,{size:"sm",variant:"dark",title:"Eliminar",onClick:function(){return Ke(t,!1)},className:"buttonTrashGallery"},"Eliminar ",m.a.createElement(b.Q,null)))))));case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()));case 4:return t=e.sent,e.next=7,Promise.all(Object.keys(ge).map(function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ge[t],e.abrupt("return",m.a.createElement(v.a.Item,{key:n+"-update"},m.a.createElement("img",{className:"d-block",src:h.b+"images/product/gallery/"+a.filename,alt:"First slide",style:{height:"300px",width:"100%"}}),m.a.createElement(v.a.Caption,null,m.a.createElement(k.a,{className:"justify-content-center"},m.a.createElement(O.a,{sm:5,md:5,lg:5},m.a.createElement(x.a,{size:"sm",variant:"dark",title:"Eliminar",onClick:function(){return Ke(t,!0)},className:"buttonTrashGallery"},"Eliminar ",m.a.createElement(b.Q,null)))))));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()));case 7:r=e.sent,_e([].concat(Object(n.a)(t),Object(n.a)(r)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(e,a){if(a){var t=Object.assign({},ge);delete t[e],Ee(t),de(0)}else{var n=Object.assign({},oe);delete n[e],se(n),de(0)}},Ue=function(){e.history.replace("/inventary")};return m.a.createElement(C.a,{fluid:!0},m.a.createElement(k.a,null,m.a.createElement(O.a,{sm:12,md:12,lg:12},m.a.createElement("h4",{className:"title_principal"},$?"Modifcar producto en el invetario":"Crear producto en el inventario"))),m.a.createElement(N.a,{onSubmit:function(){},noValidate:!0,validated:W,ref:Me},m.a.createElement(k.a,{className:""},m.a.createElement(O.a,{sm:12,md:12,lg:12,xs:12,className:""},m.a.createElement(k.a,{className:"justify-content-center align-items-center"},m.a.createElement(O.a,{sm:4,md:4,lg:4,xs:12},m.a.createElement("br",null),m.a.createElement(x.a,Object(l.a)({size:"sm",onClick:function(){document.getElementById("file_product").click()},variant:"success",block:"true"},"size","sm"),"Escoger Imagen Producto ",m.a.createElement(b.v,null)),m.a.createElement("input",{type:"file",id:"file_product",style:{display:"none"},onChange:function(e){var a=e.target.files[0],t=new FileReader;t.onload=function(e){Be(m.a.createElement(j.a,{src:e.target.result,id:"img_show",style:{width:"80%"},roundedCircle:!0})),re(a)},t.readAsDataURL(a)}})),m.a.createElement(O.a,{sm:4,md:4,lg:4,xs:12,className:"text-center"},Ae)),m.a.createElement("br",null),m.a.createElement(k.a,null,m.a.createElement(g.a,Object.assign({},e.inputNameProduct,{handleChange:Fe,value:I.name_product,placeholder:"Nombre del Producto"})),m.a.createElement(g.a,Object.assign({},e.inputPrice,{handleChange:Fe,value:I.price})),m.a.createElement(N.a.Group,{className:e.isInventary?"col-md-4 col-sm-4 col-lg-4":"col-md-3 col-sm-3 col-lg-3"},m.a.createElement(N.a.Label,{className:"fontBold"},"Categor\xedas"),m.a.createElement(_.a,{value:I.id_category,onChange:function(e){P(Object(o.a)(Object(o.a)({},I),{},{id_category:e}))},isMulti:!0,options:K.map((function(e,a){return{value:e.id,label:e.name_category}}))}))),m.a.createElement(k.a,null,m.a.createElement(g.a,Object.assign({},e.inputDescription,{handleChange:Fe,value:I.description}))),m.a.createElement(S.a,null,m.a.createElement(w.a,null,m.a.createElement(S.a.Toggle,{as:w.a.Header,eventKey:"0",className:"header_card"},m.a.createElement("b",null,"Datos de Personalizaci\xf3n")," (hacer click para desplegar campos)"),m.a.createElement(S.a.Collapse,{eventKey:"0"},m.a.createElement(w.a.Body,null,m.a.createElement(k.a,null,m.a.createElement(g.a,Object.assign({},e.inputCodeEan,{handleChange:Fe,value:I.code_ean})),m.a.createElement(O.a,{sm:4,md:4,lg:4},m.a.createElement("br",null),m.a.createElement(x.a,(a={size:"sm",variant:"dark"},Object(l.a)(a,"size","sm"),Object(l.a)(a,"onClick",(function(){document.getElementById("code_ean").removeAttribute("readonly")})),Object(l.a)(a,"block",!0),a),"Escribir EAN")),m.a.createElement(O.a,{sm:4,md:4,lg:4},m.a.createElement("br",null),m.a.createElement(x.a,(r={size:"sm",variant:"dark"},Object(l.a)(r,"size","sm"),Object(l.a)(r,"onClick",(function(){document.getElementById("code_ean").setAttribute("readonly",!0),M(!0)})),Object(l.a)(r,"block",!0),r),"Scannear EAN"))),m.a.createElement(k.a,null,m.a.createElement(O.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement("label",{className:"form-control-label"},"Es Neto"),m.a.createElement("br",null),m.a.createElement(k.a,null,m.a.createElement(O.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement("label",{className:"checkbox-inline"},"Si \xa0\xa0\xa0",m.a.createElement("input",{type:"checkbox",name:"is_neto",checked:!!I.is_neto,value:!0,onChange:Fe}))),m.a.createElement(O.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement("label",{className:"checkbox-inline"},"No \xa0\xa0\xa0",m.a.createElement("input",{type:"checkbox",name:"is_neto",checked:!I.is_neto,value:!1,onChange:Fe}))))),m.a.createElement(O.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement("label",{className:"form-control-label"},"Es Auto Venta"),m.a.createElement("br",null),m.a.createElement(k.a,null,m.a.createElement(O.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement("label",{className:"checkbox-inline"},"Si \xa0\xa0\xa0",m.a.createElement("input",{type:"checkbox",name:"is_auto_sale",checked:!!I.is_auto_sale,value:!0,onChange:Fe}))),m.a.createElement(O.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement("label",{className:"checkbox-inline"},"No \xa0\xa0\xa0",m.a.createElement("input",{type:"checkbox",name:"is_auto_sale",checked:!I.is_auto_sale,value:!1,onChange:Fe})))))),m.a.createElement("br",null),m.a.createElement(k.a,null,m.a.createElement(g.a,Object.assign({},e.inputSticker,{handleChange:Fe,value:I.sticker_color})),m.a.createElement(g.a,Object.assign({},e.inputMethodSale,{handleChange:Fe,value:I.method_sale}),m.a.createElement("option",{value:""},"--Seleccione--"),m.a.createElement("option",{value:1},"Unidad"),m.a.createElement("option",{value:2},"Mayorista"),m.a.createElement("option",{value:3},"(Kilo, Litros, Metros, Entre Otros...)")),ze?m.a.createElement(g.a,Object.assign({},e.inputPack,{handleChange:Fe,value:I.pack})):""),m.a.createElement(k.a,null,m.a.createElement(g.a,{type:"number",label:"Stock minimo",name:"minimun_stock",required:!1,messageErrors:[""],cols:"col-md-4 col-lg-4 col-sm-4",value:I.minimun_stock,handleChange:Fe})),m.a.createElement(k.a,{className:"justify-content-center"},m.a.createElement(O.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement(x.a,{size:"sm",variant:"secondary",onClick:function(){document.getElementById("galleryImg").click()},block:"true"},"Imag\xe9nes de Galeria ",m.a.createElement(b.v,null)),m.a.createElement("input",{type:"file",id:"galleryImg",style:{display:"none"},multiple:!0,accept:".jpg, .png, .jpeg",onChange:function(e){se(Object.assign({},oe,e.target.files))}}))),m.a.createElement("br",null),m.a.createElement(k.a,{className:"justify-content-center"},m.a.createElement(O.a,{sm:8,md:8,lg:8},m.a.createElement(v.a,{activeIndex:me,onSelect:function(e,a){de(e)}},ye))))))),m.a.createElement("br",null),m.a.createElement(k.a,{className:"justify-content-center"},m.a.createElement(O.a,{md:4,sm:4,lg:4},m.a.createElement(x.a,{size:"sm",type:"button",onClick:He,disabled:Ne,variant:"danger",block:!0},ke," ",m.a.createElement(b.C,null)," ")),e.isInventary?m.a.createElement(O.a,{md:4,sm:4,lg:4},m.a.createElement(x.a,{size:"sm",type:"button",onClick:Ue,variant:"secondary",block:!0},"Volver")):"")))),m.a.createElement(y.a,{show:B,onHide:function(){return M(!1)},catchCode:function(e){M(!1)}}))};q.defaultProps={inputNameProduct:{type:"text",required:!0,name:"name_product",label:"Nombre",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputCodeEan:{type:"text",required:!1,readonly:!0,name:"code_ean",label:"Codigo EAN",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputIsNeto:{type:"select",required:!0,name:"is_neto",label:"Es Neto",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputDescription:{type:"textarea",required:!1,name:"description",label:"Descripci\xf3n (opcional)",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputAutoSale:{type:"select",required:!0,name:"is_auto_sale",label:"Auto Venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputMethodSale:{type:"select",required:!0,name:"method_sale",label:"M\xe9todo de Venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputPrice:{type:"number",required:!0,name:"price",label:"Precio",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",step:"any",messageErrors:["Requerido*"]},inputSticker:{type:"color",required:!0,name:"sticker_color",label:"color de la Etiqueta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputCategory:{type:"select",multiple:!0,required:!1,name:"id_category",label:"Categoria",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputPack:{type:"number",required:!1,name:"pack",label:"Pack",placeholder:"Ingrese la cantidad de venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",step:"any",messageErrors:["Requerido*"]}},a.a=q},877:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=(t(12),t(9)),l=(t(15),t(59)),o=t(717);a.default=function(e){return Object(n.useEffect)((function(){if(localStorage.getItem("configStore"))return l.a.toggleCollapsed(),function(){l.a.toggleCollapsed()};c.b.error("Error, debe hacer su configuraci\xf3n de empresa"),e.history.replace("/config/config_store")}),[]),r.a.createElement(o.a,Object.assign({},e,{handleSubmitProduct:function(){},isInventary:!0}))}}}]);
//# sourceMappingURL=28.87eb894f.chunk.js.map