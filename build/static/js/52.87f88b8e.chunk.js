(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[52],{611:function(e,t,a){"use strict";var n=a(32),l=a(119),r=a(1),c=a.n(r),o=a(120),i=a(622),s=a(623),m=a(301);function u(){var e=Object(l.a)(["\n  padding: 1rem;\n\n  .button-pagination{\n    margin-right: 10px;\n  }\n\n  .inputPage{\n    display: inline-block;\n    width: 150px;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .inputPageFilter{\n    display: inline-block;\n    width: 80%;\n    height: 34px;\n    padding: 6px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n\n  .pagination {\n    padding: 0.5rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  .table_responsive_eddit{\n    overflow-x: auto;\n  }\n"]);return u=function(){return e},e}var d=o.a.div(u());function E(e){var t=e.column,a=t.filterValue,n=t.preFilteredRows,l=t.setFilter,r=n.length;return c.a.createElement("input",{value:a||"",onChange:function(e){l(e.target.value||void 0)},placeholder:"Buscar en ".concat(r," registros..."),className:"inputPageFilter"})}function b(e,t,a){return Object(s.a)(e,a,{keys:[function(e){return e.values[t]}]})}function g(e){var t=e.columns,a=e.data,l=e.menuTop,r=e.headerColor,o=e.headerFontColor,s=c.a.useMemo((function(){return{fuzzyText:b,text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]),u=c.a.useMemo((function(){return{Filter:E}}),[]),d=Object(i.useTable)({columns:t,data:a,defaultColumn:u,filterTypes:s,initialState:{pageIndex:0}},i.useFilters,i.useSortBy,i.usePagination),g=d.getTableProps,p=d.getTableBodyProps,f=d.headerGroups,h=d.page,y=d.prepareRow,N=d.canPreviousPage,v=d.canNextPage,C=d.pageOptions,k=d.pageCount,_=d.gotoPage,z=d.nextPage,x=d.previousPage,j=d.setPageSize,O=d.state,S=O.pageIndex,w=O.pageSize;return c.a.createElement("div",{className:"table-responsive"},l?c.a.createElement("div",{className:"pagination"},c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return _(0)},disabled:!N},"<<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return x()},disabled:!N},"<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return z()},disabled:!v},">")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return _(k-1)},disabled:!v},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,S+1," de ",C.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:S+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;_(t)},className:"inputPage"},"onChange",(function(e){e.target.value>C.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:w,onChange:function(e){j(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))):"",c.a.createElement("table",Object.assign({},g(),{className:"table table-bordered"}),c.a.createElement("thead",null,f.map((function(e){return c.a.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"text-center"}),e.headers.map((function(e){return c.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{style:{backgroundColor:r||"rgb(218, 236, 242)",color:o||"black"}}),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""),c.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),c.a.createElement("tbody",Object.assign({},p(),{className:"text-center"}),h.map((function(e,t){return y(e)||c.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return c.a.createElement("td",e.getCellProps(),e.render("Cell"))})))})))),c.a.createElement("div",{className:"pagination"},c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return _(0)},disabled:!N},"<<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return x()},disabled:!N},"<")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return z()},disabled:!v},">")," ",c.a.createElement(m.a,{size:"sm",style:{height:"40px"},className:"button-pagination",variant:"secondary",onClick:function(){return _(k-1)},disabled:!v},">>")," ",c.a.createElement("span",null,"P\xe1gina"," ",c.a.createElement("strong",null,S+1," de ",C.length)," "),c.a.createElement("span",{className:"ml-3"},"| ",c.a.createElement("span",{className:"ml-2"},"Ir a la P\xe1gina:"," "),c.a.createElement("input",Object(n.a)({type:"number",defaultValue:S+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;_(t)},className:"inputPage"},"onChange",(function(e){e.target.value>C.length&&(e.target.value=1)}))))," ",c.a.createElement("select",{value:w,onChange:function(e){j(Number(e.target.value))},className:"inputPage"},[10,20,30,40,50].map((function(e){return c.a.createElement("option",{key:e,value:e},"Mostrar ",e)})))))}b.autoRemove=function(e){return!e};t.a=function(e){var t=e.data,a=e.columns,n=e.menuTop,l=e.headerColor,r=e.headerFontColor;return c.a.createElement(d,null,c.a.createElement(g,{data:t,columns:a,menuTop:n,headerFontColor:r,headerColor:l}))}},612:function(e,t,a){},839:function(e,t,a){"use strict";a.r(t);var n=a(32),l=a(18),r=a(15),c=a(1),o=a.n(c),i=a(301),s=a(609),m=a(608),u=a(598),d=a(197),E=a(661),b=a(662),g=a(607),p=a(831),f=a(88),h=a(615),y=a(611),N=a(9),v=a.n(N),C=a(10),k=a(8),_=a(17),z=a(31),x=a(614),j=a(613),O=a(50),S=a(157),w=(a(612),a(29)),P=a(659),F=a(77),D=function(e){return o.a.createElement(p.a,{show:e.isShow,onHide:e.onHide,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(p.a.Header,{closeButton:!0,className:"header_dark"},o.a.createElement(p.a.Title,{id:"contained-modal-title-vcenter"},"Acciones Disponibles")),e.displayLoadingModal?o.a.createElement(p.a.Body,null,o.a.createElement(F.a,null)):o.a.createElement(p.a.Body,null,1===e.cotization.status?o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",{className:"title_principal"},"Acciones generales"),o.a.createElement("hr",null),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.updateCotizacion(e.cotization.id)},block:!0},"Modificar Cotizaci\xf3n ",o.a.createElement(z.i,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",o.a.createElement(z.j,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacion(e.cotization.id)},block:!0},"Imprimir ",o.a.createElement(z.p,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacionNew(e.cotization.id)},block:!0},"Imprimir nuevo pdf ",o.a.createElement(z.p,null)))),o.a.createElement("br",null),o.a.createElement("h5",{className:"title_principal"},"Status de la Cotizaci\xf3n"),o.a.createElement("hr",null),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.changeStatus(e.cotization.id,2)},block:!0},"Aprobar Cotizaci\xf3n ",o.a.createElement(z.J,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.anulateCotization(e.cotization.id,e.cotization.status)},block:!0},"Anular cotizaci\xf3n ",o.a.createElement(z.a,null))))):2===e.cotization.status?o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",{className:"title_principal"},"Acciones generales"),o.a.createElement("hr",null),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.updateCotizacion(e.cotization.id)},block:!0},"Modificar Cotizaci\xf3n ",o.a.createElement(z.i,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",o.a.createElement(z.j,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacion(e.cotization.id)},block:!0},"Imprimir ",o.a.createElement(z.p,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacionNew(e.cotization.id)},block:!0},"Imprimir nuevo pdf ",o.a.createElement(z.p,null)))),o.a.createElement("br",null),o.a.createElement("h5",{className:"title_principal"},"Documentos de la Cotizaci\xf3n"),o.a.createElement("hr",null),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToFacturation(e.cotization.id)},block:!0},"Facturar ",o.a.createElement(z.o,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToNoteSale(e.cotization.id)},block:!0},"Nota de venta ",o.a.createElement(z.o,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToBillOfSale(e.cotization.id)},block:!0},"Boleta ",o.a.createElement(z.o,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.goToGuideDispatch(e.cotization.id)},block:!0},"Gu\xeda de Despacho ",o.a.createElement(z.o,null)))),o.a.createElement("br",null),o.a.createElement("h5",{className:"title_principal"},"Status de la Cotizaci\xf3n"),o.a.createElement("hr",null),o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.changeStatus(e.cotization.id,1)},block:!0},"Pasar a Pendiente ",o.a.createElement(z.J,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.anulateCotization(e.cotization.id,e.cotization.status)},block:!0},"Anular cotizaci\xf3n ",o.a.createElement(z.a,null))))):e.cotization.status>=3&&e.cotization.status<7?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",o.a.createElement(z.j,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacion(e.cotization.id)},block:!0},"Imprimir ",o.a.createElement(z.p,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.printCotizacionNew(e.cotization.id)},block:!0},"Imprimir nuevo pdf ",o.a.createElement(z.p,null))),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.anulateCotization(e.cotization.id,e.cotization.status)},block:!0},"Anular Documento ",o.a.createElement(z.a,null))))):o.a.createElement(u.a,{className:"justify-content-center"},o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement(i.a,{size:"sm",variant:"secondary",type:"button",onClick:function(t){return e.seeDetailCotization(e.cotization)},block:!0},"Ver Detalle ",o.a.createElement(z.j,null))))),o.a.createElement(p.a.Footer,null,o.a.createElement(i.a,{variant:"danger",size:"md",onClick:e.onHide},"Cerrar")))},T={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0},B={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},G={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},H={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},A={labels:[],datasets:[{label:"Monto acumulado de documentos hechos por mes",backgroundColor:"rgb(15, 13, 74)",borderColor:"rgb(27, 13, 74)",borderWidth:1,hoverBackgroundColor:"rgb(15, 13, 74)",hoverBorderColor:"rgb(27, 13, 74)",data:[]}]},M={labels:[],datasets:[{label:"Cantidad facturada de documentos por a\xf1os",data:[],fill:!1,backgroundColor:"rgb(125, 81, 52)",borderColor:"rgb(99, 56, 21)"}]},R=null,q=function(e){var t=Object(c.useState)(!0),N=Object(r.a)(t,2),w=N[0],q=N[1],I=Object(c.useState)(!1),Y=Object(r.a)(I,2),V=Y[0],L=Y[1],J=Object(c.useState)([]),K=Object(r.a)(J,2),W=K[0],U=K[1],Z=Object(c.useState)({}),Q=Object(r.a)(Z,2),X=Q[0],$=Q[1],ee=Object(c.useState)(!1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],le=Object(c.useState)(!1),re=Object(r.a)(le,2),ce=re[0],oe=re[1],ie=Object(c.useState)({}),se=Object(r.a)(ie,2),me=se[0],ue=se[1],de=Object(c.useState)(1),Ee=Object(r.a)(de,2),be=Ee[0],ge=Ee[1],pe=Object(c.useState)({date_desde:"",date_hasta:""}),fe=Object(r.a)(pe,2),he=fe[0],ye=fe[1],Ne=Object(c.useState)({}),ve=Object(r.a)(Ne,2),Ce=ve[0],ke=ve[1],_e=Object(c.useState)(!1),ze=Object(r.a)(_e,2),xe=ze[0],je=ze[1];Object(c.useMemo)((function(){R=[{Header:"Referencia",accessor:"ref",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(x.a,{placement:"bottom",overlay:o.a.createElement(j.a,{id:"tooltip-disabled2"},"Hacer click para ver las acciones")},o.a.createElement(i.a,{variant:"link",block:!0,type:"button",size:"sm",onClick:function(){return Ge(t)}},t.ref))}},{Header:"Rut Cliente",accessor:"rut_client"},{Header:"Raz\xf3n Social",accessor:"business_name_client",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(x.a,{placement:"right",overlay:o.a.createElement(j.a,{id:"tooltip-disabled2"},o.a.createElement("ul",{className:"list-group"},o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Vendedor: ")," ",t.name_seller),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Fono del Vendedor: ")," ",t.phone_seller?t.phone_seller:"No posee"),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Contacto")," ",t.name_contact?t.name_contact:"No posee"),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Fono del Contacto: ")," ",t.phone_contact),o.a.createElement("li",{className:"list-group-item"},o.a.createElement("b",null,"Comentario: ")," ",t.comment)))},o.a.createElement(i.a,{variant:"link",size:"sm",block:!0,type:"button"},t.business_name_client))}},{Header:"Tipo",accessor:function(e){return 1==e.type_effect?["Afecta"]:["Excento"]}},{Header:"Fecha-Emisi\xf3n",accessor:function(e){return[S(e.date_issue).format("DD-MM-YYYY")]}},{Header:"Fecha Vencimiento",accessor:function(e){return[S(e.date_expiration).format("DD-MM-YYYY")]}},{Header:"Status",accessor:function(e){return[Oe(e.status)]},Cell:function(e){var t=e.cell.row.original;return 1===t.status?o.a.createElement(x.a,{placement:"bottom",overlay:o.a.createElement(j.a,{id:"tooltip-disabled2"},"Hacer click para cambiar el Status")},o.a.createElement(i.a,{variant:"secondary",block:!0,size:"sm",onClick:function(){return De(t.id,2)}},"Pendiente")):2===t.status?o.a.createElement(x.a,{placement:"bottom",overlay:o.a.createElement(j.a,{id:"tooltip-disabled2"},"Hacer click para cambiar el Status")},o.a.createElement(i.a,{variant:"danger",block:!0,size:"sm",onClick:function(){return De(t.id,1)}},"Aprobada")):t.status>=3&&t.status<7?o.a.createElement(s.a,{variant:"primary",className:"font-badge"},Oe(t.status)):7==t.status?o.a.createElement(s.a,{variant:"danger",className:"font-badge"},"Anulada"):o.a.createElement(s.a,{variant:"danger",className:"font-badge"},"vencida")}},{Header:"Total Productos",accessor:"total_product",Cell:function(t){return o.a.createElement(x.a,{placement:"left",overlay:o.a.createElement(j.a,{id:"tooltip-total_pagar"+t.cell.row.original.id},o.a.createElement("ul",{className:"list-group"},t.cell.row.original.products.map((function(t,a){return o.a.createElement("li",{className:"list-group-item",key:a},o.a.createElement("b",null,"Producto"),": ",t.name_product,o.a.createElement("br",null),o.a.createElement("b",null,"Precio")," : ",e.configGeneral.simbolo_moneda+Object(_.g)(e.configGeneral,t.price),o.a.createElement("br",null),o.a.createElement("b",null,"Cantidad"),": ",t.quantity,o.a.createElement("br",null),o.a.createElement("b",null,"Status"),": ",1==t.status?"Pendiente":2==t.status?"Pagado":"Anulado")}))))},o.a.createElement(s.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda+Object(_.g)(e.configGeneral,t.cell.row.original.total_product)))}},{Header:"Total gastos",accessor:"total_gastos",Cell:function(t){return o.a.createElement(s.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda,Object(_.g)(e.configGeneral,t.cell.row.original.total_gastos))}},{Header:"Total Iva",accessor:"total_iva",Cell:function(t){return o.a.createElement(s.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda,Object(_.g)(e.configGeneral,t.cell.row.original.total_iva))}},{Header:"Descuento Global",accessor:"discount_global_total",Cell:function(t){return o.a.createElement(x.a,{placement:"left",overlay:o.a.createElement(j.a,{id:"tooltip-total_pagar"+t.cell.row.original.id},t.cell.row.original.discount_global?t.cell.row.original.discount_global:0,"%")},o.a.createElement(s.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda+Object(_.g)(e.configGeneral,t.cell.row.original.discount_global_amount)))}},{Header:"Total Balance",accessor:"total_balance",Cell:function(t){return o.a.createElement(s.a,{variant:"info",className:"font-badge",style:{backgroundColor:"rgb(198, 196, 54)",color:"white"}},e.configGeneral.simbolo_moneda,Object(_.g)(e.configGeneral,t.cell.row.original.total_balance))}},{Header:"Productos Pagados",Cell:function(e){var t=e.cell.row.original;return t.status<6?t.is_products_paid?o.a.createElement(s.a,{variant:"success",className:"font-badge"},t.total_quantity_products_paid,"/",t.total_quantity_products):o.a.createElement(s.a,{variant:"danger",className:"font-badge"},t.total_quantity_products_paid,"/",t.total_quantity_products):""}},{Header:"Acciones",Cell:function(e){var t=e.cell.row.original;return o.a.createElement(i.a,{variant:"primary",block:!0,type:"button",size:"sm",onClick:function(){return Ge(t)}},"Acciones")}}]}),[]),Object(c.useEffect)((function(){return O.a.toggleCollapsed(),function(){R=null,O.a.toggleCollapsed()}}),[]),Object(c.useEffect)((function(){Fe()}),[e.id_branch_office]),Object(c.useEffect)((function(){ce&&(G={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},A={labels:[],datasets:[{label:"Monto acumulado de documentos hechos por mes",backgroundColor:"rgb(15, 13, 74)",borderColor:"rgb(27, 13, 74)",borderWidth:1,hoverBackgroundColor:"rgb(15, 13, 74)",hoverBorderColor:"rgb(27, 13, 74)",data:[]}]},M={labels:[],datasets:[{label:"Cantidad facturada de documentos por a\xf1os",data:[],fill:!1,backgroundColor:"rgb(125, 81, 52)",borderColor:"rgb(99, 56, 21)"}]},H={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},we())}),[ce]);var Oe=function(e){return 1===e?"Pendiente":2===e?"Aprobado":3===e?"Facturado":4===e?"Nota de Venta":5===e?"Boleta":6===e?"Gu\xeda Despacho":"Anulada"},Se=function(e){ye(Object(l.a)(Object(l.a)({},he),{},Object(n.a)({},e.target.name,e.target.value)))},we=function(){me.statuses.forEach((function(e,t){G.labels.push(e.status),G.datasets[0].data.push(parseFloat(e.total)),G.datasets[0].backgroundColor.push(C.c[t]),G.datasets[0].hoverBackgroundColor.push(C.c[t])})),me.invoice.forEach((function(e,t){A.labels.push(e.mes),A.datasets[0].data.push(e.total)})),me.invoiceByYear.forEach((function(e,t){M.labels.push(e.year),M.datasets[0].data.push(e.total)})),me.totalByStatus.forEach((function(e,t){H.labels.push(e.name),H.datasets[0].data.push(parseFloat(e.total)),H.datasets[0].backgroundColor.push(C.c[t]),H.datasets[0].hoverBackgroundColor.push(C.c[t])})),setTimeout((function(){oe(!1)}),1500)},Pe=function(e){3==e&&ye({date_desde:"",date_hasta:""}),ge(e)},Fe=function(){var t=Object.assign({},he),a=[v.a.get(C.b+"cotizacion"),v.a.post(C.b+"cotizacion_stadistics",t)];Promise.all(a).then((function(e){U(e[0].data),ue(Object(l.a)(Object(l.a)({},me),{},{statuses:e[1].data.statuses,invoice:e[1].data.invoice,invoiceByYear:e[1].data.invoiceByYear,totalByStatus:e[1].data.totalByStatus})),setTimeout((function(){oe(!0)}),1e3),q(!1),V&&L(!1)})).catch((function(t){q(!1),L(!1),e.tokenExpired(t)}))},De=function(t,a){var n={status:a};k.b.info("Cambiando estado, espere por favor..."),L(!0),q(!0),setTimeout((function(){v.a.put(C.b+"cotizacion_status/"+t,n).then((function(e){k.b.success("Status Cambiado"),Object.keys(Ce).length&&ke(Object(l.a)(Object(l.a)({},Ce),{},{status:a})),L(!1),Fe()})).catch((function(t){q(!1),L(!1),e.tokenExpired(t)}))}),3e3)},Te=function(t,a){q(!0),L(!0),v.a.delete(C.b+"cotizacion/"+t).then((function(e){if(a>=1&&a<=2)k.b.success("Cotizaci\xf3n Anulada con \xe9xito"),Object.keys(Ce).length&&ke(Object(l.a)(Object(l.a)({},Ce),{},{status:7}));else if(a>=3&&a<=6){if(3===a){var t=!0;e.data.forEach((function(e,a){e.status?window.open(e.pdf_public_url,"_blank"):(t=!1,k.b.error("Factura ".concat(e.folio," no ha podido ser anulada")))})),t?Object.keys(Ce).length&&ke(Object(l.a)(Object(l.a)({},Ce),{},{status:2})):k.b.error("La cotizaci\xf3n no ha podido ser anulada debido a que 1 o m\xe1s facturas no fueron anuladas")}else Object.keys(Ce).length&&ke(Object(l.a)(Object(l.a)({},Ce),{},{status:2}));k.b.success("Documento anulado con \xe9xito"),L(!1)}Fe()})).catch((function(t){q(!1),L(!1),e.tokenExpired(t)}))},Be=function(){ne(!ae)},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!xe&&e&&ke(e),je(!xe)};return o.a.createElement(m.a,{fluid:!0},o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,md:6,lg:6,className:"text-center"},o.a.createElement("h4",{className:"title_principal"},"Tabla de Cotizaciones"),o.a.createElement(i.a,{block:!0,variant:"success",onClick:function(){e.history.replace("/quotitation/create_quotitation")},size:"sm"},"Nueva Cotizaci\xf3n ",o.a.createElement(z.y,null))),o.a.createElement(d.a,{sm:6,md:6,lg:6,className:"text-center title_principal"},o.a.createElement("h4",null,"Total Cotizaciones Realizadas"),o.a.createElement(s.a,{variant:"danger"},W.length))),o.a.createElement("hr",null),w?o.a.createElement(F.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,xs:12},o.a.createElement(E.a,null,o.a.createElement(b.a,null,o.a.createElement(E.a.Toggle,{as:b.a.Header,eventKey:"0",className:"header_card"},o.a.createElement("b",null,"Estad\xedsticas")," ",o.a.createElement(z.d,null)),o.a.createElement(E.a.Collapse,{eventKey:"0"},o.a.createElement(b.a.Body,null,o.a.createElement(u.a,{className:"justify-content-center"},1==be?o.a.createElement(d.a,{sm:2,md:2,lg:2},o.a.createElement(i.a,{variant:"secondary",type:"button",size:"sm",block:!0,onClick:function(){return Pe(2)}},"Activar Filtros")):2==be?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{type:"date",label:"Fecha desde",name:"date_desde",required:!0,messageErrors:["Requerido*"],cols:"col-md-3 col-lg-3 col-sm-3",value:he.date_desde,handleChange:Se}),o.a.createElement(f.a,{type:"date",label:"Fecha Hasta",name:"date_hasta",required:!0,messageErrors:["Requerido*"],cols:"col-md-3 col-lg-3 col-sm-3",value:he.date_hasta,handleChange:Se}),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement("br",null),o.a.createElement(i.a,{variant:"danger",type:"button",size:"sm",block:!0,onClick:function(){var t=Object.assign({},he);ge(3),k.b.info("Filtrando datos..."),v.a.post(C.b+"cotizacion_stadistics",t).then((function(e){ue(Object(l.a)(Object(l.a)({},me),{},{statuses:e.data.statuses,invoice:e.data.invoice,invoiceByYear:e.data.invoiceByYear,totalByStatus:e.data.totalByStatus})),setTimeout((function(){oe(!0),ge(1)}),1e3)})).catch((function(t){ge(1),e.tokenExpired(t)}))}},"Buscar")),o.a.createElement(d.a,{sm:3,md:3,lg:3},o.a.createElement("br",null),o.a.createElement(i.a,{variant:"secondary",type:"button",size:"sm",block:!0,onClick:function(){return Pe(1)}},"Ocultar Filtros"))):o.a.createElement(d.a,{sm:12,md:12,lg:12,className:"text-center"},o.a.createElement("br",null),o.a.createElement(g.a,{src:a(309),width:"30"}),o.a.createElement("br",null),"Cargando datos...")),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,md:6,lg:6,style:{height:"200px"}},o.a.createElement(P.b,{data:G,redraw:ce,options:T})),o.a.createElement(d.a,{sm:6,md:6,lg:6},o.a.createElement("table",{className:"table table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",colSpan:"2",style:{backgroundColor:"rgb(147, 52, 12)",color:"white"}},"Monto acumulado por estados")),o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Estado"),o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Total"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(me).length>0?o.a.createElement(o.a.Fragment,null,me.statuses.map((function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,t.status),o.a.createElement("td",null,e.configGeneral.simbolo_moneda,Object(_.g)(e.configGeneral,t.total)))}))):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"3",className:"text-center"},"Sin registros...")))))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,style:{height:"200px"}},o.a.createElement(P.a,{data:A,options:T,redraw:ce}))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:6,md:6,lg:6,style:{height:"230px"}},o.a.createElement("table",{className:"table table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",colSpan:"2",style:{backgroundColor:"rgb(147, 52, 12)",color:"white"}},"Total cotizaciones realizadas")),o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Estado"),o.a.createElement("th",{className:"text-center",style:{backgroundColor:"rgb(133, 124, 124)",color:"white"}},"Total"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(me).length>0?o.a.createElement(o.a.Fragment,null,me.totalByStatus.map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.total))}))):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"3",className:"text-center"},"Sin registros..."))))),o.a.createElement(d.a,{sm:6,md:6,lg:6,style:{height:"200px"},className:"text-center"},o.a.createElement(P.b,{data:H,redraw:ce,options:T}))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,style:{height:"200px"}},o.a.createElement(P.d,{data:M,options:B}))))))))),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,xs:12},o.a.createElement(y.a,{columns:R,data:W})))),o.a.createElement(p.a,{onHide:Be,show:ae,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(p.a.Header,{closeButton:!0,className:"header_dark"},o.a.createElement(p.a.Title,{id:"contained-modal-title-vcenter"},"Detalles de la Cotizaci\xf3n N\xb0 ",Object.keys(X).length>0?X.ref:"")),o.a.createElement(p.a.Body,null,o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Registrador"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Rut"),o.a.createElement("th",{className:"text-center"},"Direcci\xf3n"),o.a.createElement("th",{className:"text-center"},"Email"),o.a.createElement("th",{className:"text-center"},"Fono"),o.a.createElement("th",{className:"text-center"},"Pa\xeds"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,X.business_name_transmitter),o.a.createElement("td",null,X.rut_transmitter),o.a.createElement("td",null,X.address_transmitter),o.a.createElement("td",null,X.email_transmitter),o.a.createElement("td",null,X.phone_transmitter),o.a.createElement("td",null,X.country_transmitter)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Cliente"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Razon Social / Nombre"),o.a.createElement("th",{className:"text-center"},"Rut"),o.a.createElement("th",{className:"text-center"},"Direcci\xf3n"),o.a.createElement("th",{className:"text-center"},"Ciudad"),o.a.createElement("th",{className:"text-center"},"Comuna"),o.a.createElement("th",{className:"text-center"},"Giro"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,X.business_name_client),o.a.createElement("td",null,X.rut_client),o.a.createElement("td",null,X.address_client),o.a.createElement("td",null,X.city_client),o.a.createElement("td",null,X.comuna_client),o.a.createElement("td",null,X.spin_client)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Contacto"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Fono"),o.a.createElement("th",{className:"text-center"},"Email"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,X.name_contact),o.a.createElement("td",null,X.phone_contact),o.a.createElement("td",null,X.email_contact)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},o.a.createElement("h4",{className:"title_principal text-center"},"Datos del Vendedor"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Fono"),o.a.createElement("th",{className:"text-center"},"Email"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,X.name_seller),o.a.createElement("td",null,X.phone_seller),o.a.createElement("td",null,X.email_seller)):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:"table-responsive"},o.a.createElement("h4",{className:"title_principal text-center"},"Productos de la Cotizaci\xf3n"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Categoria"),o.a.createElement("th",{className:"text-center"},"Nombre"),o.a.createElement("th",{className:"text-center"},"Descripci\xf3n"),o.a.createElement("th",{className:"text-center"},"Cantidad"),o.a.createElement("th",{className:"text-center"},"Precio"),o.a.createElement("th",{className:"text-center"},"Descuento"),o.a.createElement("th",{className:"text-center"},"M\xe9todo de Venta"),o.a.createElement("th",{className:"text-center"},"Neto"),o.a.createElement("th",{className:"text-center"},"Total"),o.a.createElement("th",{className:"text-center"},"Status"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement(o.a.Fragment,null,X.products.map((function(t,a){return o.a.createElement("tr",null,o.a.createElement("td",null,t.category),o.a.createElement("td",null,t.name_product),o.a.createElement("td",null,t.description),o.a.createElement("td",null,t.quantity),o.a.createElement("td",null,e.configGeneral.simbolo_moneda,Object(_.a)(t.price,2,",",".")),o.a.createElement("td",null,t.discount),o.a.createElement("td",null,(n=t.method_sale,1===(n=parseInt(n))?"Unidad":2===n?"Mayorista":"(Litros, Kg, Etc..)")),o.a.createElement("td",null,t.is_neto?"Neto":"Iva"),o.a.createElement("td",null,o.a.createElement(s.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(_.a)(t.total,2,",","."))),o.a.createElement("td",null,1==t.status?"Pendiente":2==t.status?"Pagado":"Anulado"));var n}))):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:""},o.a.createElement("h4",{className:"title_principal text-center"},"Gastos de la Cotizaci\xf3n"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Descripci\xf3n"),o.a.createElement("th",{className:"text-center"},"Monto"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement(o.a.Fragment,null,X.gastos.map((function(t,a){return o.a.createElement("tr",null,o.a.createElement("td",null,t.description),o.a.createElement("td",null,o.a.createElement(s.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(_.a)(t.amount,2,",","."))))}))):"")))),o.a.createElement("br",null),Object.keys(X).length>0&&X.referencias&&X.referencias.length>0?o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:""},o.a.createElement("h4",{className:"title_principal text-center"},"Referencias de la Cotizaci\xf3n"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Tipo de Documento"),o.a.createElement("th",{className:"text-center"},"Referencia Cotiz."),o.a.createElement("th",{className:"text-center"},"Ind"),o.a.createElement("th",{className:"text-center"},"Fecha Ref."),o.a.createElement("th",{className:"text-center"},"Raz\xf3n de Referencia"),o.a.createElement("th",{className:"text-center"},"Tipo de C\xf3digo"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement(o.a.Fragment,null,X.referencias.map((function(e,t){return o.a.createElement("tr",null,o.a.createElement("td",null,e.type_document),o.a.createElement("td",null,e.ref_cotizacion),o.a.createElement("td",null,e.ind),o.a.createElement("td",null,e.date_ref?S(e.date_ref).tz("America/Santiago").format("DD-MM-YYYY"):""),o.a.createElement("td",null,e.reason_ref),o.a.createElement("td",null,e.type_code))}))):"")))):"",o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12,className:""},o.a.createElement("h4",{className:"title_principal text-center"},"Totales"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-striped table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"text-center"},"Neto"),o.a.createElement("th",{className:"text-center"},"Iva"),o.a.createElement("th",{className:"text-center"},"Gastos"),o.a.createElement("th",{className:"text-center"},"Descuento Global"),o.a.createElement("th",{className:"text-center"},"Total Balance"))),o.a.createElement("tbody",{className:"text-center"},Object.keys(X).length>0?o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(s.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(_.a)(X.total_product,2,",","."))),o.a.createElement("td",null,o.a.createElement(s.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(_.a)(X.total_iva,2,",","."))),o.a.createElement("td",null,o.a.createElement(s.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(_.a)(X.total_gastos,2,",","."))),o.a.createElement("td",null,o.a.createElement(s.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(_.a)(X.discount_global_amount,2,",","."))),o.a.createElement("td",null,o.a.createElement(s.a,{variant:"danger",className:"font-badge"},e.configGeneral.simbolo_moneda,Object(_.a)(X.total_balance,2,",",".")))):"")))),o.a.createElement("br",null),o.a.createElement(u.a,null,o.a.createElement(d.a,{sm:12,md:12,lg:12},Object.keys(X).length>0?o.a.createElement("h5",null,"Mostrar solo los Totales: ",o.a.createElement(s.a,{variant:"primary",className:"font-badge"},X.total_with_iva?"No":"Si")):""))),o.a.createElement(p.a.Footer,null,o.a.createElement(i.a,{size:"md",variant:"info",onClick:Be},"cerrar"))),o.a.createElement(D,{isShow:xe,onHide:Ge,cotization:Ce,updateCotizacion:function(t){e.history.replace("/quotitation/create_quotitation/"+t)},seeDetailCotization:function(e){$(e),Be()},printCotizacion:function(t){k.b.info("Buscando documento, espere por favor..."),q(!0),L(!0),v.a.get(C.b+"cotizacion_print/"+t+"/0").then((function(e){window.open(C.b+"documents/cotizacion/files_pdf/"+e.data.name),q(!1),L(!1)})).catch((function(t){q(!1),L(!1),e.tokenExpired(t)}))},printCotizacionNew:function(t){k.b.info("Generando documento, espere por favor..."),q(!0),L(!0),v.a.get(C.b+"cotizacion_print/"+t+"/0/1").then((function(e){window.open(C.b+"documents/cotizacion/files_pdf/"+e.data.name),q(!1),L(!1)})).catch((function(t){q(!1),L(!1),e.tokenExpired(t)}))},changeStatus:De,anulateCotization:function(e,t){Object(h.confirmAlert)({customUI:function(a){var n=a.onClose;return o.a.createElement("div",{className:"custom-ui-edit"},o.a.createElement("h1",null,"\xbfEsta seguro?"),o.a.createElement("p",{className:"font-alert"},"\xbfDesea realmente realizar esta acci\xf3n?"),o.a.createElement("button",{className:"button-alert",onClick:function(){Te(e,t),n()}},"Si, Aceptar"),o.a.createElement("button",{className:"button-alert",onClick:n},"No"))}})},goToFacturation:function(t){e.history.push("/quotitation/invoicing/"+t)},goToNoteSale:function(t){e.history.replace("/quotitation/sale_note_create/"+t)},goToBillOfSale:function(t){e.history.replace("/quotitation/bill_create/"+t)},goToGuideDispatch:function(t){e.history.push("/quotitation/guide/"+t)},displayLoadingModal:V}))};q.defaultProps={configGeneral:JSON.parse(localStorage.getItem("configGeneral"))};t.default=Object(w.b)((function(e){return{id_branch_office:e.enterpriseSucursal.id_branch_office,id_enterprise:e.enterpriseSucursal.id_enterprise}}),{})(q)}}]);
//# sourceMappingURL=52.87f88b8e.chunk.js.map