(this["webpackJsonpappwork-react-starter"]=this["webpackJsonpappwork-react-starter"]||[]).push([[36],{625:function(e,a,t){e.exports=t.p+"static/media/empty_logo.258d3697.jpg"},629:function(e,a,t){},631:function(e,a,t){},633:function(e,a,t){"use strict";var n=t(94),r=t(17),c=t.n(r),l=t(51),o=t(20),s=t(34),i=t(16),u=t(1),m=t.n(u),d=t(9),p=t.n(d),g=(t(629),t(32)),b=t(82),E=t(8),f=t(18),y=t(10),h=t(616),v=t(305),_=(t(311),t(631),t(643)),j=t.n(_),O=function(e){Object(u.useEffect)((function(){return a(),function(){j.a.stop()}}),[]);var a=function(){j.a.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#camera"),numOfWorkers:navigator.hardwareConcurrency,constraints:{width:300,height:300}},decoder:{readers:["ean_reader"]}},(function(e){e?E.b.error("Error, revise que la c\xe1mara de su dispositivo este conectada"):(console.log("Initialization finished. Ready to start"),j.a.start())}));var a=[];j.a.onDetected((function(n){var r=n.codeResult.code;if(a.push(r),a.length>20){var c=t(a)[0];e.catchCode(c)}}))},t=function(e){var a={};return e.forEach((function(e){a[e]||(a[e]=0),a[e]++})),Object.keys(a).sort((function(e,t){return a[e]<a[t]}))};return m.a.createElement("div",{id:"camera"})},k=function(e){return m.a.createElement(h.a,{show:e.show,onHide:e.onHide,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},m.a.createElement(h.a.Header,{closeButton:!0,className:"header_dark"},m.a.createElement(h.a.Title,{id:"contained-modal-title-vcenter"})),m.a.createElement(h.a.Body,null,m.a.createElement("div",{style:{width:"100%",paddingLeft:"25%"}},m.a.createElement(O,{catchCode:e.catchCode}))),m.a.createElement(h.a.Footer,null,m.a.createElement(v.a,{size:"sm",onClick:e.onHide},"Cerrar")))},C=t(641),x=t(613),q=t(837),S=t(604),N=t(205),w=t(614),I=t(50),z=t(650),P=t(648),R=function(e){var a,r,d=Object(u.useState)({name_product:"",code_ean:"",description:"",is_neto:!1,id_category:[],is_auto_sale:!1,img_product:"",method_sale:1,price:"",qr_image:"",sticker_color:"#9c7901",detailCost:[],pack:"",categoryNames:"",minimun_stock:10,quantity:"",cost:"",cost_details:"",id_product_detail:"",id_provider:[]}),h=Object(i.a)(d,2),_=h[0],j=h[1],O=Object(u.useState)(!1),R=Object(i.a)(O,2),D=R[0],G=(R[1],Object(u.useState)(!1)),A=Object(i.a)(G,2),B=A[0],F=A[1],M=Object(u.useState)([]),L=Object(i.a)(M,2),T=(L[0],L[1]),H=Object(u.useState)([]),V=Object(i.a)(H,2),K=V[0],U=V[1],J=Object(u.useState)(!1),W=Object(i.a)(J,2),Q=W[0],X=W[1],Y=Object(u.useState)(!1),Z=Object(i.a)(Y,2),$=Z[0],ee=Z[1],ae=Object(u.useState)(""),te=Object(i.a)(ae,2),ne=te[0],re=te[1],ce=Object(u.useState)({}),le=Object(i.a)(ce,2),oe=le[0],se=le[1],ie=Object(u.useState)(0),ue=Object(i.a)(ie,2),me=ue[0],de=ue[1],pe=Object(u.useState)({}),ge=Object(i.a)(pe,2),be=ge[0],Ee=ge[1],fe=Object(u.useState)(""),ye=Object(i.a)(fe,2),he=ye[0],ve=ye[1],_e=Object(u.useState)("Guardar"),je=Object(i.a)(_e,2),Oe=je[0],ke=je[1],Ce=Object(u.useState)(!1),xe=Object(i.a)(Ce,2),qe=xe[0],Se=xe[1],Ne=Object(u.useState)([]),we=Object(i.a)(Ne,2),Ie=we[0],ze=we[1],Pe=Object(u.useState)([]),Re=Object(i.a)(Pe,2),De=(Re[0],Re[1],Object(u.useState)(!1)),Ge=Object(i.a)(De,2),Ae=Ge[0],Be=Ge[1],Fe=Object(u.useState)(m.a.createElement(x.a,{src:t(625),id:"imagen_logo",style:{width:"100px"},roundedCircle:!0})),Me=Object(i.a)(Fe,2),Le=Me[0],Te=Me[1],He=Object(u.useState)(!1),Ve=Object(i.a)(He,2),Ke=Ve[0],Ue=Ve[1],Je=Object(u.useState)([]),We=Object(i.a)(Je,2),Qe=We[0],Xe=We[1],Ye=Object(u.useRef)(null);Object(u.useEffect)((function(){return $e(),function(){aa()}}),[]),Object(u.useEffect)((function(){ta()}),[oe,be]);var Ze=function(){var e=Object(s.a)(c.a.mark((function e(a){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"method_sale"===a.target.name?("",2==a.target.value?Be(!0):Be(!1),j(Object(o.a)(Object(o.a)({},_),{},Object(l.a)({},a.target.name,a.target.value)))):"is_neto"===a.target.name||"is_auto_sale"===a.target.name?(t="true"===a.target.value,j(Object(o.a)(Object(o.a)({},_),{},Object(l.a)({},a.target.name,t)))):j(Object(o.a)(Object(o.a)({},_),{},Object(l.a)({},a.target.name,a.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),$e=function(){var a=[p.a.get(y.b+"category"),p.a.get(y.b+"config_general"),p.a.get(y.b+"provider"),p.a.get(y.b+"product")];e.match.params.id&&(e.isInventary?a.push(p.a.get(y.b+"product/"+atob(e.match.params.id))):a.push(p.a.get(y.b+"product/"+e.match.params.id))),Promise.all(a).then((function(a){a[0].data?U(a[0].data):E.b.warning("Debe realizar su configuraci\xf3n general"),T(a[1].data),Xe(a[2].data),ze(a[3].data),a.length>4&&e.isInventary&&(j({name_product:a[4].data.name_product,code_ean:a[4].data.code_ean,description:a[4].data.description,is_neto:a[4].data.is_neto,id_category:a[4].data.categories.map((function(e){return{value:e.categories.id,label:e.categories.name_category}})),is_auto_sale:a[4].data.is_auto_sale,img_product:a[4].data.img_product,method_sale:a[4].data.method_sale,price:a[4].data.price,qr_image:a[4].data.qr_image,sticker_color:a[4].data.sticker_color,detailCost:a[4].data.cost_details,pack:a[4].data.pack,id_product_detail:a[4].data.id_product_detail,minimun_stock:a[4].data.inventary[0].minimun_stock}),2==a[4].data.method_sale&&Be(!0),ee(!0),a[4].data.img_product&&Te(m.a.createElement(x.a,{src:y.b+"images/product/principal/"+a[4].data.img_product,id:"imagen_logo",style:{width:"80px"},thumbnail:!0})),a[4].data.gallery.length>0&&Ee(a[4].data.gallery))})).catch((function(e){e.response?E.b.error(e.response.data.message):(console.log(e),E.b.error("Error,contacte con soporte"))}))},ea=function(){var a=Object(s.a)(c.a.mark((function a(){var t,n,r,l,o,s,i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!1!==Ye.current.checkValidity()){a.next=5;break}return X(!0),a.abrupt("return");case 5:if(t=new FormData,n=Object.assign({},_,{detailCost:_.detailCost.concat(D)}),Object.keys(n).forEach((function(e,a){if("img_product"===e)ne&&t.append(e,ne);else if("id_category"===e){var n="";_[e]&&_[e].forEach((function(e,a){t.append("id_category",e.value),n+=e.label+","})),n=n.substring(0,n.length-1),t.append("name_categories",n)}else t.append(e,_[e])})),ke("Guardando Datos, Espere por favor..."),Se(!0),!$){a.next=25;break}return r=e.isInventary?atob(e.match.params.id):e.match.params.id,a.next=14,p.a.put(y.b+"product/"+r,t);case 14:return l=a.sent,ke("Trabajando en galeria de imag\xe9nes..."),o=new FormData,Object.keys(oe).forEach((function(e,a){o.append("gallery",oe[e])})),Object.keys(be).forEach((function(e,a){o.append("galleryUpdate",be[e].filename)})),a.next=21,p.a.put(y.b+"update_gallery/"+r,o);case 21:E.b.success("Producto Modificado"),setTimeout((function(){e.isInventary?ra():e.handleSubmitProduct(Object.assign({},l.data))}),1500),a.next=48;break;case 25:return a.next=27,p.a.post(y.b+"product",t);case 27:if(s=a.sent,!(Object.keys(oe).length>0)){a.next=42;break}return ke("Guardando Galeria de Imagenes..."),i=new FormData,Object.keys(oe).forEach((function(e,a){i.append("gallery",oe[e])})),i.append("id_product",s.data.id),a.next=35,p.a.post(y.b+"product_gallery",i);case 35:E.b.success("Producto Creado"),ke("Guardar"),Se(!1),Be(!1),aa(),a.next=47;break;case 42:E.b.success("Producto Creado"),ke("Guardar"),Se(!1),Be(!1),aa();case 47:setTimeout((function(){e.isInventary?ra():e.handleSubmitProduct(Object.assign({},s.data))}),1500);case 48:a.next=55;break;case 50:a.prev=50,a.t0=a.catch(0),ke("Guardar"),Se(!1),a.t0.response?E.b.error(a.t0.response.data.message):(console.log(a.t0),E.b.error("Error, contacte con soporte"));case 55:case"end":return a.stop()}}),a,null,[[0,50]])})));return function(){return a.apply(this,arguments)}}(),aa=function(){j({name_product:"",cost:"",code_ean:"",description:"",is_neto:"",id_category:"",is_auto_sale:"",img_product:"",method_sale:"",price:"",qr_image:"",sticker_color:"#9c7901",detailCost:[],pack:"",categoryNames:"",minimun_stock:0}),re(null),Te(null),se({}),ve(""),Te(m.a.createElement(x.a,{src:t(625),id:"img_show",style:{width:"80px"},roundedCircle:!0}))},ta=function(){var e=Object(s.a)(c.a.mark((function e(){var a,t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",0,e.next=4,Promise.all(Object.keys(oe).map(function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe[t],e.next=3,Object(f.h)(a);case 3:return r=e.sent,e.abrupt("return",m.a.createElement(q.a.Item,{key:n},m.a.createElement("img",{className:"d-block",src:r,alt:"First slide",style:{height:"300px",width:"100%"}}),m.a.createElement(q.a.Caption,null,m.a.createElement(S.a,{className:"justify-content-center"},m.a.createElement(N.a,{sm:5,md:5,lg:5},m.a.createElement(v.a,{size:"sm",variant:"dark",title:"Eliminar",onClick:function(){return na(t,!1)},className:"buttonTrashGallery"},"Eliminar ",m.a.createElement(g.N,null)))))));case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()));case 4:return t=e.sent,e.next=7,Promise.all(Object.keys(be).map(function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=be[t],e.abrupt("return",m.a.createElement(q.a.Item,{key:n+"-update"},m.a.createElement("img",{className:"d-block",src:y.b+"images/product/gallery/"+a.filename,alt:"First slide",style:{height:"300px",width:"100%"}}),m.a.createElement(q.a.Caption,null,m.a.createElement(S.a,{className:"justify-content-center"},m.a.createElement(N.a,{sm:5,md:5,lg:5},m.a.createElement(v.a,{size:"sm",variant:"dark",title:"Eliminar",onClick:function(){return na(t,!0)},className:"buttonTrashGallery"},"Eliminar ",m.a.createElement(g.N,null)))))));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()));case 7:r=e.sent,ve([].concat(Object(n.a)(t),Object(n.a)(r)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),na=function(e,a){if(a){var t=Object.assign({},be);delete t[e],Ee(t),de(0)}else{var n=Object.assign({},oe);delete n[e],se(n),de(0)}},ra=function(){e.history.replace("/inventary")},ca=function(){if(!Ke){if(!_.name_product||!_.price)return void X(!0);Q&&X(!1)}Ue(!Ke)};return m.a.createElement(w.a,{fluid:!0},m.a.createElement(S.a,null,m.a.createElement(N.a,{sm:12,md:12,lg:12},m.a.createElement("h4",{className:"title_principal"},$?"Modifcar producto en el invetario":"Crear producto en el inventario"))),m.a.createElement(I.a,{onSubmit:function(){},noValidate:!0,validated:Q,ref:Ye},Ke?m.a.createElement(m.a.Fragment,null,m.a.createElement(S.a,null,m.a.createElement(b.a,{type:"number",label:"Cantidad",name:"quantity",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:_.quantity,handleChange:Ze}),m.a.createElement(b.a,{type:"text",label:"Detalle Costo",name:"detail",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:_.detail,handleChange:Ze}),m.a.createElement(b.a,{type:"number",step:"any",label:"Costo",name:"cost",required:!1,messageErrors:["Requerido*"],cols:"col-md-4 col-lg-4 col-sm-4",value:_.cost,handleChange:Ze})),m.a.createElement(S.a,null,m.a.createElement(I.a.Group,{className:"col-md-4 col-sm-4 col-lg-4"},m.a.createElement(I.a.Label,{className:"fontBold"},"Proveedores"),m.a.createElement(C.a,{value:_.id_provider,onChange:function(e){j(Object(o.a)(Object(o.a)({},_),{},{id_provider:e}))},isMulti:!0,options:Qe.map((function(e,a){return{value:e.id,label:e.social_razon}}))}))),m.a.createElement(S.a,{className:"justify-content-center"},m.a.createElement(N.a,{sm:4,md:4,lg:4},m.a.createElement(v.a,{size:"sm",type:"button",onClick:ea,disabled:qe,variant:"danger",block:!0},Oe," ",m.a.createElement(g.z,null)," ")),m.a.createElement(N.a,{sm:4,md:4,lg:4},m.a.createElement(v.a,{size:"sm",type:"button",onClick:ca,variant:"secondary",block:!0},"Atr\xe1s")))):m.a.createElement(S.a,{className:""},m.a.createElement(N.a,{sm:12,md:12,lg:12,xs:12,className:""},m.a.createElement(S.a,{className:"justify-content-center align-items-center"},m.a.createElement(N.a,{sm:4,md:4,lg:4,xs:12},m.a.createElement("br",null),m.a.createElement(v.a,Object(l.a)({size:"sm",onClick:function(){document.getElementById("file_product").click()},variant:"success",block:"true"},"size","sm"),"Escoger Imagen Producto ",m.a.createElement(g.s,null)),m.a.createElement("input",{type:"file",id:"file_product",style:{display:"none"},onChange:function(e){var a=e.target.files[0],t=new FileReader;t.onload=function(e){Te(m.a.createElement(x.a,{src:e.target.result,id:"img_show",style:{width:"80%"},roundedCircle:!0})),re(a)},t.readAsDataURL(a)}})),m.a.createElement(N.a,{sm:4,md:4,lg:4,xs:12,className:"text-center"},Le)),m.a.createElement("br",null),m.a.createElement(S.a,null,m.a.createElement(b.a,Object.assign({},e.inputNameProduct,{handleChange:Ze,value:_.name_product,placeholder:"Nombre del Producto"})),m.a.createElement(b.a,Object.assign({},e.inputPrice,{handleChange:Ze,value:_.price})),m.a.createElement(I.a.Group,{className:e.isInventary?"col-md-4 col-sm-4 col-lg-4":"col-md-3 col-sm-3 col-lg-3"},m.a.createElement(I.a.Label,{className:"fontBold"},"Categor\xedas"),m.a.createElement(C.a,{value:_.id_category,onChange:function(e){j(Object(o.a)(Object(o.a)({},_),{},{id_category:e}))},isMulti:!0,options:K.map((function(e,a){return{value:e.id,label:e.name_category}}))}))),m.a.createElement(S.a,null,m.a.createElement(b.a,Object.assign({},e.inputDescription,{handleChange:Ze,value:_.description}))),m.a.createElement(z.a,null,m.a.createElement(P.a,null,m.a.createElement(z.a.Toggle,{as:P.a.Header,eventKey:"0",className:"header_card"},m.a.createElement("b",null,"Datos de Personalizaci\xf3n")," (hacer click para desplegar campos)"),m.a.createElement(z.a.Collapse,{eventKey:"0"},m.a.createElement(P.a.Body,null,m.a.createElement(S.a,null,m.a.createElement(b.a,Object.assign({},e.inputCodeEan,{handleChange:Ze,value:_.code_ean})),m.a.createElement(N.a,{sm:4,md:4,lg:4},m.a.createElement("br",null),m.a.createElement(v.a,(a={size:"sm",variant:"dark"},Object(l.a)(a,"size","sm"),Object(l.a)(a,"onClick",(function(){document.getElementById("code_ean").removeAttribute("readonly")})),Object(l.a)(a,"block",!0),a),"Escribir EAN")),m.a.createElement(N.a,{sm:4,md:4,lg:4},m.a.createElement("br",null),m.a.createElement(v.a,(r={size:"sm",variant:"dark"},Object(l.a)(r,"size","sm"),Object(l.a)(r,"onClick",(function(){document.getElementById("code_ean").setAttribute("readonly",!0),F(!0)})),Object(l.a)(r,"block",!0),r),"Scannear EAN"))),m.a.createElement("br",null),m.a.createElement(S.a,null,m.a.createElement(b.a,Object.assign({},e.inputSticker,{handleChange:Ze,value:_.sticker_color})),m.a.createElement(b.a,Object.assign({},e.inputMethodSale,{handleChange:Ze,value:_.method_sale}),m.a.createElement("option",{value:""},"--Seleccione--"),m.a.createElement("option",{value:1},"Unidad"),m.a.createElement("option",{value:2},"Mayorista"),m.a.createElement("option",{value:3},"(Kilo, Litros, Metros, Entre Otros...)")),Ae?m.a.createElement(m.a.Fragment,null,m.a.createElement(b.a,Object.assign({},e.inputPack,{handleChange:Ze,value:_.pack})),m.a.createElement(b.a,{label:"producto",type:"select",name:"id_product_detail",required:!0,messageErrors:["requerido"],cols:"col-md-4 col-sm-4 col-xl-4 col-lg-4",value:_.id_product_detail,handleChange:Ze},m.a.createElement("option",{value:""},"--Seleccione--"),Ie.map((function(e,a){return m.a.createElement("option",{value:e.id,key:a},e.name_product)})))):"",m.a.createElement(b.a,{type:"number",label:"Stock minimo",name:"minimun_stock",required:!1,messageErrors:[""],cols:"col-md-4 col-lg-4 col-sm-4",value:_.minimun_stock,handleChange:Ze})),m.a.createElement(S.a,{className:"justify-content-center"},m.a.createElement(N.a,{sm:6,md:6,lg:6,xs:12},m.a.createElement(v.a,{size:"sm",variant:"secondary",onClick:function(){document.getElementById("galleryImg").click()},block:"true"},"Imag\xe9nes de Galeria ",m.a.createElement(g.s,null)),m.a.createElement("input",{type:"file",id:"galleryImg",style:{display:"none"},multiple:!0,accept:".jpg, .png, .jpeg",onChange:function(e){se(Object.assign({},oe,e.target.files))}}))),m.a.createElement("br",null),m.a.createElement(S.a,{className:"justify-content-center"},m.a.createElement(N.a,{sm:8,md:8,lg:8},m.a.createElement(q.a,{activeIndex:me,onSelect:function(e,a){de(e)}},he))))))),m.a.createElement("br",null),$?m.a.createElement(S.a,{className:"justify-content-center"},m.a.createElement(N.a,{md:4,sm:4,lg:4},m.a.createElement(v.a,{size:"sm",type:"button",onClick:ea,disabled:qe,variant:"danger",block:!0},Oe," ",m.a.createElement(g.z,null)," ")),e.isInventary?m.a.createElement(N.a,{md:4,sm:4,lg:4},m.a.createElement(v.a,{size:"sm",type:"button",onClick:ra,variant:"secondary",block:!0},"Volver")):""):m.a.createElement(S.a,{className:"justify-content-center"},e.isInventary&&m.a.createElement(N.a,{sm:4,md:4,lg:4},m.a.createElement(v.a,{variant:"danger",size:"sm",onClick:ea,block:!0},"Guardar ",m.a.createElement(g.z,null))),m.a.createElement(N.a,{sm:4,md:4,lg:4},m.a.createElement(v.a,{variant:e.isInventary?"secondary":"danger",size:"sm",onClick:ca,block:!0},"Datos de Inventario")))))),m.a.createElement(k,{show:B,onHide:function(){return F(!1)},catchCode:function(e){F(!1)}}))};R.defaultProps={inputNameProduct:{type:"text",required:!0,name:"name_product",label:"Nombre",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputCodeEan:{type:"text",required:!1,readonly:!0,name:"code_ean",label:"Codigo EAN",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputIsNeto:{type:"select",required:!0,name:"is_neto",label:"Es Neto",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputDescription:{type:"textarea",required:!1,name:"description",label:"Descripci\xf3n (opcional)",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputAutoSale:{type:"select",required:!0,name:"is_auto_sale",label:"Auto Venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputMethodSale:{type:"select",required:!0,name:"method_sale",label:"M\xe9todo de Venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputPrice:{type:"number",required:!0,name:"price",label:"Precio",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",step:"any",messageErrors:["Requerido*"]},inputSticker:{type:"color",required:!0,name:"sticker_color",label:"color de la Etiqueta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputCategory:{type:"select",multiple:!0,required:!1,name:"id_category",label:"Categoria",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",messageErrors:["Requerido*"]},inputPack:{type:"number",required:!1,name:"pack",label:"Pack",placeholder:"Ingrese la cantidad de venta",cols:"col-sm-4 col-md-4 col-lg-4 col-xs-4",step:"any",messageErrors:["Requerido*"]}};a.a=R},787:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(8),l=t(55),o=t(633);a.default=function(e){return Object(n.useEffect)((function(){if(localStorage.getItem("configStore"))return l.a.toggleCollapsed(),function(){l.a.toggleCollapsed()};c.b.error("Error, debe hacer su configuraci\xf3n de empresa"),e.history.replace("/config/config_store")}),[]),r.a.createElement(o.a,Object.assign({},e,{handleSubmitProduct:function(){},isInventary:!0}))}}}]);